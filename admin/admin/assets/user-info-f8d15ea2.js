import{d as N,j as B,r as x,n as I,q as r,h as F,c as A,e as o,w as a,a as t,u as l,cN as H,A as z,t as _,i as V,b3 as L,cq as T,bg as j,bh as K,bi as X,K as G,L as J,M as O,E as Q,X as W,p as Y,g as Z,f as oo}from"./index-6405d5ac.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                    *//* empty css                  *//* empty css                     */import"./el-dropdown-item-4ed993c7.js";import{_ as eo}from"./index.vue_vue_type_script_setup_true_lang-c21881a6.js";/* empty css                  */import{s as so}from"./personal-bd5b54dd.js";import{_ as to}from"./index.vue_vue_type_script_setup_true_lang-a21c9ef8.js";/* empty css                        */import{_ as ro}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-4b0a6750.js";/* empty css                        */import"./index.vue_vue_type_style_index_0_lang-56168b85.js";import"./attachment-054b966e.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-f80d36ce.js";/* empty css               *//* empty css                  *//* empty css                  *//* empty css                      *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css                    */import"./index.vue_vue_type_script_setup_true_lang-0e5521b7.js";/* empty css                   */import"./sortable.esm-be94e56d.js";const f=c=>(Y("data-v-430279b5"),c=c(),Z(),c),ao={class:"userinfo flex h-full items-center"},lo={class:"user-name pl-[8px]"},no=f(()=>t("div",{class:"flex items-center leading-[1] py-[5px]"},[t("span",{class:"iconfont iconqiehuan ml-[4px] !text-[14px] mr-[10px]"}),t("span",{class:"text-[14px]"},"切换站点")],-1)),po=f(()=>t("div",{class:"flex items-center leading-[1] py-[5px]"},[t("span",{class:"iconfont iconshezhi1 ml-[4px] !text-[14px] mr-[10px]"}),t("span",{class:"text-[14px]"},"账号设置")],-1)),io=f(()=>t("div",{class:"flex items-center leading-[1] py-[5px]"},[t("span",{class:"iconfont iconxiugai ml-[4px] !text-[14px] mr-[10px]"}),t("span",{class:"text-[14px]"},"修改密码")],-1)),mo=f(()=>t("div",{class:"flex items-center leading-[1] py-[5px]"},[t("span",{class:"iconfont icontuichudenglu ml-[4px] !text-[14px] mr-[10px]"}),t("span",{class:"text-[14px]"},"退出登录")],-1)),co={class:"form-tip"},uo={class:"dialog-footer"},_o=N({__name:"user-info",setup(c){const d=B(),E=oo(),k=p=>{switch(p){case"logout":d.logout();break}},P=()=>{d.logout()},C=p=>{E.push(p)},v=x(null),D=()=>{var p;(p=v.value)==null||p.open()},m=x(!1),h=x(),e=I({original_password:"",password:"",password_copy:""}),U=I({original_password:[{required:!0,message:r("originalPasswordPlaceholder"),trigger:"blur"}],password:[{required:!0,message:r("passwordPlaceholder"),trigger:"blur"}],password_copy:[{required:!0,message:r("passwordPlaceholder"),trigger:"blur"}]}),q=p=>{p&&p.validate(s=>{if(s){let i="";if(e.password&&!e.original_password&&(i=r("originalPasswordHint")),e.password&&e.original_password&&!e.password_copy&&(i=r("newPasswordHint")),e.password&&e.original_password&&e.password_copy&&e.password!=e.password_copy&&(i=r("doubleCipherHint")),i){L({type:"error",message:i});return}so(e).then(b=>{m.value=!1})}else return!1})};return(p,s)=>{const i=T,b=eo,u=j,R=K,S=X,w=G,g=J,$=O,y=Q,M=W;return F(),A("div",null,[o(S,{onCommand:k,tabindex:1},{dropdown:a(()=>[o(R,null,{default:a(()=>[o(u,{onClick:s[0]||(s[0]=n=>C("/home/index"))},{default:a(()=>[no]),_:1}),o(u,{onClick:D},{default:a(()=>[po]),_:1}),o(u,{onClick:s[1]||(s[1]=n=>m.value=!0)},{default:a(()=>[io]),_:1}),o(u,{onClick:P},{default:a(()=>[mo]),_:1})]),_:1})]),default:a(()=>[t("div",ao,[o(i,{size:25,icon:l(H),src:l(d).userInfo.head_img?l(z)(l(d).userInfo.head_img):""},null,8,["icon","src"]),t("div",lo,_(l(d).userInfo.username),1),o(b,{name:"element ArrowDown",class:"ml-[5px]"})])]),_:1}),o(M,{modelValue:m.value,"onUpdate:modelValue":s[7]||(s[7]=n=>m.value=n),width:"450px",title:"修改密码"},{footer:a(()=>[t("span",uo,[o(y,{onClick:s[5]||(s[5]=n=>m.value=!1)},{default:a(()=>[V(_(l(r)("cancel")),1)]),_:1}),o(y,{type:"primary",onClick:s[6]||(s[6]=n=>q(h.value))},{default:a(()=>[V(_(l(r)("save")),1)]),_:1})])]),default:a(()=>[t("div",null,[o($,{model:e,"label-width":"90px",ref_key:"formRef",ref:h,rules:U,class:"page-form"},{default:a(()=>[o(g,{label:l(r)("originalPassword"),prop:"original_password"},{default:a(()=>[o(w,{modelValue:e.original_password,"onUpdate:modelValue":s[2]||(s[2]=n=>e.original_password=n),modelModifiers:{trim:!0},type:"password",placeholder:l(r)("originalPasswordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(g,{label:l(r)("newPassword"),prop:"password"},{default:a(()=>[o(w,{modelValue:e.password,"onUpdate:modelValue":s[3]||(s[3]=n=>e.password=n),modelModifiers:{trim:!0},type:"password",placeholder:l(r)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"]),t("div",co,_(l(r)("passwordTip")),1)]),_:1},8,["label"]),o(g,{label:l(r)("passwordCopy"),prop:"password_copy"},{default:a(()=>[o(w,{modelValue:e.password_copy,"onUpdate:modelValue":s[4]||(s[4]=n=>e.password_copy=n),modelModifiers:{trim:!0},type:"password",placeholder:l(r)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"]),o(to,{ref_key:"userInfoEditRef",ref:v},null,512)])}}});const Oo=ro(_o,[["__scopeId","data-v-430279b5"]]);export{Oo as default};
