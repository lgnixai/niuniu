import{b1 as Pe,d as ze,x as Ne,r as oe,n as Oe,l as Ie,q as ee,Q as Me,h as he,s as be,w as j,a as De,e as G,i as Te,t as Ae,u as te,R as Ue,c as Le,F as Se,T as Fe,U as qe,ac as Be,aD as We,L as je,V as Ke,M as Ve,E as He,X as Qe,Y as $e}from"./index-6405d5ac.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                     *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                  */import{a as Ge,b as Je,i as Ye}from"./site-a163b904.js";import{h as Ze,_ as Xe}from"./VisualGrid.vue_vue_type_script_setup_true_lang-873a4661.js";import{_ as et}from"./_plugin-vue_export-helper-c27b6911.js";var Ce={},tt={get exports(){return Ce},set exports(_e){Ce=_e}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(_e,xe){(function(ge,k){_e.exports=k()})(Pe,function ge(){var k=typeof self<"u"?self:typeof window<"u"?window:k!==void 0?k:{},K=!k.document&&!!k.postMessage,T=k.IS_PAPA_WORKER||!1,re={},me=0,o={parse:function(e,t){var r=(t=t||{}).dynamicTyping||!1;if(h(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=!!h(t.transform)&&t.transform,t.worker&&o.WORKERS_SUPPORTED){var i=function(){if(!o.WORKERS_SUPPORTED)return!1;var u=(v=k.URL||k.webkitURL||null,_=ge.toString(),o.BLOB_URL||(o.BLOB_URL=v.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",_,")();"],{type:"text/javascript"})))),f=new k.Worker(u),v,_;return f.onmessage=we,f.id=me++,re[f.id]=f}();return i.userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=h(t.step),t.chunk=h(t.chunk),t.complete=h(t.complete),t.error=h(t.error),delete t.worker,void i.postMessage({input:e,config:t,workerId:i.id})}var s=null;return o.NODE_STREAM_INPUT,typeof e=="string"?(e=function(u){return u.charCodeAt(0)===65279?u.slice(1):u}(e),s=t.download?new fe(t):new le(t)):e.readable===!0&&h(e.read)&&h(e.on)?s=new ue(t):(k.File&&e instanceof File||e instanceof Object)&&(s=new ie(t)),s.stream(e)},unparse:function(e,t){var r=!1,i=!0,s=",",u=`\r
`,f='"',v=f+f,_=!1,n=null,C=!1;(function(){if(typeof t=="object"){if(typeof t.delimiter!="string"||o.BAD_DELIMITERS.filter(function(a){return t.delimiter.indexOf(a)!==-1}).length||(s=t.delimiter),(typeof t.quotes=="boolean"||typeof t.quotes=="function"||Array.isArray(t.quotes))&&(r=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(_=t.skipEmptyLines),typeof t.newline=="string"&&(u=t.newline),typeof t.quoteChar=="string"&&(f=t.quoteChar),typeof t.header=="boolean"&&(i=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");n=t.columns}t.escapeChar!==void 0&&(v=t.escapeChar+f),(typeof t.escapeFormulae=="boolean"||t.escapeFormulae instanceof RegExp)&&(C=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var d=new RegExp(ne(f),"g");if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return B(null,e,_);if(typeof e[0]=="object")return B(n||Object.keys(e[0]),e,_)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||n),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),B(e.fields||[],e.data||[],_);throw new Error("Unable to serialize unrecognized input");function B(a,y,S){var E="";typeof a=="string"&&(a=JSON.parse(a)),typeof y=="string"&&(y=JSON.parse(y));var A=Array.isArray(a)&&0<a.length,I=!Array.isArray(y[0]);if(A&&i){for(var D=0;D<a.length;D++)0<D&&(E+=s),E+=L(a[D],D);0<y.length&&(E+=u)}for(var l=0;l<y.length;l++){var c=A?a.length:y[l].length,b=!1,O=A?Object.keys(y[l]).length===0:y[l].length===0;if(S&&!A&&(b=S==="greedy"?y[l].join("").trim()==="":y[l].length===1&&y[l][0].length===0),S==="greedy"&&A){for(var g=[],F=0;F<c;F++){var x=I?a[F]:F;g.push(y[l][x])}b=g.join("").trim()===""}if(!b){for(var m=0;m<c;m++){0<m&&!O&&(E+=s);var W=A&&I?a[m]:m;E+=L(y[l][W],m)}l<y.length-1&&(!S||0<c&&!O)&&(E+=u)}}return E}function L(a,y){if(a==null)return"";if(a.constructor===Date)return JSON.stringify(a).slice(1,25);var S=!1;C&&typeof a=="string"&&C.test(a)&&(a="'"+a,S=!0);var E=a.toString().replace(d,v);return(S=S||r===!0||typeof r=="function"&&r(a,y)||Array.isArray(r)&&r[y]||function(A,I){for(var D=0;D<I.length;D++)if(-1<A.indexOf(I[D]))return!0;return!1}(E,o.BAD_DELIMITERS)||-1<E.indexOf(s)||E.charAt(0)===" "||E.charAt(E.length-1)===" ")?f+E+f:E}}};if(o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r",`
`,'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!K&&!!k.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=ye,o.ParserHandle=ve,o.NetworkStreamer=fe,o.FileStreamer=ie,o.StringStreamer=le,o.ReadableStreamStreamer=ue,k.jQuery){var J=k.jQuery;J.fn.parse=function(e){var t=e.config||{},r=[];return this.each(function(u){if(!(J(this).prop("tagName").toUpperCase()==="INPUT"&&J(this).attr("type").toLowerCase()==="file"&&k.FileReader)||!this.files||this.files.length===0)return!0;for(var f=0;f<this.files.length;f++)r.push({file:this.files[f],inputElem:this,instanceConfig:J.extend({},t)})}),i(),this;function i(){if(r.length!==0){var u,f,v,_,n=r[0];if(h(e.before)){var C=e.before(n.file,n.inputElem);if(typeof C=="object"){if(C.action==="abort")return u="AbortError",f=n.file,v=n.inputElem,_=C.reason,void(h(e.error)&&e.error({name:u},f,v,_));if(C.action==="skip")return void s();typeof C.config=="object"&&(n.instanceConfig=J.extend(n.instanceConfig,C.config))}else if(C==="skip")return void s()}var d=n.instanceConfig.complete;n.instanceConfig.complete=function(B){h(d)&&d(B,n.file,n.inputElem),s()},o.parse(n.file,n.instanceConfig)}else h(e.complete)&&e.complete()}function s(){r.splice(0,1),i()}}}function P(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var r=pe(t);r.chunkSize=parseInt(r.chunkSize),t.step||t.chunk||(r.chunkSize=null),this._handle=new ve(r),(this._handle.streamer=this)._config=r}.call(this,e),this.parseChunk=function(t,r){if(this.isFirstChunk&&h(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(t);i!==void 0&&(t=i)}this.isFirstChunk=!1,this._halted=!1;var s=this._partialLine+t;this._partialLine="";var u=this._handle.parse(s,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var f=u.meta.cursor;this._finished||(this._partialLine=s.substring(f-this._baseIndex),this._baseIndex=f),u&&u.data&&(this._rowCount+=u.data.length);var v=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(T)k.postMessage({results:u,workerId:o.WORKER_ID,finished:v});else if(h(this._config.chunk)&&!r){if(this._config.chunk(u,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);u=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(u.data),this._completeResults.errors=this._completeResults.errors.concat(u.errors),this._completeResults.meta=u.meta),this._completed||!v||!h(this._config.complete)||u&&u.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),v||u&&u.meta.paused||this._nextChunk(),u}this._halted=!0},this._sendError=function(t){h(this._config.error)?this._config.error(t):T&&this._config.error&&k.postMessage({workerId:o.WORKER_ID,error:t,finished:!1})}}function fe(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),P.call(this,e),this._nextChunk=K?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),K||(t.onload=V(this._chunkLoaded,this),t.onerror=V(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!K),this._config.downloadRequestHeaders){var r=this._config.downloadRequestHeaders;for(var i in r)t.setRequestHeader(i,r[i])}if(this._config.chunkSize){var s=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+s)}try{t.send(this._config.downloadRequestBody)}catch(u){this._chunkError(u.message)}K&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(r){var i=r.getResponseHeader("Content-Range");return i===null?-1:parseInt(i.substring(i.lastIndexOf("/")+1))}(t),this.parseChunk(t.responseText)))},this._chunkError=function(r){var i=t.statusText||r;this._sendError(new Error(i))}}function ie(e){var t,r;(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),P.call(this,e);var i=typeof FileReader<"u";this.stream=function(s){this._input=s,r=s.slice||s.webkitSlice||s.mozSlice,i?((t=new FileReader).onload=V(this._chunkLoaded,this),t.onerror=V(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var s=this._input;if(this._config.chunkSize){var u=Math.min(this._start+this._config.chunkSize,this._input.size);s=r.call(s,this._start,u)}var f=t.readAsText(s,this._config.encoding);i||this._chunkLoaded({target:{result:f}})},this._chunkLoaded=function(s){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(s.target.result)},this._chunkError=function(){this._sendError(t.error)}}function le(e){var t;P.call(this,e=e||{}),this.stream=function(r){return t=r,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var r,i=this._config.chunkSize;return i?(r=t.substring(0,i),t=t.substring(i)):(r=t,t=""),this._finished=!t,this.parseChunk(r)}}}function ue(e){P.call(this,e=e||{});var t=[],r=!0,i=!1;this.pause=function(){P.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){P.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(s){this._input=s,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=V(function(s){try{t.push(typeof s=="string"?s:s.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(u){this._streamError(u)}},this),this._streamError=V(function(s){this._streamCleanUp(),this._sendError(s)},this),this._streamEnd=V(function(){this._streamCleanUp(),i=!0,this._streamData("")},this),this._streamCleanUp=V(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function ve(e){var t,r,i,s=Math.pow(2,53),u=-s,f=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,v=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,_=this,n=0,C=0,d=!1,B=!1,L=[],a={data:[],errors:[],meta:{}};if(h(e.step)){var y=e.step;e.step=function(l){if(a=l,A())E();else{if(E(),a.data.length===0)return;n+=l.data.length,e.preview&&n>e.preview?r.abort():(a.data=a.data[0],y(a,_))}}}function S(l){return e.skipEmptyLines==="greedy"?l.join("").trim()==="":l.length===1&&l[0].length===0}function E(){return a&&i&&(D("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),i=!1),e.skipEmptyLines&&(a.data=a.data.filter(function(l){return!S(l)})),A()&&function(){if(!a)return;function l(b,O){h(e.transformHeader)&&(b=e.transformHeader(b,O)),L.push(b)}if(Array.isArray(a.data[0])){for(var c=0;A()&&c<a.data.length;c++)a.data[c].forEach(l);a.data.splice(0,1)}else a.data.forEach(l)}(),function(){if(!a||!e.header&&!e.dynamicTyping&&!e.transform)return a;function l(b,O){var g,F=e.header?{}:[];for(g=0;g<b.length;g++){var x=g,m=b[g];e.header&&(x=g>=L.length?"__parsed_extra":L[g]),e.transform&&(m=e.transform(m,x)),m=I(x,m),x==="__parsed_extra"?(F[x]=F[x]||[],F[x].push(m)):F[x]=m}return e.header&&(g>L.length?D("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+g,C+O):g<L.length&&D("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+g,C+O)),F}var c=1;return!a.data.length||Array.isArray(a.data[0])?(a.data=a.data.map(l),c=a.data.length):a.data=l(a.data,0),e.header&&a.meta&&(a.meta.fields=L),C+=c,a}()}function A(){return e.header&&L.length===0}function I(l,c){return b=l,e.dynamicTypingFunction&&e.dynamicTyping[b]===void 0&&(e.dynamicTyping[b]=e.dynamicTypingFunction(b)),(e.dynamicTyping[b]||e.dynamicTyping)===!0?c==="true"||c==="TRUE"||c!=="false"&&c!=="FALSE"&&(function(O){if(f.test(O)){var g=parseFloat(O);if(u<g&&g<s)return!0}return!1}(c)?parseFloat(c):v.test(c)?new Date(c):c===""?null:c):c;var b}function D(l,c,b,O){var g={type:l,code:c,message:b};O!==void 0&&(g.row=O),a.errors.push(g)}this.parse=function(l,c,b){var O=e.quoteChar||'"';if(e.newline||(e.newline=function(x,m){x=x.substring(0,1048576);var W=new RegExp(ne(m)+"([^]*?)"+ne(m),"gm"),z=(x=x.replace(W,"")).split("\r"),H=x.split(`
`),Q=1<H.length&&H[0].length<z[0].length;if(z.length===1||Q)return`
`;for(var N=0,w=0;w<z.length;w++)z[w][0]===`
`&&N++;return N>=z.length/2?`\r
`:"\r"}(l,O)),i=!1,e.delimiter)h(e.delimiter)&&(e.delimiter=e.delimiter(l),a.meta.delimiter=e.delimiter);else{var g=function(x,m,W,z,H){var Q,N,w,R;H=H||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var se=0;se<H.length;se++){var p=H[se],de=0,$=0,ae=0;w=void 0;for(var Y=new ye({comments:z,delimiter:p,newline:m,preview:10}).parse(x),Z=0;Z<Y.data.length;Z++)if(W&&S(Y.data[Z]))ae++;else{var X=Y.data[Z].length;$+=X,w!==void 0?0<X&&(de+=Math.abs(X-w),w=X):w=X}0<Y.data.length&&($/=Y.data.length-ae),(N===void 0||de<=N)&&(R===void 0||R<$)&&1.99<$&&(N=de,Q=p,R=$)}return{successful:!!(e.delimiter=Q),bestDelimiter:Q}}(l,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);g.successful?e.delimiter=g.bestDelimiter:(i=!0,e.delimiter=o.DefaultDelimiter),a.meta.delimiter=e.delimiter}var F=pe(e);return e.preview&&e.header&&F.preview++,t=l,r=new ye(F),a=r.parse(t,c,b),E(),d?{meta:{paused:!0}}:a||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,r.abort(),t=h(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){_.streamer._halted?(d=!1,_.streamer.parseChunk(t,!0)):setTimeout(_.resume,3)},this.aborted=function(){return B},this.abort=function(){B=!0,r.abort(),a.meta.aborted=!0,h(e.complete)&&e.complete(a),t=""}}function ne(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ye(e){var t,r=(e=e||{}).delimiter,i=e.newline,s=e.comments,u=e.step,f=e.preview,v=e.fastMode,_=t=e.quoteChar===void 0||e.quoteChar===null?'"':e.quoteChar;if(e.escapeChar!==void 0&&(_=e.escapeChar),(typeof r!="string"||-1<o.BAD_DELIMITERS.indexOf(r))&&(r=","),s===r)throw new Error("Comment character same as delimiter");s===!0?s="#":(typeof s!="string"||-1<o.BAD_DELIMITERS.indexOf(s))&&(s=!1),i!==`
`&&i!=="\r"&&i!==`\r
`&&(i=`
`);var n=0,C=!1;this.parse=function(d,B,L){if(typeof d!="string")throw new Error("Input must be a string");var a=d.length,y=r.length,S=i.length,E=s.length,A=h(u),I=[],D=[],l=[],c=n=0;if(!d)return M();if(e.header&&!B){var b=d.split(i)[0].split(r),O=[],g={},F=!1;for(var x in b){var m=b[x];h(e.transformHeader)&&(m=e.transformHeader(m,x));var W=m,z=g[m]||0;for(0<z&&(F=!0,W=m+"_"+z),g[m]=z+1;O.includes(W);)W=W+"_"+z;O.push(W)}if(F){var H=d.split(i);H[0]=O.join(r),d=H.join(i)}}if(v||v!==!1&&d.indexOf(t)===-1){for(var Q=d.split(i),N=0;N<Q.length;N++){if(l=Q[N],n+=l.length,N!==Q.length-1)n+=i.length;else if(L)return M();if(!s||l.substring(0,E)!==s){if(A){if(I=[],ae(l.split(r)),ke(),C)return M()}else ae(l.split(r));if(f&&f<=N)return I=I.slice(0,f),M(!0)}}return M()}for(var w=d.indexOf(r,n),R=d.indexOf(i,n),se=new RegExp(ne(_)+ne(t),"g"),p=d.indexOf(t,n);;)if(d[n]!==t)if(s&&l.length===0&&d.substring(n,n+E)===s){if(R===-1)return M();n=R+S,R=d.indexOf(i,n),w=d.indexOf(r,n)}else if(w!==-1&&(w<R||R===-1))l.push(d.substring(n,w)),n=w+y,w=d.indexOf(r,n);else{if(R===-1)break;if(l.push(d.substring(n,R)),X(R+S),A&&(ke(),C))return M();if(f&&I.length>=f)return M(!0)}else for(p=n,n++;;){if((p=d.indexOf(t,p+1))===-1)return L||D.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:I.length,index:n}),Z();if(p===a-1)return Z(d.substring(n,p).replace(se,t));if(t!==_||d[p+1]!==_){if(t===_||p===0||d[p-1]!==_){w!==-1&&w<p+1&&(w=d.indexOf(r,p+1)),R!==-1&&R<p+1&&(R=d.indexOf(i,p+1));var de=Y(R===-1?w:Math.min(w,R));if(d.substr(p+1+de,y)===r){l.push(d.substring(n,p).replace(se,t)),d[n=p+1+de+y]!==t&&(p=d.indexOf(t,n)),w=d.indexOf(r,n),R=d.indexOf(i,n);break}var $=Y(R);if(d.substring(p+1+$,p+1+$+S)===i){if(l.push(d.substring(n,p).replace(se,t)),X(p+1+$+S),w=d.indexOf(r,n),p=d.indexOf(t,n),A&&(ke(),C))return M();if(f&&I.length>=f)return M(!0);break}D.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:I.length,index:n}),p++}}else p++}return Z();function ae(U){I.push(U),c=n}function Y(U){var Re=0;if(U!==-1){var Ee=d.substring(p+1,U);Ee&&Ee.trim()===""&&(Re=Ee.length)}return Re}function Z(U){return L||(U===void 0&&(U=d.substring(n)),l.push(U),n=a,ae(l),A&&ke()),M()}function X(U){n=U,ae(l),l=[],R=d.indexOf(i,n)}function M(U){return{data:I,errors:D,meta:{delimiter:r,linebreak:i,aborted:C,truncated:!!U,cursor:c+(B||0)}}}function ke(){u(M()),I=[],D=[]}},this.abort=function(){C=!0},this.getCharIndex=function(){return n}}function we(e){var t=e.data,r=re[t.workerId],i=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var s={abort:function(){i=!0,q(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ce,resume:ce};if(h(r.userStep)){for(var u=0;u<t.results.data.length&&(r.userStep({data:t.results.data[u],errors:t.results.errors,meta:t.results.meta},s),!i);u++);delete t.results}else h(r.userChunk)&&(r.userChunk(t.results,s,t.file),delete t.results)}t.finished&&!i&&q(t.workerId,t.results)}function q(e,t){var r=re[e];h(r.userComplete)&&r.userComplete(t),r.terminate(),delete re[e]}function ce(){throw new Error("Not implemented.")}function pe(e){if(typeof e!="object"||e===null)return e;var t=Array.isArray(e)?[]:{};for(var r in e)t[r]=pe(e[r]);return t}function V(e,t){return function(){e.apply(t,arguments)}}function h(e){return typeof e=="function"}return T&&(k.onmessage=function(e){var t=e.data;if(o.WORKER_ID===void 0&&t&&(o.WORKER_ID=t.workerId),typeof t.input=="string")k.postMessage({workerId:o.WORKER_ID,results:o.parse(t.input,t.config),finished:!0});else if(k.File&&t.input instanceof File||t.input instanceof Object){var r=o.parse(t.input,t.config);r&&k.postMessage({workerId:o.WORKER_ID,results:r,finished:!0})}}),(fe.prototype=Object.create(P.prototype)).constructor=fe,(ie.prototype=Object.create(P.prototype)).constructor=ie,(le.prototype=Object.create(le.prototype)).constructor=le,(ue.prototype=Object.create(P.prototype)).constructor=ue,o})})(tt);const rt=Ce,it={class:"dialog-footer"},nt=ze({__name:"import_price",emits:["complete"],setup(_e,{expose:xe,emit:ge}){const k=Ne(),K=oe(!1),T=oe(!0),re=new Date;re.setTime(re.getTime()+3600*1e3*2*360);const me={site_id:0,express_no:"",delivery:"",line_price:[]},o=Oe({...me});o.site_id=oe(k.query.site_id);const J=oe(),P=oe([]);(async()=>{P.value=await(await Ge()).data,console.log(P)})();const ie=oe([]);(async()=>{ie.value=await(await Je()).data,T.value=!1,console.log(P)})();const ue=async(h=null)=>{T.value=!0,Object.assign(o,me),h&&(o.site_id=h.site_id),T.value=!1},ve=Ie(()=>({express_no:[{required:!0,message:ee("expressNoPlaceholder"),trigger:"blur"}],delivery:[{required:!0,message:ee("deliveryPlaceholder"),trigger:"blur"}]})),ne=Ie(()=>T.value?"":"导入价格"),we=Oe({columns:[{field:"id",headerName:"id",resizable:!0,width:100},{field:"senderProvince",headerName:"发件省",resizable:!0,width:100},{field:"receiveProvince",headerName:"收件省",resizable:!0,width:100},{field:"firstWeight",headerName:"首重",resizable:!0,width:100},{field:"continuousWeight",headerName:"续重",resizable:!0,width:100},{field:"remark",headerName:"备注",resizable:!0,width:100}],defaultColumnOption:{width:60,cellEditor:Ze},rows:[],fillable:"xy"}),q=oe(null);Me(()=>q.value,()=>{q.value.gridInstance.on("beforePaste",h=>{const e=h.split(`
`);ce(e.length)})});const ce=h=>{var t;const e=[];if((t=q.value)!=null&&t.gridInstance){for(let r=0;r<h;r++)e.push({id:String(r),senderProvince:"",receiveProvince:"",firstWeight:"",continuousWeight:"",remark:""});console.log()}else console.error("Grid instance not available!");q.value.gridInstance.store("row").dispatch("setRows",e)},pe=async h=>{T.value||!h||await h.validate(async e=>{var t;if(e&&(T.value=!0,(t=q.value)!=null&&t.gridInstance)){const r=q.value.gridInstance.getState().row.rows;if(r.length<=1){qe("请导入数据"),T.value=!1;return}Object.assign(o,{line_price:r}),T.value=!0,Ye(o).then(i=>{T.value=!1,ge("complete"),ce(1),o.express_no=""}).catch(()=>{T.value=!1})}})},V=h=>{var r;const t=(r=h.target.files)==null?void 0:r[0];t&&rt.parse(t,{header:!1,skipEmptyLines:!0,complete:i=>{if(i.errors.length>0){console.error("解析错误:",i.errors);return}const s=i.data;let u=0;const f=[];s.length>0&&(s.map(v=>{const _={id:String(u++),senderProvince:v[0],receiveProvince:v[1],firstWeight:v[2],continuousWeight:v[3]};f.push(_)}),q.value.gridInstance.store("row").dispatch("setRows",f))},error:i=>{console.error("文件解析失败:",i)}})};return window.onload=function(){const h=document.getElementsByTagName("input");for(let e=0;e<h.length;e++)h[e].setAttribute("autocomplete","off")},xe({showDialog:K,setFormData:ue,loading:T}),(h,e)=>{const t=Be,r=We,i=je,s=Ke,u=Ve,f=He,v=Qe,_=$e;return he(),be(v,{modelValue:K.value,"onUpdate:modelValue":e[4]||(e[4]=n=>K.value=n),title:te(ne),width:"900px","destroy-on-close":!0},{footer:j(()=>[De("span",it,[G(f,{onClick:e[2]||(e[2]=n=>K.value=!1)},{default:j(()=>[Te(Ae(te(ee)("cancel")),1)]),_:1}),G(f,{type:"primary",loading:T.value,onClick:e[3]||(e[3]=n=>pe(J.value))},{default:j(()=>[Te(Ae(te(ee)("confirm")),1)]),_:1},8,["loading"])])]),default:j(()=>[Ue((he(),be(u,{model:o,"label-width":"100px",ref_key:"formRef",ref:J,rules:te(ve),class:"page-form",autocomplete:"off"},{default:j(()=>[G(i,{label:te(ee)("expressNoPlaceholder"),prop:"express_no"},{default:j(()=>[G(r,{modelValue:o.express_no,"onUpdate:modelValue":e[0]||(e[0]=n=>o.express_no=n),placeholder:te(ee)("expressNoPlaceholder"),class:"input-width",filterable:""},{default:j(()=>[(he(!0),Le(Se,null,Fe(P.value,n=>(he(),be(t,{key:n.express_no,label:n.company_name,value:n.express_no},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),G(i,{label:te(ee)("deliveryPlaceholder"),prop:"express_no"},{default:j(()=>[G(r,{modelValue:o.delivery,"onUpdate:modelValue":e[1]||(e[1]=n=>o.delivery=n),placeholder:te(ee)("expressNoPlaceholder"),class:"input-width",filterable:""},{default:j(()=>[(he(!0),Le(Se,null,Fe(ie.value,n=>(he(),be(t,{key:n.code,label:n.name,value:n.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),G(i,{label:"上传价格",prop:"deliveryPlaceholder"},{default:j(()=>[De("input",{type:"file",onChange:V,accept:".csv"},null,32),G(s,{height:"400px"},{default:j(()=>[G(Xe,{class:"visual-grid-container",ref_key:"visualGrid",ref:q,options:we},null,8,["options"])]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[_,T.value]])]),_:1},8,["modelValue","title"])}}});const yt=et(nt,[["__scopeId","data-v-34d31f01"]]);export{yt as default};
