var h=Object.defineProperty;var f=(t,e,s)=>e in t?h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var r=(t,e,s)=>(f(t,typeof e!="symbol"?e+"":e,s),s);import{b2 as p,G as o,b9 as c,U as u,q as a,bt as g,j as l,O as n}from"./index-6405d5ac.js";class b{constructor(){r(this,"instance");r(this,"messageCache",new Map);this.instance=p.create({baseURL:"/adminapi/".substr(-1)=="/"?"/adminapi/":"/adminapi//",timeout:0,headers:{"Content-Type":"application/json",lang:o.get("lang")??"zh-cn"}}),this.instance.interceptors.request.use(e=>(c()&&(e.headers.token=c()),e.headers["site-id"]=o.get("siteId")||0,e),e=>Promise.reject(e)),this.instance.interceptors.response.use(e=>{if(e.request.responseType!="blob"){const s=e.data;return s.ResultCode!=100?(this.handleAuthError(s.Reason),s.ResultCode!=401&&e.config.showErrorMessage!==!1&&this.showElMessage({message:s.Reason||s.msg,type:"error",dangerouslyUseHTMLString:!0,duration:5e3}),Promise.reject(new Error(s.Reason||"Error"))):(e.config.showSuccessMessage&&u({message:s.Reason,type:"success"}),s)}return e.data},e=>(this.handleNetworkError(e),Promise.reject(e)))}get(e,s){return this.instance.get(e,s)}post(e,s,i){return this.instance.post(e,s,i)}put(e,s,i){return this.instance.put(e,s,i)}delete(e,s){return this.instance.delete(e,s)}handleNetworkError(e){let s="";if(e.response&&e.response.status)switch(e.response.status){case 400:s=a("axios.400");break;case 401:s=a("axios.401");break;case 403:s=a("axios.403");break;case 404:s=(g(e.response.config.baseURL)?e.response.config.baseURL:`${location.origin}${e.response.config.baseURL}`)+a("axios.baseUrlError");break;case 405:s=a("axios.405");break;case 408:s=a("axios.408");break;case 409:s=a("axios.409");break;case 500:s=a("axios.500");break;case 501:s=a("axios.501");break;case 502:s=a("axios.502");break;case 503:s=a("axios.503");break;case 504:s=a("axios.504");break;case 505:s=a("axios.505");break}e.message.includes("timeout")&&(s=a("axios.timeout")),e.code=="ERR_NETWORK"&&(s=(g(e.config.baseURL)?e.config.baseURL:`${location.origin}${e.config.baseURL}`)+a("axios.baseUrlError")),s&&this.showElMessage({dangerouslyUseHTMLString:!0,duration:5e3,message:s,type:"error"})}handleAuthError(e){switch(e){case 401:l().logout();break}}showElMessage(e){const s=e.Reason;console.log(e);const i=this.messageCache.get(s);(!i||Date.now()-i.timestamp>5e3)&&(this.messageCache.set(s,{timestamp:Date.now()}),u(e))}}const d=new b;function k(){return n.get("fengchao/site/api/list")}function w(){return n.get("fengchao/site/api/createNewApi")}function U(t){return n.post("fengchao/site/api/add",t,{showErrorMessage:!0,showSuccessMessage:!0})}function E(t){return n.delete(`fengchao/site/api/${t}`,{showErrorMessage:!0,showSuccessMessage:!0})}function L(t){return n.get("fengchao/site/siteBalance",{params:t})}function M(){return n.get("fengchao/site/siteBalanceSum")}function S(t){return n.get(`fengchao/site/api/getApi/${t}`)}function A(){return n.get("fengchao/site/api/domain")}function y(){return n.get("fengchao/site/api/notifyUrl")}function $(){return n.get("sandbox/fake/list")}function B(t,e){return n.get(`sandbox/fake/${t}/${e}`)}function C(t,e){return d.post(t,e)}function N(){return n.get("sandbox/cb/list")}function j(t,e){return n.get(`sandbox/cb/${t}/${e}`)}export{U as a,S as b,j as c,N as d,y as e,k as f,w as g,E as h,B as i,$ as j,A as k,L as l,M as m,C as s};
