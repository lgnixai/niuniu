import{d as E,x as R,f as F,n as x,r as u,Q as M,h as S,c as O,e as a,w as l,a as h,t as g,u as d,q as s,i as C,v as T,K as $,L as B,bG as L,E as Y,M as G,a7 as H,V as U}from"./index-6405d5ac.js";/* empty css                     *//* empty css                *//* empty css                     *//* empty css                  *//* empty css                       *//* empty css                 *//* empty css                  */import{_ as j,g as q}from"./detail.vue_vue_type_script_setup_true_lang-4be79815.js";import{_ as K}from"./VisualGrid.vue_vue_type_script_setup_true_lang-873a4661.js";/* empty css              *//* empty css                   *//* empty css                  *//* empty css                   *//* empty css               *//* empty css                             */const Q={class:"flex justify-between items-center"},W={class:"detail-head !m-0"},A={class:"right"},J={class:"attachment-list-wrap flex flex-col p-[15px] flex-1 overflow-hidden"},pe=E({__name:"index444",setup(X){const y=R();F();const N=y.meta.title,_=[],r=x({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{order_id:"",create_time:""}}),b=u();function I(e){return new Promise(t=>setTimeout(t,e))}const f=async(e=1)=>{r.loading=!0,r.page=e,q({page:r.page,limit:r.limit,...r.searchParam}).then(t=>{r.loading=!1,r.data=t.data.data,r.total=t.data.total;const n=t.data.data;let i=0;n.length>0&&(n.map(o=>{const p={id:String(i++),order_id:o.deliveryInfo.order_id,client_order_code:o.deliveryInfo.client_order_code,logistic_order_code:o.deliveryInfo.logistic_order_code,send_province_name:o.deliveryInfo.order_info.Sender.ProvinceName,send_name:o.deliveryInfo.order_info.Sender.Name,receive_province_name:o.deliveryInfo.order_info.Receiver.ProvinceName,receive_name:o.deliveryInfo.order_info.Receiver.Name,shipper_code:o.deliveryInfo.order_info.ShipperCode};_.push(p)}),m.value.gridInstance.store("row").dispatch("setRows",_))}).catch(async()=>{await I(3e3),r.loading=!1})};f();const P=e=>{e&&(e.resetFields(),f())};u(null),u(!1);const k=x({columns:[{field:"id",headerName:"id",resizable:!0,width:10},{field:"client_order_code",headerName:"商户订单",resizable:!0,width:200},{field:"order_id",headerName:"平台订单号",resizable:!0,width:200},{field:"logistic_order_code",headerName:"运单号",resizable:!0,width:200},{field:"send_name",headerName:"发件人",resizable:!0,width:100},{field:"send_province_name",headerName:"发件省",resizable:!0,width:100},{field:"receive_name",headerName:"收件人",resizable:!0,width:100},{field:"receive_province_name",headerName:"收件省",resizable:!0,width:100},{field:"shipper_code",headerName:"物流渠道",resizable:!0,width:100}],defaultColumnOption:{width:60},rows:_,scrollThrottleRate:10,fillable:"xy",getColumnMenuItems:e=>{const t=e.grid.getColumnOptions(e.column),n=o=>{e.grid.setColumnPinned(e.column,o)},i=o=>{if(o===t.pinned)return"vg-checkmark"};return[{name:"Pin Current Column",icon:"vg-pin",disabled:t.readonly,subMenus:[{name:"Pin Left",action:()=>n("left"),icon:i("left")},{name:"Pin Right",action:()=>n("right"),icon:i("right")},{name:"No Pin",action:()=>n(),icon:i()}]},{name:"Flex",icon:t.flex?"vg-checkmark":"",action:()=>{e.grid.setColumnWidth(e.column,{flex:Number(!t.flex)})}},{name:"Visible",icon:t.visible?"vg-checkmark":"",action:()=>{e.grid.setColumnVisible(e.column,!1)}}]},getContextMenuItems:e=>(e.grid.getColumnOptions(e.column),[{name:"Enlarge",icon:"vg-enlarge-simplicit"},{separator:!0},{name:"Download",icon:"vg-download",disabled:!0}])}),m=u(null);M(m,()=>{var e;(e=m.value)!=null&&e.gridInstance&&m.value.gridInstance.on("afterCellDbClicked",t=>{const n=_[parseInt(t.row)];D(n)})});const v=u(null),D=e=>{v.value.setFormData(e),v.value.showDialog=!0};return(e,t)=>{const n=$,i=B,o=L,p=Y,V=G,w=H,z=U;return S(),O("div",{class:T(["flex border-t border-b main-wrap border-color w-full","h-full"])},[a(w,{class:"box-card !border-none",shadow:"never"},{default:l(()=>[h("div",Q,[h("div",W,[h("span",A,g(d(N)),1)])]),a(w,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:l(()=>[a(V,{inline:!0,model:r.searchParam,ref_key:"searchFormRef",ref:b},{default:l(()=>[a(i,{label:d(s)("orderCode"),prop:"order_code"},{default:l(()=>[a(n,{modelValue:r.searchParam.order_id,"onUpdate:modelValue":t[0]||(t[0]=c=>r.searchParam.order_id=c),modelModifiers:{trim:!0},placeholder:d(s)("orderCodePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(i,{label:d(s)("createTime"),prop:"create_time"},{default:l(()=>[a(o,{modelValue:r.searchParam.create_time,"onUpdate:modelValue":t[1]||(t[1]=c=>r.searchParam.create_time=c),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","start-placeholder":d(s)("startDate"),"end-placeholder":d(s)("endDate")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"]),a(i,null,{default:l(()=>[a(p,{type:"primary",onClick:t[2]||(t[2]=c=>f())},{default:l(()=>[C(g(d(s)("search")),1)]),_:1}),a(p,{onClick:t[3]||(t[3]=c=>P(b.value))},{default:l(()=>[C(g(d(s)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),h("div",J,[a(z,{height:"500px"},{default:l(()=>[a(K,{ref_key:"visualGrid",ref:m,options:k},null,8,["options"])]),_:1})]),a(j,{ref_key:"orderDetailDialog",ref:v,onComplete:t[4]||(t[4]=c=>f())},null,512)]),_:1})])}}});export{pe as default};
