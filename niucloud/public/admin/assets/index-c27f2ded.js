import{d as D,x as T,n as z,r as g,h as f,c as N,e as n,w as s,a as p,t as d,u as i,i as _,q as a,R as A,s as P,a5 as $,cF as j,E as L,ad as S,ae as U,W as V,a7 as F,Y as R}from"./index-a7efb343.js";/* empty css                   *//* empty css                *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                  */import{b as q,d as M}from"./api-e0d8eaf6.js";import{_ as W}from"./api_edit.vue_vue_type_style_index_0_lang-7251606e.js";/* empty css                  *//* empty css                   *//* empty css                */import"./el-form-item-4ed993c7.js";const Y={class:"main-container"},G={class:"flex justify-between items-center"},H={class:"text-page-title"},I={class:"mt-[10px]"},J={class:"mt-[16px] flex justify-end"},be=D({__name:"index",setup(K){const h=T().meta.title,e=z({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{api_name:"",order:"",sort:""}});g();const b=o=>{let t="";o.order=="ascending"?t="asc":o.order=="descending"&&(t="desc"),t&&(e.searchParam.order=o.prop,e.searchParam.sort=t),r()},r=(o=1)=>{e.loading=!0,e.page=o,q().then(t=>{e.loading=!1,e.data=t.data}).catch(()=>{e.loading=!1})};r();const m=g(null),x=()=>{m.value.setFormData(),m.value.showDialog=!0},v=o=>{$.confirm(a("apiDeleteTips"),a("warning"),{confirmButtonText:a("confirm"),cancelButtonText:a("cancel"),type:"warning"}).then(()=>{M(o).then(()=>{r()}).catch(()=>{})})},y=o=>{j.push("/fengchao/api/sandbox?id="+o)};return(o,t)=>{const u=L,c=S,k=U,C=V,w=F,E=R;return f(),N("div",Y,[n(w,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[p("div",G,[p("span",H,d(i(h)),1),n(u,{type:"primary",onClick:x},{default:s(()=>[_(d(i(a)("addApi")),1)]),_:1})]),p("div",I,[A((f(),P(k,{data:e.data,size:"large",onSortChange:b},{empty:s(()=>[p("span",null,d(e.loading?"":i(a)("emptyData")),1)]),default:s(()=>[n(c,{prop:"api_name",label:i(a)("apiName"),"min-width":"120"},null,8,["label"]),n(c,{prop:"api_key",label:i(a)("api_key"),"min-width":"120"},null,8,["label"]),n(c,{prop:"callback_url",label:i(a)("callbackUrl"),"min-width":"120"},null,8,["label"]),n(c,{label:i(a)("operation"),fixed:"right",align:"right","min-width":"120"},{default:s(({row:l})=>[n(u,{type:"primary",link:"",onClick:B=>y(l.id)},{default:s(()=>[_(d(i(a)("sandbox")),1)]),_:2},1032,["onClick"]),n(u,{type:"primary",link:"",onClick:B=>v(l.id)},{default:s(()=>[_(d(i(a)("delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[E,e.loading]]),p("div",J,[n(C,{"current-page":e.page,"onUpdate:current-page":t[0]||(t[0]=l=>e.page=l),"page-size":e.limit,"onUpdate:page-size":t[1]||(t[1]=l=>e.limit=l),layout:"total, sizes, prev, pager, next, jumper",total:e.total,onSizeChange:t[2]||(t[2]=l=>r()),onCurrentChange:r},null,8,["current-page","page-size","total"])])]),n(W,{ref_key:"editapiDialog",ref:m,onComplete:r},null,512)]),_:1})])}}});export{be as default};
