import{d as X,l as Z,r as g,a2 as U,h as d,c as m,a as r,b as Q,e as l,w as o,Z as W,u as s,s as M,q as n,i as Y,t as L,F as k,T as O,v as T,B,a3 as A,U as V,a1 as ee,K as le,V as ae,L as te,M as oe,E as ne,X as se}from"./index-a7efb343.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                     *//* empty css                 */import{g as ue}from"./diy-f8b2d6e1.js";const ie=["onClick"],re={class:"flex items-start"},de=["onClick"],pe={class:"mb-[16px]"},ce={class:"mb-[16px]"},ve=r("div",{class:"text-sm text-gray-400 select-text"},"路径必须以“/”开头，例：/app/pages/index/index",-1),me=r("div",{class:"text-sm text-gray-400 select-text"},"跳转外部链接“http”或“https”开头，例：https://baidu.com",-1),_e={class:"mb-[16px]"},fe={class:"mb-[16px]"},he=r("div",{class:"text-sm text-gray-400 select-text"},"仅支持小程序之间的跳转，不支持从其他渠道跳转小程序",-1),xe=r("div",{class:"text-sm text-gray-400 select-text"},"小程序路径格式如：app/pages/index/index",-1),ge={class:"mb-[16px]"},ye=r("div",{class:"text-sm text-gray-400 select-text"},"电话号码支持手机号码和固定电话",-1),be={key:3,class:"flex flex-wrap"},ke=["onClick"],Ve={class:"dialog-footer"},Ue=X({__name:"index",props:{modelValue:{type:Object,default:()=>{}},ignore:{type:Array,default:[]}},emits:["update:modelValue","confirm","success"],setup(F,{expose:K,emit:y}){const b=F,c=Z({get(){return b.modelValue},set(i){y("update:modelValue",i)}}),_=g(!1),f=g(!1),v=g([]),a=g(""),P=g([]),e=g([]),j=()=>{H(()=>{if(c.value.name!=""){e.value=A(c.value),a.value=e.value.parent;for(let i in v.value)v.value[i].name==a.value&&I(v.value[i])}_.value=!0,f.value=!0,y("confirm",f.value)})},H=(i=null)=>{ue({}).then(u=>{if(v.value=u.data,b.ignore&&b.ignore.length){for(let E in v.value)for(let h=0;h<b.ignore.length;h++)if(E==b.ignore[h]){delete v.value[E];break}}P.value=Object.values(v.value)[0].child_list,c.value.name!=""?e.value=A(c.value):e.value={parent:Object.values(v.value)[0].name},a.value=e.value.parent,i&&i()})},I=i=>{P.value=i.child_list,a.value=i.name},R=i=>{delete i.is_share,Object.assign(e.value,i)},G=()=>{c.value={name:"",parent:"",title:"",url:""}},S=()=>{if(a.value==="DIY_LINK"){if(!e.value.title){V({message:n("diyLinkNameNotEmpty"),type:"warning"});return}if(!e.value.url){V({message:n("diyLinkUrlNotEmpty"),type:"warning"});return}e.value.parent=a.value,e.value.name=a.value,e.value.action="",delete e.value.appid,delete e.value.mobile}else if(a.value=="DIY_PAGE")e.value.name=a.value,e.value.parent=a.value,e.value.action="decorate",delete e.value.appid,delete e.value.mobile;else if(a.value=="DIY_JUMP_OTHER_APPLET"){if(!e.value.appid){V({message:n("diyAppletIdNotEmpty"),type:"warning"});return}if(!e.value.page){V({message:n("diyAppletPageNotEmpty"),type:"warning"});return}e.value.name=a.value,e.value.parent=a.value,e.value.title="微信小程序-"+e.value.appid,e.value.action="",delete e.value.url,delete e.value.mobile}else if(a.value=="DIY_MAKE_PHONE_CALL"){if(!e.value.mobile){V({message:n("diyMakePhoneNotEmpty"),type:"warning"});return}e.value.name=a.value,e.value.parent=a.value,e.value.title="拨打电话："+e.value.mobile,e.value.action="",delete e.value.url,delete e.value.appid}c.value=A(e.value),_.value=!1,f.value=!1,y("confirm",f.value),y("success")},N=()=>{_.value=!1,f.value=!1,y("confirm",f.value)};return K({showDialog:_}),(i,u)=>{const E=U("Close"),h=ee,$=U("ArrowRight"),x=le,w=ae,p=te,J=oe,D=ne,q=se;return d(),m("div",null,[r("div",{onClick:j},[Q(i.$slots,"default",{},()=>[l(x,{modelValue:s(c).title,"onUpdate:modelValue":u[0]||(u[0]=t=>s(c).title=t),placeholder:s(n)("linkPlaceholder"),readonly:"",class:"link-input"},{suffix:o(()=>[r("div",{onClick:W(G,["stop"])},[s(c).name?(d(),M(h,{key:0},{default:o(()=>[l(E)]),_:1})):(d(),M(h,{key:1},{default:o(()=>[l($)]),_:1}))],8,ie)]),_:1},8,["modelValue","placeholder"])])]),l(q,{modelValue:_.value,"onUpdate:modelValue":u[6]||(u[6]=t=>_.value=t),title:s(n)("selectLinkTips"),width:"40%","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1,onClose:N},{footer:o(()=>[r("span",Ve,[l(D,{onClick:N},{default:o(()=>[Y(L(s(n)("cancel")),1)]),_:1}),l(D,{type:"primary",onClick:S},{default:o(()=>[Y(L(s(n)("confirm")),1)]),_:1})])]),default:o(()=>[r("div",re,[l(w,{class:"w-[140px] border-r h-[350px]"},{default:o(()=>[(d(!0),m(k,null,O(v.value,(t,C)=>(d(),m("div",{key:C,class:T(["h-[40px] leading-[40px] cursor-pointer hover:bg-primary-light-9 px-[10px] hover:text-primary",[t.name==a.value?"bg-primary-light-9 text-primary":""]]),onClick:z=>I(t)},L(t.title),11,de))),128))]),_:1}),l(w,{class:"pl-4 h-[350px] flex-1"},{default:o(()=>[l(J,{"label-width":"100px",class:"px-[10px]"},{default:o(()=>[a.value=="DIY_LINK"?(d(),m(k,{key:0},[r("div",pe,[l(p,{label:s(n)("diyLinkName")},{default:o(()=>[l(x,{modelValue:e.value.title,"onUpdate:modelValue":u[1]||(u[1]=t=>e.value.title=t),placeholder:s(n)("diyLinkNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),r("div",ce,[l(p,{label:s(n)("diyLinkUrl")},{default:o(()=>[l(x,{modelValue:e.value.url,"onUpdate:modelValue":u[2]||(u[2]=t=>e.value.url=t),placeholder:s(n)("diyLinkUrlPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),l(p,{label:" "},{default:o(()=>[ve]),_:1}),l(p,{label:" "},{default:o(()=>[me]),_:1})],64)):B("",!0),a.value=="DIY_JUMP_OTHER_APPLET"?(d(),m(k,{key:1},[r("div",_e,[l(p,{label:s(n)("diyAppletId")},{default:o(()=>[l(x,{modelValue:e.value.appid,"onUpdate:modelValue":u[3]||(u[3]=t=>e.value.appid=t),placeholder:s(n)("diyAppletIdPlaceholder"),clearable:"",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),r("div",fe,[l(p,{label:s(n)("diyAppletPage")},{default:o(()=>[l(x,{modelValue:e.value.page,"onUpdate:modelValue":u[4]||(u[4]=t=>e.value.page=t),placeholder:s(n)("diyAppletPagePlaceholder"),clearable:"",maxlength:"100"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),l(p,{label:" "},{default:o(()=>[he]),_:1}),l(p,{label:" "},{default:o(()=>[xe]),_:1})],64)):B("",!0),a.value=="DIY_MAKE_PHONE_CALL"?(d(),m(k,{key:2},[r("div",ge,[l(p,{label:s(n)("diyMakePhone")},{default:o(()=>[l(x,{modelValue:e.value.mobile,"onUpdate:modelValue":u[5]||(u[5]=t=>e.value.mobile=t),placeholder:s(n)("diyMakePhonePlaceholder"),clearable:"",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),l(p,{label:" "},{default:o(()=>[ye]),_:1})],64)):(d(),m("div",be,[(d(!0),m(k,null,O(P.value,(t,C)=>(d(),m("div",{key:C,class:T(["border border-br rounded-[3px] mr-[10px] mb-[10px] px-4 h-[32px] leading-[32px] cursor-pointer hover:bg-primary-light-9 px-[10px] hover:text-primary",{"border-primary text-primary":a.value!="DIY_PAGE"&&t.name==e.value.name||a.value=="DIY_PAGE"&&t.url==e.value.url}]),onClick:z=>R(t)},L(t.title),11,ke))),128))]))]),_:1})]),_:1})])]),_:1},8,["modelValue","title"])])}}});export{Ue as _};
