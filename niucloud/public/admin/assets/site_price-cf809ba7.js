import{d as T,x as q,f as A,r as p,n as r,Q as I,h as v,c as x,a as l,e as o,w as d,v as C,t as k,u as $,q as G,F as M,T as Q,i as N,R as W,aq as Y,V as j,E as H,aN as J,aO as K,Y as U}from"./index-6405d5ac.js";/* empty css                   *//* empty css               *//* empty css                  *//* empty css                     */import{d as X,a as Z}from"./site-a163b904.js";import{_ as ee}from"./VisualGrid.vue_vue_type_script_setup_true_lang-873a4661.js";import te from"./price_view-4b26bbf3.js";import ie from"./import_price-ac793b4f.js";import{_ as ne}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                     *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                  */const oe={class:"group-wrap w-[180px] p-[15px] h-full border-r border-color flex flex-col"},se={class:"group-list flex-1 my-[10px] h-0"},ae=["onClick"],re={class:"attachment-list-wrap flex flex-col p-[15px] flex-1 overflow-hidden"},le={class:"flex"},ce={class:""},de={class:"mt-[10px]"},_e=T({__name:"site_price",props:{limit:{type:Number,default:1},type:{type:String,default:"image"},scene:{type:String,default:"select"}},setup(P,{expose:V}){const m=P,z=q();A();const c=[];p(""),p(!1);const L=r({}),E=r([]),D=r({data:[]}),f=r({loading:!0,page:1,total:0,limit:m.scene=="select"?10:20,data:[]});m.scene=="select"?(f.limit=10,m.type=="icon"&&(f.limit=20)):(f.limit=20,m.type=="icon"&&(f.limit=30)),r({name:""});const _=r({real_name:"",express_no:""}),n=r({site_id:p(z.query.site_id),page:1,limit:10,total:0,loading:!0,data:[],searchParam:{order_id:"",create_time:""}}),b=async(e=1)=>{n.loading=!0,n.page=e,X({site_id:n.site_id,express_no:_.express_no}).then(t=>{n.loading=!1,n.data=t.data,n.total=t.data.length;const s=t.data;let a=0;c.length=0,s.length>0?s.map(i=>{const h={id:String(a++),site_id:i.site_id,express_no:i.express_no,sender_province:i.sender_province,receive_province:i.receive_province,first_weight:i.first_weight,continuous_weight:i.continuous_weight,delivery:i.delivery};c.push(h)}):c.length=0,u.value.gridInstance.store("row").dispatch("setRows",c)}).catch(async()=>{n.loading=!1})};b();const F=r({columns:[{field:"id",headerName:"id",resizable:!0,width:10},{field:"site_id",headerName:"网站ID",resizable:!0,width:50},{field:"express_no",headerName:"物流公司",resizable:!0,width:100},{field:"sender_province",headerName:"发件省",resizable:!0,width:100},{field:"receive_province",headerName:"收件省",resizable:!0,width:100},{field:"first_weight",headerName:"首重",resizable:!0,width:100},{field:"continuous_weight",headerName:"续重",resizable:!0,width:100},{field:"delivery",headerName:"平台",resizable:!0,width:100}],defaultColumnOption:{width:60},rows:c,scrollThrottleRate:10,fillable:"xy",getColumnMenuItems:e=>{const t=e.grid.getColumnOptions(e.column),s=i=>{e.grid.setColumnPinned(e.column,i)},a=i=>{if(i===t.pinned)return"vg-checkmark"};return[{name:"Pin Current Column",icon:"vg-pin",disabled:t.readonly,subMenus:[{name:"Pin Left",action:()=>s("left"),icon:a("left")},{name:"Pin Right",action:()=>s("right"),icon:a("right")},{name:"No Pin",action:()=>s(),icon:a()}]},{name:"Flex",icon:t.flex?"vg-checkmark":"",action:()=>{e.grid.setColumnWidth(e.column,{flex:Number(!t.flex)})}},{name:"Visible",icon:t.visible?"vg-checkmark":"",action:()=>{e.grid.setColumnVisible(e.column,!1)}}]}}),u=p(null);I(u,()=>{var e;(e=u.value)!=null&&e.gridInstance&&u.value.gridInstance.on("afterCellDbClicked",t=>{c[parseInt(t.row)]})}),Y(()=>{Z().then(e=>{D.data=e.data}).catch(()=>{})})(),I(()=>_.express_no,()=>{b()});const y=p(null),R=e=>{y.value.setFormData({data:c}),y.value.showDialog=!0},w=p(null),B=e=>{w.value.setFormData({site_id:n.site_id}),w.value.showDialog=!0};return V({selectedFile:L,selectedFileIndex:E}),(e,t)=>{const s=j,a=H,i=J,h=K,S=U;return v(),x("div",{class:C(["flex border-t border-b main-wrap border-color w-full",P.scene=="select"?"h-[40vh]":"h-full"])},[l("div",oe,[l("div",se,[o(s,null,{default:d(()=>[l("div",{class:C(["group-item p-[10px] leading-none text-xs rounded cursor-pointer",{active:_.express_no==0}]),onClick:t[0]||(t[0]=g=>_.express_no=0)},k($(G)("selectPlaceholder")),3),(v(!0),x(M,null,Q(D.data,(g,O)=>(v(),x("div",{class:C(["group-item px-[10px] text-xs rounded cursor-pointer flex",{active:_.express_no==g.express_no}]),key:O},[l("div",{class:"flex-1 leading-none truncate py-[10px]",onClick:ue=>_.express_no=g.express_no},k(g.company_name),9,ae)],2))),128))]),_:1})])]),l("div",re,[o(h,{gutter:15,class:"h-[32px]"},{default:d(()=>[o(i,{span:10},{default:d(()=>[l("div",le,[o(a,{type:"primary",onClick:B},{default:d(()=>[N("导入价格")]),_:1}),l("div",null,[o(a,{class:"ml-[10px]",type:"primary",onClick:R},{default:d(()=>[N("价格全览")]),_:1})])])]),_:1})]),_:1}),W((v(),x("div",ce,[l("div",de,[o(s,{height:"500px"},{default:d(()=>[o(ee,{ref_key:"visualGrid",ref:u,options:F},null,8,["options"])]),_:1})]),o(h,{gutter:20},{default:d(()=>[N(" 计录条数"+k(n.total),1)]),_:1})])),[[S,n.loading]]),o(te,{ref_key:"priceViewDialog",ref:y,onComplete:b},null,512),o(ie,{ref_key:"importPriceDialog",ref:w},null,512)])],2)}}});const Le=ne(_e,[["__scopeId","data-v-0ab4c9be"]]);export{Le as default};
