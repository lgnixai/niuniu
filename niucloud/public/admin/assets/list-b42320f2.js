import{d as A,x as G,r as _,n as M,f as q,h as m,c as x,e as l,w as s,a as r,t as p,u as o,q as i,F as K,T as O,s as g,i as u,R as W,A as Y,K as H,L as J,ac as Q,aD as X,E as Z,M as ee,a7 as te,ad as ae,al as le,ae as se,W as oe,Y as ie}from"./index-a7efb343.js";/* empty css                   *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                        *//* empty css                *//* empty css                *//* empty css                  */import"./el-form-item-4ed993c7.js";import{_ as ne}from"./site_logo-5ed68b79.js";import{m as re,w as pe,x as me}from"./site-1bc18801.js";import{_ as de}from"./edit-site.vue_vue_type_script_setup_true_lang-7d9b94e5.js";import{g as ue}from"./addon-fa17bee0.js";import{_ as ce}from"./site-balance-edit.vue_vue_type_script_setup_true_lang-94723769.js";/* empty css                  *//* empty css                   *//* empty css                       *//* empty css                  */import"./member_head-d9fd7b2c.js";import"./user-5a298127.js";/* empty css                        *//* empty css                       *//* empty css                 */import"./site-c1a1e919.js";const _e={class:"main-container"},fe={class:"flex justify-between items-center"},ge={class:"text-page-title"},he={class:"mt-[20px]"},be={class:"flex items-center"},ve=["src"],xe={key:1,class:"w-[50px] h-[50px] mr-[10px]",src:ne,alt:""},ye={class:"flex flex flex-col"},ke={class:"flex items-center"},we={class:"flex flex flex-col"},Pe={class:"mt-[16px] flex justify-end"},it=A({__name:"list",setup(Ce){const P=G(),V=P.meta.title,f=_({all:[]}),C=_([]),t=M({page:1,limit:10,total:0,loading:!0,data:[],searchParam:{keywords:"",group_id:"",app:"all",status:"",site_domain:"",create_time:[],expire_time:[]}});t.searchParam.status=P.query.id||"",(async()=>{const n=await(await re({})).data;f.value.all=n,n.forEach((a,k)=>{f.value[a.app]||(f.value[a.app]=[]),f.value[a.app].push(a)})})(),(async()=>{C.value=await(await pe()).data})();const D=_(),S=n=>{n&&(n.resetFields(),d())},F=_([]);ue().then(({data:n})=>{F.value=n}).catch();const d=(n=1)=>{t.loading=!0,t.page=n,t.searchParam.app=t.searchParam.app=="all"?"":t.searchParam.app,me({page:t.page,limit:t.limit,...t.searchParam}).then(a=>{t.loading=!1,t.data=a.data.data,t.total=a.data.total}).catch(()=>{t.loading=!1})};d();const $=q(),I=_(null),y=_(null),j=n=>{$.push("/fengchao/site/price/template_edit?site_id="+n.site_id)},z=n=>{console.log(n),y.value.setFormData(n),y.value.showDialog=!0};return(n,a)=>{const k=H,h=J,E=Q,B=X,b=Z,T=ee,L=te,c=ae,w=le,N=se,R=oe,U=ie;return m(),x("div",_e,[l(L,{class:"box-card !border-none",shadow:"never"},{default:s(()=>[r("div",fe,[r("span",ge,p(o(V)),1)]),l(L,{class:"box-card !border-none my-[10px] table-search-wrap",shadow:"never"},{default:s(()=>[l(T,{inline:!0,model:t.searchParam,ref_key:"searchFormRef",ref:D},{default:s(()=>[l(h,{label:o(i)("siteInfo"),prop:"keywords"},{default:s(()=>[l(k,{modelValue:t.searchParam.keywords,"onUpdate:modelValue":a[0]||(a[0]=e=>t.searchParam.keywords=e),modelModifiers:{trim:!0},placeholder:o(i)("siteNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(h,{label:o(i)("siteDomain"),prop:"site_domain"},{default:s(()=>[l(k,{modelValue:t.searchParam.site_domain,"onUpdate:modelValue":a[1]||(a[1]=e=>t.searchParam.site_domain=e),modelModifiers:{trim:!0},placeholder:o(i)("siteDomainPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(h,{label:o(i)("status"),prop:"status"},{default:s(()=>[l(B,{modelValue:t.searchParam.status,"onUpdate:modelValue":a[2]||(a[2]=e=>t.searchParam.status=e),clearable:"",placeholder:o(i)("groupIdPlaceholder"),class:"input-width"},{default:s(()=>[l(E,{label:o(i)("selectPlaceholder"),value:""},null,8,["label"]),(m(!0),x(K,null,O(C.value,(e,v)=>(m(),g(E,{label:e,value:v,key:v},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(h,null,{default:s(()=>[l(b,{type:"primary",onClick:a[3]||(a[3]=e=>d())},{default:s(()=>[u(p(o(i)("search")),1)]),_:1}),l(b,{onClick:a[4]||(a[4]=e=>S(D.value))},{default:s(()=>[u(p(o(i)("reset")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),r("div",he,[W((m(),g(N,{data:t.data,size:"large"},{empty:s(()=>[r("span",null,p(t.loading?"":o(i)("emptyData")),1)]),default:s(()=>[l(c,{prop:"site_id",label:o(i)("siteId"),width:"100","show-overflow-tooltip":!0},null,8,["label"]),l(c,{label:o(i)("siteInfo"),width:"300",align:"left"},{default:s(({row:e})=>[r("div",be,[e.logo?(m(),x("img",{key:0,class:"w-[50px] h-[50px] mr-[10px]",src:o(Y)(e.logo),alt:""},null,8,ve)):(m(),x("img",xe)),r("div",ye,[r("span",null,p(e.site_name||""),1)])])]),_:1},8,["label"]),l(c,{label:o(i)("manager"),width:"150",align:"left"},{default:s(({row:e})=>[r("div",ke,[r("div",we,[r("span",null,p(e.admin.username||""),1)])])]),_:1},8,["label"]),l(c,{prop:"site_domain",label:o(i)("siteDomain"),width:"150","show-overflow-tooltip":!0},null,8,["label"]),l(c,{label:o(i)("status"),width:"100",align:"center"},{default:s(({row:e})=>[e.status==1?(m(),g(w,{key:0,class:"ml-2",type:"success"},{default:s(()=>[u(p(e.status_name),1)]),_:2},1024)):e.status==3?(m(),g(w,{key:1,class:"ml-2",type:"error"},{default:s(()=>[u(p(e.status_name),1)]),_:2},1024)):(m(),g(w,{key:2,class:"ml-2",type:"error"},{default:s(()=>[u(p(e.status_name),1)]),_:2},1024))]),_:1},8,["label"]),l(c,{label:o(i)("operation"),"min-width":"210",align:"right",fixed:"right"},{default:s(({row:e})=>[l(b,{type:"primary",class:"mt-[5px] !ml-[0]",link:"",onClick:v=>j(e)},{default:s(()=>[u(p(o(i)("editPrice")),1)]),_:2},1032,["onClick"]),l(b,{type:"primary",class:"mt-[5px] !ml-[0]",link:"",onClick:v=>z(e)},{default:s(()=>[u(p(o(i)("adjustPrice")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[U,t.loading]]),r("div",Pe,[l(R,{"current-page":t.page,"onUpdate:current-page":a[5]||(a[5]=e=>t.page=e),"page-size":t.limit,"onUpdate:page-size":a[6]||(a[6]=e=>t.limit=e),layout:"total, sizes, prev, pager, next, jumper",total:t.total,onSizeChange:a[7]||(a[7]=e=>d()),onCurrentChange:d},null,8,["current-page","page-size","total"])])])]),_:1}),l(de,{ref_key:"addSiteDialog",ref:I,onComplete:a[8]||(a[8]=e=>d())},null,512),l(ce,{ref_key:"balanceDialog",ref:y,onComplete:d},null,512)])}}});export{it as default};
