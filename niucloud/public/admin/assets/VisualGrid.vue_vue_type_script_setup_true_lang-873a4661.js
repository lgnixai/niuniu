import{d as qo,r as de,aK as Qo,cG as Zo,Q as Jo,h as ts,c as es,a as ue}from"./index-6405d5ac.js";var ce,pe,os=Object.defineProperty,ss=Object.defineProperties,ns=Object.getOwnPropertyDescriptors,ge=Object.getOwnPropertySymbols,is=Object.prototype.hasOwnProperty,rs=Object.prototype.propertyIsEnumerable,fe=(o,t,e)=>t in o?os(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,R=(o,t)=>{for(var e in t||(t={}))is.call(t,e)&&fe(o,e,t[e]);if(ge)for(var e of ge(t))rs.call(t,e)&&fe(o,e,t[e]);return o},O=(o,t)=>ss(o,ns(t));class ls{}class as extends ls{isPopup(){return!1}}var kt,f,uo,dt,co,me,po,bt={},go=[],hs=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Y(o,t){for(var e in t)o[e]=t[e];return o}function fo(o){var t=o.parentNode;t&&t.removeChild(o)}function c(o,t,e){var s,n,i,r={};for(i in t)i=="key"?s=t[i]:i=="ref"?n=t[i]:r[i]=t[i];if(arguments.length>2&&(r.children=arguments.length>3?kt.call(arguments,2):e),typeof o=="function"&&o.defaultProps!=null)for(i in o.defaultProps)r[i]===void 0&&(r[i]=o.defaultProps[i]);return vt(o,r,s,n,null)}function vt(o,t,e,s,n){var i={type:o,props:t,key:e,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:n??++uo};return f.vnode!=null&&f.vnode(i),i}function Q(o){return o.children}function V(o,t){this.props=o,this.context=t}function rt(o,t){if(t==null)return o.__?rt(o.__,o.__.__k.indexOf(o)+1):null;for(var e;t<o.__k.length;t++)if((e=o.__k[t])!=null&&e.__e!=null)return e.__e;return typeof o.type=="function"?rt(o):null}function mo(o){var t,e;if((o=o.__)!=null&&o.__c!=null){for(o.__e=o.__c.base=null,t=0;t<o.__k.length;t++)if((e=o.__k[t])!=null&&e.__e!=null){o.__e=o.__c.base=e.__e;break}return mo(o)}}function $t(o){(!o.__d&&(o.__d=!0)&&dt.push(o)&&!xt.__r++||me!==f.debounceRendering)&&((me=f.debounceRendering)||co)(xt)}function xt(){for(var o;xt.__r=dt.length;)o=dt.sort(function(t,e){return t.__v.__b-e.__v.__b}),dt=[],o.some(function(t){var e,s,n,i,r,a;t.__d&&(r=(i=(e=t).__v).__e,(a=e.__P)&&(s=[],(n=Y({},i)).__v=i.__v+1,oe(a,i,n,e.__n,a.ownerSVGElement!==void 0,i.__h!=null?[r]:null,s,r??rt(i),i.__h),vo(s,i),i.__e!=r&&mo(i)))})}function _e(o,t,e,s,n,i,r,a,h,p){var l,v,w,m,S,$,y,z=s&&s.__k||go,T=z.length;for(e.__k=[],l=0;l<t.length;l++)if((m=e.__k[l]=(m=t[l])==null||typeof m=="boolean"?null:typeof m=="string"||typeof m=="number"||typeof m=="bigint"?vt(null,m,null,null,m):Array.isArray(m)?vt(Q,{children:m},null,null,null):m.__b>0?vt(m.type,m.props,m.key,null,m.__v):m)!=null){if(m.__=e,m.__b=e.__b+1,(w=z[l])===null||w&&m.key==w.key&&m.type===w.type)z[l]=void 0;else for(v=0;v<T;v++){if((w=z[v])&&m.key==w.key&&m.type===w.type){z[v]=void 0;break}w=null}oe(o,m,w=w||bt,n,i,r,a,h,p),S=m.__e,(v=m.ref)&&w.ref!=v&&(y||(y=[]),w.ref&&y.push(w.ref,null,m),y.push(v,m.__c||S,m)),S!=null?($==null&&($=S),typeof m.type=="function"&&m.__k!=null&&m.__k===w.__k?m.__d=h=_o(m,h,o):h=wo(o,m,w,z,S,h),p||e.type!=="option"?typeof e.type=="function"&&(e.__d=h):o.value=""):h&&w.__e==h&&h.parentNode!=o&&(h=rt(w))}for(e.__e=$,l=T;l--;)z[l]!=null&&(typeof e.type=="function"&&z[l].__e!=null&&z[l].__e==e.__d&&(e.__d=rt(s,l+1)),Ro(z[l],z[l]));if(y)for(l=0;l<y.length;l++)Co(y[l],y[++l],y[++l])}function _o(o,t,e){var s,n;for(s=0;s<o.__k.length;s++)(n=o.__k[s])&&(n.__=o,t=typeof n.type=="function"?_o(n,t,e):wo(e,n,n,o.__k,n.__e,t));return t}function St(o,t){return t=t||[],o==null||typeof o=="boolean"||(Array.isArray(o)?o.some(function(e){St(e,t)}):t.push(o)),t}function wo(o,t,e,s,n,i){var r,a,h;if(t.__d!==void 0)r=t.__d,t.__d=void 0;else if(e==null||n!=i||n.parentNode==null)t:if(i==null||i.parentNode!==o)o.appendChild(n),r=null;else{for(a=i,h=0;(a=a.nextSibling)&&h<s.length;h+=2)if(a==n)break t;o.insertBefore(n,i),r=i}return r!==void 0?r:n.nextSibling}function we(o,t,e){t[0]==="-"?o.setProperty(t,e):o[t]=e==null?"":typeof e!="number"||hs.test(t)?e:e+"px"}function gt(o,t,e,s,n){var i;t:if(t==="style")if(typeof e=="string")o.style.cssText=e;else{if(typeof s=="string"&&(o.style.cssText=s=""),s)for(t in s)e&&t in e||we(o.style,t,"");if(e)for(t in e)s&&e[t]===s[t]||we(o.style,t,e[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in o?t.toLowerCase().slice(2):t.slice(2),o.l||(o.l={}),o.l[t+i]=e,e?s||o.addEventListener(t,i?Ce:ve,i):o.removeEventListener(t,i?Ce:ve,i);else if(t!=="dangerouslySetInnerHTML"){if(n)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in o)try{o[t]=e??"";break t}catch{}typeof e=="function"||(e!=null&&(e!==!1||t[0]==="a"&&t[1]==="r")?o.setAttribute(t,e):o.removeAttribute(t))}}function ve(o){this.l[o.type+!1](f.event?f.event(o):o)}function Ce(o){this.l[o.type+!0](f.event?f.event(o):o)}function oe(o,t,e,s,n,i,r,a,h){var p,l,v,w,m,S,$,y,z,T,u,d=t.type;if(t.constructor!==void 0)return null;e.__h!=null&&(h=e.__h,a=t.__e=e.__e,t.__h=null,i=[a]),(p=f.__b)&&p(t);try{t:if(typeof d=="function"){if(y=t.props,z=(p=d.contextType)&&s[p.__c],T=p?z?z.props.value:p.__:s,e.__c?$=(l=t.__c=e.__c).__=l.__E:("prototype"in d&&d.prototype.render?t.__c=l=new d(y,T):(t.__c=l=new V(y,T),l.constructor=d,l.render=ds),z&&z.sub(l),l.props=y,l.state||(l.state={}),l.context=T,l.__n=s,v=l.__d=!0,l.__h=[]),l.__s==null&&(l.__s=l.state),d.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=Y({},l.__s)),Y(l.__s,d.getDerivedStateFromProps(y,l.__s))),w=l.props,m=l.state,v)d.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(d.getDerivedStateFromProps==null&&y!==w&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(y,T),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(y,l.__s,T)===!1||t.__v===e.__v){l.props=y,l.state=l.__s,t.__v!==e.__v&&(l.__d=!1),l.__v=t,t.__e=e.__e,t.__k=e.__k,t.__k.forEach(function(g){g&&(g.__=t)}),l.__h.length&&r.push(l);break t}l.componentWillUpdate!=null&&l.componentWillUpdate(y,l.__s,T),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(w,m,S)})}l.context=T,l.props=y,l.state=l.__s,(p=f.__r)&&p(t),l.__d=!1,l.__v=t,l.__P=o,p=l.render(l.props,l.state,l.context),l.state=l.__s,l.getChildContext!=null&&(s=Y(Y({},s),l.getChildContext())),v||l.getSnapshotBeforeUpdate==null||(S=l.getSnapshotBeforeUpdate(w,m)),u=p!=null&&p.type===Q&&p.key==null?p.props.children:p,_e(o,Array.isArray(u)?u:[u],t,e,s,n,i,r,a,h),l.base=t.__e,t.__h=null,l.__h.length&&r.push(l),$&&(l.__E=l.__=null),l.__e=!1}else i==null&&t.__v===e.__v?(t.__k=e.__k,t.__e=e.__e):t.__e=function(g,C,_,b,x,N,W,I){var G,ct,j,K=_.props,F=C.props,X=C.type,D=0;if(X==="svg"&&(x=!0),N!=null){for(;D<N.length;D++)if((G=N[D])&&(G===g||(X?G.localName==X:G.nodeType==3))){g=G,N[D]=null;break}}if(g==null){if(X===null)return document.createTextNode(F);g=x?document.createElementNS("http://www.w3.org/2000/svg",X):document.createElement(X,F.is&&F),N=null,I=!1}if(X===null)K===F||I&&g.data===F||(g.data=F);else{if(N=N&&kt.call(g.childNodes),ct=(K=_.props||bt).dangerouslySetInnerHTML,j=F.dangerouslySetInnerHTML,!I){if(N!=null)for(K={},D=0;D<g.attributes.length;D++)K[g.attributes[D].name]=g.attributes[D].value;(j||ct)&&(j&&(ct&&j.__html==ct.__html||j.__html===g.innerHTML)||(g.innerHTML=j&&j.__html||""))}if(function(ae,at,pt,he,Ko){var k;for(k in pt)k==="children"||k==="key"||k in at||gt(ae,k,null,pt[k],he);for(k in at)Ko&&typeof at[k]!="function"||k==="children"||k==="key"||k==="value"||k==="checked"||pt[k]===at[k]||gt(ae,k,at[k],pt[k],he)}(g,F,K,x,I),j)C.__k=[];else if(D=C.props.children,_e(g,Array.isArray(D)?D:[D],C,_,b,x&&X!=="foreignObject",N,W,N?N[0]:_.__k&&rt(_,0),I),N!=null)for(D=N.length;D--;)N[D]!=null&&fo(N[D]);I||("value"in F&&(D=F.value)!==void 0&&(D!==g.value||X==="progress"&&!D)&&gt(g,"value",D,K.value,!1),"checked"in F&&(D=F.checked)!==void 0&&D!==g.checked&&gt(g,"checked",D,K.checked,!1))}return g}(e.__e,t,e,s,n,i,r,h);(p=f.diffed)&&p(t)}catch(g){t.__v=null,(h||i!=null)&&(t.__e=a,t.__h=!!h,i[i.indexOf(a)]=null),f.__e(g,t,e)}}function vo(o,t){f.__c&&f.__c(t,o),o.some(function(e){try{o=e.__h,e.__h=[],o.some(function(s){s.call(e)})}catch(s){f.__e(s,e.__v)}})}function Co(o,t,e){try{typeof o=="function"?o(t):o.current=t}catch(s){f.__e(s,e)}}function Ro(o,t,e){var s,n;if(f.unmount&&f.unmount(o),(s=o.ref)&&(s.current&&s.current!==o.__e||Co(s,null,t)),(s=o.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(i){f.__e(i,t)}s.base=s.__P=null}if(s=o.__k)for(n=0;n<s.length;n++)s[n]&&Ro(s[n],t,typeof o.type!="function");e||o.__e==null||fo(o.__e),o.__e=o.__d=void 0}function ds(o,t,e){return this.constructor(o,e)}function yo(o,t){var e,s,n,i,r,a;e=o,s=t,n=yo,f.__&&f.__(e,s),r=(i=typeof n=="function")?null:n&&n.__k||s.__k,a=[],oe(s,e=(!i&&n||s).__k=c(Q,null,[e]),r||bt,bt,s.ownerSVGElement!==void 0,!i&&n?[n]:r?null:s.firstChild?kt.call(s.childNodes):null,a,!i&&n?n:r?r.__e:s.firstChild,i),vo(a,e)}kt=go.slice,f={__e:function(o,t){for(var e,s,n;t=t.__;)if((e=t.__c)&&!e.__)try{if((s=e.constructor)&&s.getDerivedStateFromError!=null&&(e.setState(s.getDerivedStateFromError(o)),n=e.__d),e.componentDidCatch!=null&&(e.componentDidCatch(o),n=e.__d),n)return e.__E=e}catch(i){o=i}throw o}},uo=0,V.prototype.setState=function(o,t){var e;e=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Y({},this.state),typeof o=="function"&&(o=o(Y({},e),this.props)),o&&Y(e,o),o!=null&&this.__v&&(t&&this.__h.push(t),$t(this))},V.prototype.forceUpdate=function(o){this.__v&&(this.__e=!0,o&&this.__h.push(o),$t(this))},V.prototype.render=Q,dt=[],co=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,xt.__r=0,po=0;const se=(Tt={__c:Re="__cC"+po++,__:void 0,Consumer:function(o,t){return o.children(t)},Provider:function(o){var t,e;return this.getChildContext||(t=[],(e={})[Re]=this,this.getChildContext=function(){return e},this.shouldComponentUpdate=function(s){this.props.value!==s.value&&t.some($t)},this.sub=function(s){t.push(s);var n=s.componentWillUnmount;s.componentWillUnmount=function(){t.splice(t.indexOf(s),1),n&&n.call(s)}}),o.children}}).Provider.__=Tt.Consumer.contextType=Tt;var Re,Tt;function us(o){return c(se.Provider,{value:o.grid},o.children)}var Ot,H,ye,Ft=0,Vt=[],be=f.__b,xe=f.__r,Se=f.diffed,Me=f.__c,Ee=f.unmount;function ne(o,t){f.__h&&f.__h(H,o,Ft||t),Ft=0;var e=H.__H||(H.__H={__:[],__h:[]});return o>=e.__.length&&e.__.push({}),e.__[o]}function bo(o){return Ft=1,function(t,e,s){var n=ne(Ot++,2);return n.t=t,n.__c||(n.__=[s?s(e):ze(void 0,e),function(i){var r=n.t(n.__[0],i);n.__[0]!==r&&(n.__=[r,n.__[1]],n.__c.setState({}))}],n.__c=H),n.__}(ze,o)}function xo(o,t){var e=ne(Ot++,4);!f.__s&&function(s,n){return!s||s.length!==n.length||n.some(function(i,r){return i!==s[r]})}(e.__H,t)&&(e.__=o,e.__H=t,H.__h.push(e))}function So(o){var t=H.context[o.__c],e=ne(Ot++,9);return e.c=o,t?(e.__==null&&(e.__=!0,t.sub(H)),t.props.value):o.__}function cs(){Vt.forEach(function(o){if(o.__P)try{o.__H.__h.forEach(Ct),o.__H.__h.forEach(Wt),o.__H.__h=[]}catch(t){o.__H.__h=[],f.__e(t,o.__v)}}),Vt=[]}f.__b=function(o){H=null,be&&be(o)},f.__r=function(o){xe&&xe(o),Ot=0;var t=(H=o.__c).__H;t&&(t.__h.forEach(Ct),t.__h.forEach(Wt),t.__h=[])},f.diffed=function(o){Se&&Se(o);var t=o.__c;t&&t.__H&&t.__H.__h.length&&(Vt.push(t)!==1&&ye===f.requestAnimationFrame||((ye=f.requestAnimationFrame)||function(e){var s,n=function(){clearTimeout(i),De&&cancelAnimationFrame(s),setTimeout(e)},i=setTimeout(n,100);De&&(s=requestAnimationFrame(n))})(cs)),H=void 0},f.__c=function(o,t){t.some(function(e){try{e.__h.forEach(Ct),e.__h=e.__h.filter(function(s){return!s.__||Wt(s)})}catch(s){t.some(function(n){n.__h&&(n.__h=[])}),t=[],f.__e(s,e.__v)}}),Me&&Me(o,t)},f.unmount=function(o){Ee&&Ee(o);var t=o.__c;if(t&&t.__H)try{t.__H.__.forEach(Ct)}catch(e){f.__e(e,t.__v)}};var et,tt,B,ht,De=typeof requestAnimationFrame=="function";function Ct(o){var t=H;typeof o.__c=="function"&&o.__c(),H=t}function Wt(o){var t=H;o.__c=o.__(),H=t}function ze(o,t){return typeof t=="function"?t(o):t}function Mo(o){var t,e,s="";if(typeof o=="string"||typeof o=="number")s+=o;else if(typeof o=="object")if(Array.isArray(o))for(t=0;t<o.length;t++)o[t]&&(e=Mo(o[t]))&&(s&&(s+=" "),s+=e);else for(t in o)o[t]&&(s&&(s+=" "),s+=t);return s}function lt(){for(var o,t,e=0,s="";e<arguments.length;)(o=arguments[e++])&&(t=Mo(o))&&(s&&(s+=" "),s+=t);return s}let Pt;function ps(){return Pt==null&&function(){const o=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",o.appendChild(t);let e=t.offsetWidth-t.clientWidth;e===0&&t.clientWidth===0&&(e=null),t.parentNode&&t.parentNode.removeChild(t),e!=null&&(Pt=e===0)}(),Pt}(tt=et||(et={}))[tt.Left=0]="Left",tt[tt.Middle=1]="Middle",tt[tt.Right=2]="Right",(ht=B||(B={})).clean=function(o){o.innerHTML=""},ht.appendClassName=function(o,t){const e=o.className.split(" ");e.findIndex(s=>s===t)===-1&&(e.push(t),o.className=e.join(" "))},ht.removeClassName=function(o,t){const e=o.className.split(" "),s=e.findIndex(n=>n===t);s!==-1&&(e.splice(s,1),o.className=e.join(" "))},ht.setClassNames=function(o,t){o.className=it(t)},ht.isInViewport=function(o){var t=o.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)};const Ne=typeof navigator>"u"?void 0:navigator,nt=Ne==null?void 0:Ne.clipboard,Ie=(ce=nt==null?void 0:nt.readText)==null?void 0:ce.bind(nt),ke=(pe=nt==null?void 0:nt.writeText)==null?void 0:pe.bind(nt);function Oe(o,t){return o===t?o!==0||t!==0||1/o==1/t:o!=o&&t!=t}function it(...o){return lt(...o)}function Eo(){var o=0;return function(){return o++}}function P(o,...t){return o.filter(e=>t.every(s=>s.indexOf(e)<0))}function Te(o,...t){return o.filter(e=>t.every(s=>s.indexOf(e)!==-1))}function Do(o){return o.filter((t,e)=>o.indexOf(t,0)===e)}function zo(o,t,e){const s=t<0?o.length+t:t;if(s>=0&&s<o.length){const n=e<0?o.length+e:e,[i]=o.splice(t,1);o.splice(n,0,i)}}function gs(o,t,e,s){const n={state:t(o.getState(),s),getState:()=>n.state,cancel:()=>{}};return n.cancel=o.subscribeAny(()=>{const i=t(o.getState(),s);(function(r,a){if(Oe(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;const h=Object.keys(r),p=Object.keys(a);if(h.length!==p.length)return!1;for(let l=0;l<h.length;l++)if(!Object.prototype.hasOwnProperty.call(a,h[l])||!Oe(r[h[l]],a[h[l]]))return!1;return!0})(i,n.state)||(n.state=i,e(n.state))}),n}function Z(o,t){return function(e){return function(s){const n=So(se),[i,r]=bo(o(n.getState(),{grid:n,props:s})),a=t?t(n):void 0;return xo(()=>gs(n.getRoot(),o,h=>{r(h)},{grid:n,props:s}).cancel,[]),c(e,R(R(R({},i),s),a))}}}function U(o){return function(t){const e=So(se);return c(o,R({grid:e},t))}}class ie extends V{constructor(){super(...arguments),this.refs={}}createRef(t){const e={current:null};return this.refs[t]=e,e}}function Pe(o,t){for(var e in o)if(e!=="__source"&&!(e in t))return!0;for(var s in t)if(s!=="__source"&&o[s]!==t[s])return!0;return!1}function Mt(o){this.props=o}(Mt.prototype=new V).isPureReactComponent=!0,Mt.prototype.shouldComponentUpdate=function(o,t){return Pe(this.props,o)||Pe(this.state,t)};var Be=f.__b;f.__b=function(o){o.type&&o.type.__f&&o.ref&&(o.props.ref=o.ref,o.ref=null),Be&&Be(o)};var fs=f.__e;f.__e=function(o,t,e){if(o.then){for(var s,n=t;n=n.__;)if((s=n.__c)&&s.__c)return t.__e==null&&(t.__e=e.__e,t.__k=e.__k),s.__c(o,t)}fs(o,t,e)};var Le=f.unmount;function Bt(){this.__u=0,this.t=null,this.__b=null}function No(o){var t=o.__.__c;return t&&t.__e&&t.__e(o)}function ft(){this.u=null,this.o=null}f.unmount=function(o){var t=o.__c;t&&t.__R&&t.__R(),t&&o.__h===!0&&(o.type=null),Le&&Le(o)},(Bt.prototype=new V).__c=function(o,t){var e=t.__c,s=this;s.t==null&&(s.t=[]),s.t.push(e);var n=No(s.__v),i=!1,r=function(){i||(i=!0,e.__R=null,n?n(a):a())};e.__R=r;var a=function(){if(!--s.__u){if(s.state.__e){var p=s.state.__e;s.__v.__k[0]=function v(w,m,S){return w&&(w.__v=null,w.__k=w.__k&&w.__k.map(function($){return v($,m,S)}),w.__c&&w.__c.__P===m&&(w.__e&&S.insertBefore(w.__e,w.__d),w.__c.__e=!0,w.__c.__P=S)),w}(p,p.__c.__P,p.__c.__O)}var l;for(s.setState({__e:s.__b=null});l=s.t.pop();)l.forceUpdate()}},h=t.__h===!0;s.__u++||h||s.setState({__e:s.__b=s.__v.__k[0]}),o.then(r,r)},Bt.prototype.componentWillUnmount=function(){this.t=[]},Bt.prototype.render=function(o,t){if(this.__b){if(this.__v.__k){var e=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=function i(r,a,h){return r&&(r.__c&&r.__c.__H&&(r.__c.__H.__.forEach(function(p){typeof p.__c=="function"&&p.__c()}),r.__c.__H=null),(r=function(p,l){for(var v in l)p[v]=l[v];return p}({},r)).__c!=null&&(r.__c.__P===h&&(r.__c.__P=a),r.__c=null),r.__k=r.__k&&r.__k.map(function(p){return i(p,a,h)})),r}(this.__b,e,s.__O=s.__P)}this.__b=null}var n=t.__e&&c(Q,null,o.fallback);return n&&(n.__h=null),[c(Q,null,t.__e?null:o.children),n]};var He=function(o,t,e){if(++e[1]===e[0]&&o.o.delete(t),o.props.revealOrder&&(o.props.revealOrder[0]!=="t"||!o.o.size))for(e=o.u;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;o.u=e=e[2]}};(ft.prototype=new V).__e=function(o){var t=this,e=No(t.__v),s=t.o.get(o);return s[0]++,function(n){var i=function(){t.props.revealOrder?(s.push(n),He(t,o,s)):n()};e?e(i):i()}},ft.prototype.render=function(o){this.u=null,this.o=new Map;var t=St(o.children);o.revealOrder&&o.revealOrder[0]==="b"&&t.reverse();for(var e=t.length;e--;)this.o.set(t[e],this.u=[1,0,this.u]);return o.children},ft.prototype.componentDidUpdate=ft.prototype.componentDidMount=function(){var o=this;this.o.forEach(function(t,e){He(o,e,t)})};var ms=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,_s=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ws=function(o){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(o)};V.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(o){Object.defineProperty(V.prototype,o,{configurable:!0,get:function(){return this["UNSAFE_"+o]},set:function(t){Object.defineProperty(this,o,{configurable:!0,writable:!0,value:t})}})});var Ae=f.event;function vs(){}function Cs(){return this.cancelBubble}function Rs(){return this.defaultPrevented}f.event=function(o){return Ae&&(o=Ae(o)),o.persist=vs,o.isPropagationStopped=Cs,o.isDefaultPrevented=Rs,o.nativeEvent=o};var $e={configurable:!0,get:function(){return this.class}},Fe=f.vnode;f.vnode=function(o){var t=o.type,e=o.props,s=e;if(typeof t=="string"){for(var n in s={},e){var i=e[n];n==="value"&&"defaultValue"in e&&i==null||(n==="defaultValue"&&"value"in e&&e.value==null?n="value":n==="download"&&i===!0?i="":/ondoubleclick/i.test(n)?n="ondblclick":/^onchange(textarea|input)/i.test(n+t)&&!ws(e.type)?n="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(n)?n=n.toLowerCase():_s.test(n)?n=n.replace(/[A-Z0-9]/,"-$&").toLowerCase():i===null&&(i=void 0),s[n]=i)}t=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=St(e.children).forEach(function(r){r.props.selected=s.value.indexOf(r.props.value)!=-1})),t=="select"&&s.defaultValue!=null&&(s.value=St(e.children).forEach(function(r){r.props.selected=s.multiple?s.defaultValue.indexOf(r.props.value)!=-1:s.defaultValue==r.props.value})),o.props=s}t&&e.class!=e.className&&($e.enumerable="className"in e,e.className!=null&&(s.class=e.className),Object.defineProperty(s,"className",$e)),o.$$typeof=ms,Fe&&Fe(o)};var Ve=f.__r;f.__r=function(o){Ve&&Ve(o)};class J extends Mt{constructor(){super(...arguments),this.refs={}}createRef(t){const e={current:null};return this.refs[t]=e,e}}var ys="v-grid-menu",bs="v-grid-menu-separator",xs="v-grid-menu-item",Ss="v-grid-menu-disabled-item",Ms="v-grid-menu-item-icon",Es="v-grid-menu-item-title";class Ds extends ie{constructor(){super(...arguments),this.handleClick=t=>{this.props.disabled||this.props.subMenus||(this.props.action&&this.props.action(),this.props.onClick&&this.props.onClick(t))},this.showSubMenus=()=>{const t=this.refs.self.current,e=t.getBoundingClientRect(),s={x:e.left+t.offsetWidth-2,y:e.top};this.setState({subMenuCoord:s,subMenuVisible:!0})},this.hideSubMenus=()=>{this.setState({subMenuVisible:!1})}}get hasSubMenus(){return this.props.subMenus&&!this.props.disabled}render(){return this.props.separator?c("div",{className:bs}):c("div",{className:this.props.disabled?Ss:xs,onClick:this.handleClick,onMouseOver:this.hasSubMenus?this.showSubMenus:void 0,onMouseLeave:this.hasSubMenus?this.hideSubMenus:void 0,ref:this.createRef("self")},c("span",{className:Ms},c("span",{className:this.props.icon})),c("span",{className:Es},this.props.name),this.hasSubMenus&&c("span",{className:"vg-cheveron-right"}),this.state.subMenuVisible&&c(re,{onMenuItemClicked:this.props.onClick,coord:this.state.subMenuCoord,items:this.props.subMenus}))}}class re extends ie{constructor(){super(...arguments),this.componentDidMount=()=>{document.addEventListener("click",this.handleClickoutside),this.edgeCheck()},this.componentWillUnmount=()=>{document.removeEventListener("click",this.handleClickoutside)},this.componentDidUpdate=()=>{this.edgeCheck()},this.handleClickoutside=t=>{this.props.onClickOutside&&!this.refs.self.current.contains(t.target)&&setTimeout(()=>{this.props.onClickOutside()},0)},this.handleMenuItemClicked=t=>{this.props.onMenuItemClicked&&setTimeout(()=>{this.props.onMenuItemClicked(t)},0)}}get coord(){return this.props.coord?this.props.coord:{x:0,y:0}}edgeCheck(){if(!B.isInViewport(this.refs.self.current)){const t=this.coord.x-this.refs.self.current.offsetWidth+"px";this.refs.self.current.style.left=t}if(!B.isInViewport(this.refs.self.current)){const t=this.coord.y-this.refs.self.current.offsetHeight+"px";this.refs.self.current.style.top=t}}render(){return c("div",{ref:this.createRef("self"),style:{left:this.coord.x,top:this.coord.y},className:ys},this.props.items.map(t=>c(Ds,R({onClick:this.handleMenuItemClicked},t))))}}var Io="v-grid-header-column",ko="v-grid-header-column-content",zs="v-grid-header-name",Xt="v-grid-column-icon",Ns="v-grid-column-drag-handle",Is="v-grid-column-resize-holder",ks=Z((o,{props:t})=>({options:o.column.columns,data:o.column.groupsData[t.value]}))(U(class extends J{constructor(){super(...arguments),this.toggleCollapsed=()=>{this.props.grid.toggleGroupCollapsed(this.props.value)}}get data(){return this.props.data}render(){const o=this.props.grid.store("column").getGroupWidth(this.props.value,this.props.columns);if(o.width===0)return null;const t={width:o.width};o.flex&&(t.flexGrow=o.flex);const e=it([Xt,this.data.collapsed?"vg-cheveron-right":"vg-cheveron-left"]);return c("div",{className:Io,style:t},c("div",{className:ko},c("span",null,this.data.headerName),this.data.collapsible&&c("span",{onClick:this.toggleCollapsed,className:e})))}})),Os=Z((o,{props:t})=>({options:o.column.columns[t.value]}))(U(class extends J{constructor(){super(...arguments),this.bindMetaData=()=>{this.self.__isColumn=!0,this.self.__field=this.options.field},this.handleDragStart=o=>{this.props.onDragStart&&this.props.onDragStart(this.options.field,this.self,o)},this.handleMouseDown=o=>{this.props.onResize&&this.props.onResize(this.options.field,this.self.offsetWidth,o)},this.handleContextMenu=o=>{this.props.onContextMenu&&this.props.onContextMenu(this.props.value,o)}}get options(){return this.props.options}componentDidMount(){this.bindMetaData()}componentDidUpdate(){this.bindMetaData()}render(){const o={width:this.options.width,minWidth:this.options.minWidth};this.options.flex&&(o.flexGrow=this.options.flex);const t={column:this.props.value,grid:this.props.grid},e=lt(ko,this.options.headerClass||[],this.options.getHeaderClass?this.options.getHeaderClass(t):[]),s=R(R({},this.options.headerStyle),this.options.getHeaderStyle?this.options.getHeaderStyle(t):{});return c("div",{ref:n=>this.self=n,className:Io,style:o},c("div",{className:e,style:s},this.options.sortable&&c("span",{onMouseDown:this.handleDragStart,className:lt(["vg-move",Xt,Ns])}),c("span",{className:zs},this.options.headerName),this.props.onContextMenu&&c("span",{onClick:this.handleContextMenu,className:`${Xt} vg-menu`}),!this.options.flex&&this.options.resizable&&c("div",{ref:this.createRef("resizer"),onMouseDown:this.handleMouseDown,className:Is})))}})),Ts="v-grid-header",We="v-grid-header-columns",Ps="v-grid-header-container",Bs="v-grid-normal-columns",Ls="v-grid-pinned-right-columns",Hs="v-grid-pinned-left-columns",As="v-grid-column-drag-indicator",$s="v-grid-column-drag-ghost",Fs="v-grid-ghost-icon",Lt=Z(o=>({height:o.column.height,groups:o.column.groups,groupsData:o.column.groupsData}))(U(class extends V{constructor(){super(...arguments),this.getActiveColumn=o=>{let t,e=o.target;for(;e!=this.columnsRoot&&e;){if(e.__field&&e.__isColumn===!0){t=e.__field;break}e=e.parentElement}if(t)return e},this.handleDragStart=(o,t,e)=>{var s;if(!this.props.grid.trigger("beforeColumnDragStart",o))return;this.ghost||(this.ghost=document.createElement("div"),this.ghost.className=$s);const n=((s=this.props.grid.getColumnOptions(o))==null?void 0:s.headerName)||"";this.ghost.innerHTML=`
            <span class="vg-move ${Fs}"></span>
            <span>${n}</span>
        `,this.props.grid.appendChild(this.ghost),document.addEventListener("mousemove",this.handleDragMove),document.addEventListener("mouseup",this.handleDragEnd),this.currentDragStartField=o,this.dragIndicator.style.display="block",this.updateDragEndField(t),this.updateDragGhost(e),this.props.grid.trigger("afterColumnDragStart",o)},this.handleDragMove=o=>{this.updateDragGhost(o),this.updateDragEndField(this.getActiveColumn(o))},this.handleDragEnd=()=>{document.removeEventListener("mousemove",this.handleDragMove),document.removeEventListener("mouseup",this.handleDragEnd),this.props.grid.removeChild(this.ghost),this.dragIndicator.style.display="none";const o=this.currentDragStartField,t=this.currentDragEndField;this.currentDragStartField=this.currentDragEndField=void 0,this.props.grid.trigger("beforeColumnDragEnd",o,t)&&(this.props.grid.store("column").moveColumn(o,t),this.props.grid.trigger("afterColumnDragEnd",o,t))},this.updateDragGhost=o=>{if(!this.ghost)return;const t=this.props.grid.getRootElement().getBoundingClientRect();this.ghost.style.left=o.clientX-t.left+10+"px",this.ghost.style.top=o.clientY-t.top+10+"px"},this.updateDragEndField=o=>{if(!o)return;const t=this.columnsRoot.getBoundingClientRect(),e=o.getBoundingClientRect();this.currentDragEndField=o.__field,this.dragIndicator.style.left=e.left-t.left+"px",this.dragIndicator.style.height=e.height+"px",this.dragIndicator.style.width=e.width+"px"}}render(){const{columns:o,groups:t}=this.props,e={height:this.props.height,minHeight:this.props.height};return c(Q,null,t.map(s=>c("div",{className:We,style:e},s.map((n,i)=>c(ks,{key:n+String(i),value:n,columns:o})))),c("div",{ref:s=>this.columnsRoot=s,className:We,style:e},c("div",{ref:s=>this.dragIndicator=s,className:As}),o.map(s=>{const n=this.props.grid.getColumnMenuItems(s).length>0;return c(Os,{key:s,value:s,onResize:this.props.onColumnResizeStart,onDragStart:this.handleDragStart,onContextMenu:n?this.props.onColumnContextMenu:void 0})})))}})),Vs=Z(o=>({pinnedLeftColumns:o.column.pinnedLeftColumns,pinnedRightColumns:o.column.pinnedRightColumns,normalColumns:o.column.normalColumns}))(U(class extends J{constructor(){super(...arguments),this.componentDidMount=()=>{this.resize()},this.componentDidUpdate=()=>{this.resize()},this.resize=()=>{this.props.headerContainerRef.current.style.width="",this.props.headerContainerRef.current.style.width=this.props.headerContainerRef.current.scrollWidth+"px"},this.handleColumnContextMenu=(o,t)=>{const e=this.props.grid.getColumnMenuItems(o);e.length!==0&&(this.setState({isMenuVisible:!0,contextMenuItems:e,contextMenuCoord:{x:t.clientX,y:t.clientY}}),t.stopPropagation())},this.hideContextMenu=()=>{this.state.isMenuVisible&&this.setState({isMenuVisible:!1})}}render(){return c("div",{ref:this.props.headerRef,className:Ts},this.props.pinnedLeftColumns.length>0&&c("div",{ref:this.props.pinnedLeftColumnsRef,className:it([Hs])},c(Lt,{columns:this.props.pinnedLeftColumns,onColumnResizeStart:this.props.handleColumnResizeStart,onColumnContextMenu:this.handleColumnContextMenu})),c("div",{ref:this.props.normalColumnsRef,className:Bs},c("div",{ref:this.props.headerContainerRef,className:it([Ps])},c(Lt,{columns:this.props.normalColumns,onColumnResizeStart:this.props.handleColumnResizeStart,onColumnContextMenu:this.handleColumnContextMenu}))),this.props.pinnedRightColumns.length>0&&c("div",{ref:this.props.pinnedRightColumnsRef,className:it([Ls])},c(Lt,{columns:this.props.pinnedRightColumns,onColumnResizeStart:this.props.handleColumnResizeStart,onColumnContextMenu:this.handleColumnContextMenu})),this.state.isMenuVisible&&c(re,{onMenuItemClicked:this.hideContextMenu,onClickOutside:this.hideContextMenu,coord:this.state.contextMenuCoord,items:this.state.contextMenuItems}))}}));class Oo{each(t){for(let e=this.minY;e<=this.maxY;e++)for(let s=this.minX;s<=this.maxX;s++)if(t({x:s,y:e},{x:s-this.minX,y:e-this.minY})===!1)return}eachRow(t){for(let e=this.minY;e<=this.maxY;e++)if(t(e,e-this.minY)===!1)return}getStartCoord(){return{x:this.minX,y:this.minY}}getEndCoord(){return{x:this.maxX,y:this.maxY}}getGlobalCoord(t){return{x:this.minX+t.x,y:this.minY+t.y}}getCellCount(){return(this.maxX-this.minX+1)*(this.maxY-this.minY+1)}contains(t){return!this.isEmpty()&&t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY}isLeft(t){return!this.isEmpty()&&t.x==this.minX}isRight(t){return!this.isEmpty()&&t.x==this.maxX}isTop(t){return!this.isEmpty()&&t.y==this.minY}isBottom(t){return!this.isEmpty()&&t.y==this.maxY}}class le extends Oo{constructor(t,e){super(),this.start=t,this.end=e,t&&e&&(this.minX=Math.min(t.x,e.x),this.minY=Math.min(t.y,e.y),this.maxX=Math.max(t.x,e.x),this.maxY=Math.max(t.y,e.y))}isEmpty(){return!this.start||!this.end}}class Xe extends Oo{constructor(t,e,s){super(),this.ref=t,this.current=e,this.limit=s,this.limit!==void 0&&t&&e&&!t.contains(e)&&(this.limit==="xy"&&(this.limit=Math.abs(e.x-t.end.x)>Math.abs(e.y-t.end.y)?"x":"y"),this.start=t.getStartCoord(),this.end=e,this.limit==="x"?(this.end.y=t.end.y,this.start.x=e.x<t.start.x?t.start.x-1:t.end.x+1):(this.end.x=t.end.x,this.start.y=e.y<t.start.y?t.start.y-1:t.end.y+1),this.minX=Math.min(this.start.x,this.end.x),this.minY=Math.min(this.start.y,this.end.y),this.maxX=Math.max(this.start.x,this.end.x),this.maxY=Math.max(this.start.y,this.end.y))}isEmpty(){return!this.start||!this.end}getReference(){return this.ref}chunk(t){if(this.isEmpty())return;const e=this.ref.getStartCoord(),s=this.ref.getEndCoord(),n=this.minX<e.x||this.minY<e.y;let i=[],r=s.y-e.y,a=n?this.minY:this.maxY,h=n?this.maxY:this.minY;for(this.limit==="x"&&(r=s.x-e.x,a=n?this.minX:this.maxX,h=n?this.maxX:this.minX);;){const p=this.limit==="x"?{x:h,y:this.minY}:{x:this.minX,y:h};h=n?Math.max(h-r,a):Math.min(h+r,a);const l=this.limit==="x"?{x:h,y:this.maxY}:{x:this.maxX,y:h};if(i.push(new le(p,l)),h==a)break;h+=n?-1:1}i.forEach(p=>{t(p)})}}var Ws="v-grid-row-cells",Ue="v-grid-row-stripe-cells",je="v-grid-row-cells-hover",Ye="v-grid-row-cells-select",Xs=U(class extends J{constructor(){super(...arguments),this.self={current:null},this.updateState=()=>{if(!this.self.current)return;const o=this.props.grid.store("row").getRowIndex(this.props.value),t=this.props.grid.state("row").hoveredRow===this.props.value,e=this.props.grid.state("row").selectedRows.indexOf(this.props.value)!==-1;o%2==0?B.appendClassName(this.self.current,Ue):B.removeClassName(this.self.current,Ue),t?B.appendClassName(this.self.current,je):B.removeClassName(this.self.current,je),e?B.appendClassName(this.self.current,Ye):B.removeClassName(this.self.current,Ye)}}componentDidMount(){this.unsubscribe=this.props.grid.store("row").subscribeAny(this.updateState),this.updateState()}componentWillUnmount(){this.unsubscribe()}render(){const o={row:this.props.value,grid:this.props.grid};let t=R(R({},this.props.grid.state("row").rowStyle),this.props.style);this.props.grid.state("row").getRowStyle&&(t=Object.assign({},t,this.props.grid.state("row").getRowStyle(o)));let e=this.props.grid.state("row").rowClass||[];return e.push(Ws),this.props.grid.state("row").getRowClass&&(e=e.concat(this.props.grid.state("row").getRowClass(o))),e=Do(e),c("div",{ref:this.self,style:t,className:lt(e)},this.props.children)}}),Us="v-grid-cell",Ge="v-grid-cell-content",js="v-grid-cell-editing",Ys="v-grid-cell-selected",Gs="v-grid-cell-filling",Ks="v-grid-cell-filling-left-boundary",qs="v-grid-cell-filling-right-boundary",Qs="v-grid-cell-filling-top-boundary",Zs="v-grid-cell-filling-bottom-boundary",Js="v-grid-cell-left-boundary",tn="v-grid-cell-right-boundary",en="v-grid-cell-top-boundary",on="v-grid-cell-bottom-boundary",sn="v-grid-cell-editing-wrapper",nn="v-grid-cell-popup-container",rn="v-grid-cell-drag-handle",ln="v-grid-cell-fill-handler",an="v-grid-row-resize-holder",ot,mt,q,Ke,A,qe,Et,Qe,hn=U(class extends J{constructor(){super(...arguments),this.cellContent={current:null},this.popup=null,this.isEditing=!1,this.unsubscribes=[],this.componentDidMount=()=>{this.bindMetaData(),this.doRender(),this.unsubscribes.push(this.props.grid.store("cell").subscribeAny(()=>{var o;const t=this.grid.getSelectBoundary(this.props.row,this.props.column),e=(o=this.options)!=null&&o.readonly?void 0:this.grid.getFillingBoundary(this.props.row,this.props.column);this.setState({fillable:this.grid.state("grid").fillable,isSelected:t!==void 0,isLeftSelected:t&&t.left,isRightSelected:t&&t.right,isTopSelected:t&&t.top,isBottomSelected:t&&t.bottom,isFilling:e!==void 0,isLeftFilling:e&&e.left,isRightFilling:e&&e.right,isTopFilling:e&&e.top,isBottomFilling:e&&e.bottom})})),this.options.cellEditor&&!this.options.readonly&&this.unsubscribes.push(this.props.grid.store("cell").subscribeAny(()=>{const o=this.props.grid.state("cell").editing,t=Boolean(o&&o.row===this.props.row&&o.column===this.props.column);this.isEditing!==t&&(this.isEditing=t,this.handleCellEditing())}))},this.componentWillUnmount=()=>{this.unsubscribes.forEach(o=>o()),this.props.grid.removeChild(this.popup),this.cellRender&&this.cellRender.beforeDestroy&&this.cellRender.beforeDestroy(),this.cellEditor&&this.cellEditor.beforeDestroy&&this.cellEditor.beforeDestroy()},this.componentDidUpdate=()=>{this.doRender(),this.bindMetaData()},this.bindMetaData=()=>{this.cell.__isCell=!0,this.cell.__column=this.props.column,this.cell.__row=this.props.row,this.dragHandle&&(this.dragHandle.__dragHandle=!0,this.dragHandle.__column=this.props.column,this.dragHandle.__row=this.props.row),this.filler&&(this.filler.__filler=!0,this.filler.__column=this.props.column,this.filler.__row=this.props.row),this.resizer&&(this.resizer.__resizer=!0,this.resizer.__column=this.props.column,this.resizer.__row=this.props.row)},this.handleCellEditing=()=>{if(!this.isEditing)return void(this.cellEditor&&(B.setClassNames(this.cellContent.current,[Ge]),this.setValue(this.cellEditor.getValue()),this.doRender()));const o=document.createElement("div");B.clean(this.cellContent.current),B.appendClassName(this.cellContent.current,js),this.cellEditor&&this.cellEditor.beforeDestroy&&this.cellEditor.beforeDestroy(),this.cellEditor=new this.options.cellEditor,this.cellEditor.init&&this.cellEditor.init({props:this.options.cellParams,value:this.getValue(!0),column:this.options,row:this.props.row,gird:this.props.grid}),o.appendChild(this.cellEditor.gui()),o.className=sn,this.cellEditor.isPopup()?this.createPopup(o):this.cellContent.current.appendChild(o),this.cellEditor.afterAttached&&this.cellEditor.afterAttached()},this.createPopup=o=>{this.popup||(this.popup=document.createElement("div"),this.popup.className=nn),B.clean(this.popup);const t=this.props.grid.getRootElement().getBoundingClientRect(),e=this.cell.getBoundingClientRect();this.popup.style.left=e.left-t.left+"px",this.popup.style.top=e.top-t.top+"px",this.popup.style.minWidth=e.width+"px",this.popup.style.minHeight=e.height+"px",this.popup.appendChild(o),this.props.grid.appendChild(this.popup)}}get grid(){return this.props.grid}get options(){return this.grid.getColumnOptions(this.props.column,this.props.row)}getValue(o=!1){return o?this.grid.getRawCellValue(this.props.row,this.props.column):this.props.grid.getCellValue(this.props.row,this.props.column)}setValue(o){this.props.grid.setCellValue(this.props.row,this.props.column,o)}doRender(){this.isEditing||(this.options.cellRender?(this.cellRender&&this.cellRender.beforeDestroy&&this.cellRender.beforeDestroy(),this.cellRender=new this.options.cellRender,this.cellRender.init&&this.cellRender.init({props:this.options.cellParams,value:this.getValue(!0),column:this.options,row:this.props.row,gird:this.props.grid}),this.cellContent.current&&(this.props.grid.removeChild(this.popup),B.clean(this.cellContent.current),this.cellContent.current.appendChild(this.cellRender.gui()),this.cellRender.afterAttached&&this.cellRender.afterAttached())):this.cellContent.current&&(this.cellContent.current.textContent=this.getValue()))}render(){let o=this.options.rowDragable===!0;typeof this.options.rowDragable=="function"&&(o=this.options.rowDragable({row:this.props.row,column:this.props.column,grid:this.props.grid}));const t={column:this.props.column,row:this.props.row,grid:this.props.grid},e=it(this.options.cellClass||[],this.options.getCellClass?this.options.getCellClass(t):[],{[Us]:!0,[Ys]:this.state.isSelected,[Js]:this.state.isLeftSelected,[tn]:this.state.isRightSelected,[en]:this.state.isTopSelected,[on]:this.state.isBottomSelected,[Gs]:this.state.isFilling,[Ks]:this.state.isLeftFilling,[qs]:this.state.isRightFilling,[Qs]:this.state.isTopFilling,[Zs]:this.state.isBottomFilling});let s=R({},this.props.style);this.options.cellStyle&&(s=Object.assign({},s,this.options.cellStyle)),this.options.getCellStyle&&(s=Object.assign({},s,this.options.getCellStyle(t))),this.options.flex&&(s.flexGrow=this.options.flex);const n=this.state.fillable!==void 0&&this.state.isBottomSelected&&this.state.isRightSelected;let i=this.grid.state("grid").rowResizable;return typeof i=="function"&&(i=i(this.props.row)),c("div",{ref:r=>this.cell=r,className:e,style:s},o&&c("div",{ref:r=>this.dragHandle=r,className:rn},c("span",{className:"vg-move"})),c("div",{ref:this.cellContent,className:Ge}),!!i&&c("div",{ref:r=>this.resizer=r,className:an}),n&&c("div",{ref:r=>this.filler=r,className:ln}))}});(mt=ot||(ot={})).AUTO="auto",mt.START="start",mt.CENTER="center",mt.END="end",(Ke=q||(q={})).OBSERVED="observed",Ke.REQUESTED="requested",(qe=A||(A={})).Horizontal="horizontal",qe.Vertical="vertical",(Qe=Et||(Et={})).Vertical="onScrollVertical",Qe.Horizontal="onScrollHorizontal";const Ze={[A.Vertical]:Et.Vertical,[A.Horizontal]:Et.Horizontal};var _t,Je,Dt,to;(Je=_t||(_t={})).Vertical="scrollTop",Je.Horizontal="scrollLeft",A.Vertical,_t.Vertical,A.Horizontal,_t.Horizontal,(to=Dt||(Dt={})).Vertical="top",to.Horizontal="left";const Ht={[A.Vertical]:Dt.Vertical,[A.Horizontal]:Dt.Horizontal};var zt,eo;(eo=zt||(zt={})).Vertical="offsetTop",eo.Horizontal="offsetLeft";const oo={[A.Vertical]:zt.Vertical,[A.Horizontal]:zt.Horizontal};var Nt,so;(so=Nt||(Nt={})).Vertical="scrollYNode",so.Horizontal="scrollXNode";const dn={[A.Vertical]:Nt.Vertical,[A.Horizontal]:Nt.Horizontal};class no{constructor({itemCount:t,itemSizeGetter:e}){this.itemSizeGetter=e,this.itemCount=t,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1}updateConfig({itemCount:t,itemSizeGetter:e}){t!=null&&(this.itemCount=t),e!=null&&(this.itemSizeGetter=e)}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(t){if(t<0||t>=this.itemCount){if(this.itemCount===0)return{offset:0,size:0};throw Error(`Requested index ${t} is outside of range 0..${this.itemCount}`)}if(t>this.lastMeasuredIndex){const e=this.getSizeAndPositionOfLastMeasuredItem();let s=e.offset+e.size;for(let n=this.lastMeasuredIndex+1;n<=t;n++){const i=this.itemSizeGetter(n);if(i==null||isNaN(i))throw Error(`Invalid size returned for index ${n} of value ${i}`);this.itemSizeAndPositionData[n]={offset:s,size:i},s+=i}this.lastMeasuredIndex=t}return this.itemSizeAndPositionData[t]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){const t=this.getSizeAndPositionForIndex(Math.max(this.itemCount-1,0));return t.offset+t.size}getUpdatedOffsetForIndex({align:t=ot.START,containerSize:e,currentOffset:s,targetIndex:n}){if(e<=0)return 0;const i=this.getSizeAndPositionForIndex(n),r=i.offset,a=r-e+i.size;let h;switch(t){case ot.END:h=a;break;case ot.CENTER:h=r-(e-i.size)/2;break;case ot.START:h=r;break;default:h=Math.max(a,Math.min(r,s))}const p=this.getTotalSize();return Math.max(0,Math.min(p-e,h))}getVisibleRange({containerSize:t,offset:e,overscanCount:s}){if(this.getTotalSize()===0)return{};const n=e+t;let i=this.findNearestItem(e);if(i===void 0)throw Error(`Invalid offset ${e} specified`);const r=this.getSizeAndPositionForIndex(i);e=r.offset+r.size;let a=i;for(;e<n&&a<this.itemCount-1;)a++,e+=this.getSizeAndPositionForIndex(a).size;return s&&(i=Math.max(0,i-s),a=Math.min(a+s,this.itemCount-1)),{start:i,stop:a}}resetItem(t){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,t-1)}findNearestItem(t){if(isNaN(t))throw Error(`Invalid offset ${t} specified`);t=Math.max(0,t);const e=this.getSizeAndPositionOfLastMeasuredItem(),s=Math.max(0,this.lastMeasuredIndex);return e.offset>=t?this.binarySearch({high:s,low:0,offset:t}):this.exponentialSearch({index:s,offset:t})}binarySearch({low:t,high:e,offset:s}){let n=0,i=0;for(;t<=e;){if(n=t+Math.floor((e-t)/2),i=this.getSizeAndPositionForIndex(n).offset,i===s)return n;i<s?t=n+1:i>s&&(e=n-1)}return t>0?t-1:0}exponentialSearch({index:t,offset:e}){let s=1;for(;t<this.itemCount&&this.getSizeAndPositionForIndex(t).offset<e;)t+=s,s*=2;return this.binarySearch({high:Math.min(t,this.itemCount-1),low:Math.floor(t/2),offset:e})}}function io(o,t,e,...s){let n,i=new Date;return function(...r){let a=new Date;clearTimeout(n),a.getTime()-i.getTime()>=e?(o(...r,...s),i=a):n=setTimeout(()=>{o(...r,...s)},t)}}const un={width:"100%",height:"100%"},cn={overflowY:"auto",overflowX:"hidden",width:"100%",height:"100%",display:"flex"},ro={position:"relative",overflowX:"auto",overflowY:"hidden",flexGrow:1,minHeight:"100%"},pn={position:"relative",height:"100%"},lo={position:"relative",flexShrink:0,boxSizing:"content-box"},gn={height:"100%",width:"100%"},ao={position:"absolute",top:0,left:0,height:"100%",width:"100%"},To=100,Po=100,Bo=3,Lo=1;class Ho extends Mt{constructor(){super(...arguments),this.itemSizeGetter=(t,e)=>s=>this.getSize(e(s),t),this.rowManager=new no({itemCount:this.props.rows.length,itemSizeGetter:this.itemSizeGetter(this.props.rowHeight,t=>this.props.rows[t])}),this.columnManager=new no({itemCount:this.props.columns.length,itemSizeGetter:this.itemSizeGetter(this.props.columnWidth,t=>this.props.columns[t])}),this.rowStyleCache={},this.columnStyleCache={},this.state={offsetLeft:this.props.scrollLeftOffset||this.props.scrollToColumnIndex!=null&&this.getOffsetForColumn(this.props.scrollToColumnIndex)||0,offsetTop:this.props.scrollTopOffset||this.props.scrollToRowIndex!=null&&this.getOffsetForRow(this.props.scrollToRowIndex)||0,scrollChangeReason:q.REQUESTED},this.handleMouseWheel=t=>{t.deltaX!=0&&(t.preventDefault(),t.deltaY==0&&this.props.onWheelHorizontal&&this.props.onWheelHorizontal(t))},this.handleScroll=(t,e)=>{typeof this.props[Ze[e]]=="function"&&this.props[Ze[e]](t);const s=this.getNodeOffset();s[Ht[e]]<0||t.target!==this[dn[e]]||this.state[oo[e]]===s[Ht[e]]||this.setState({[oo[e]]:s[Ht[e]],scrollChangeReason:q.OBSERVED})},this.getRootRef=t=>{this.rootNode=t},this.getScrollYRef=t=>{this.scrollYNode=t,this.props.getScrollYNode&&this.props.getScrollYNode(t)},this.getScrollXRef=t=>{this.scrollXNode=t,this.props.getScrollXNode&&this.props.getScrollXNode(t)},this.getPinnedLeftWidth=()=>this.props.pinnedLeftColumns.reduce((t,e)=>t+this.getSize(e,this.props.columnWidth),0),this.getPinnedRightWidth=()=>this.props.pinnedRightColumns.reduce((t,e)=>t+this.getSize(e,this.props.columnWidth),0)}componentDidMount(){var t,e,s;const{throttleRate:n=To,throttleTimeout:i=Po,scrollLeftOffset:r,scrollToColumnIndex:a,scrollTopOffset:h,scrollToRowIndex:p}=this.props;let l,v;this.onScrollVertical=io(this.handleScroll,i,n,A.Vertical),this.onScrollHorizontal=io(this.handleScroll,i,n,A.Horizontal),(t=this.scrollYNode)==null||t.addEventListener("scroll",this.onScrollVertical,{passive:!0}),(e=this.scrollXNode)==null||e.addEventListener("scroll",this.onScrollHorizontal,{passive:!0}),(s=this.scrollXNode)==null||s.addEventListener("wheel",this.handleMouseWheel,{passive:!1}),r!=null?l=r:a!=null&&(l=this.getOffsetForColumn(a)),h!=null?v=h:p!=null&&(v=this.getOffsetForRow(p)),this.scrollTo({left:l,top:v}),this.forceUpdate()}componentWillReceiveProps(t){const{rows:e,columns:s,rowHeight:n,columnWidth:i,scrollTopOffset:r,scrollLeftOffset:a,scrollToRowAlignment:h,scrollToColumnAlignment:p,scrollToRowIndex:l,scrollToColumnIndex:v}=this.props,w=t.scrollToRowIndex!==l||t.scrollToColumnIndex!==v||t.scrollToRowAlignment!==h||t.scrollToColumnAlignment!==p,m=t.rows!==e||t.columns!==s||t.rowHeight!==n||t.columnWidth!==i;t.rowHeight!==n&&this.rowManager.updateConfig({itemSizeGetter:this.itemSizeGetter(t.rowHeight,S=>t.rows[S])}),t.columnWidth!==i&&this.columnManager.updateConfig({itemSizeGetter:this.itemSizeGetter(t.columnWidth,S=>t.columns[S])}),t.rows!==e&&this.rowManager.updateConfig({itemCount:t.rows.length}),t.columns!==s&&this.columnManager.updateConfig({itemCount:t.columns.length}),m&&this.recomputeSizes(),t.scrollLeftOffset!==a||t.scrollTopOffset!=r?this.setState({offsetLeft:t.scrollLeftOffset||0,offsetTop:t.scrollTopOffset||0,scrollChangeReason:q.REQUESTED}):w?this.setState({offsetLeft:this.getOffsetForColumn(t.scrollToColumnIndex||0,t.scrollToColumnAlignment,t.columns.length),offsetTop:this.getOffsetForRow(t.scrollToRowIndex||0,t.scrollToRowAlignment,t.rows.length),scrollChangeReason:q.REQUESTED}):m&&this.forceUpdate()}componentDidUpdate(t,e){const s=this.scrollXNode.parentNode,n=Math.max(this.scrollXNode.offsetHeight-this.scrollXNode.clientHeight,17);this.scrollXNode.style.height=s.offsetHeight+n+"px";const{offsetLeft:i,offsetTop:r,scrollChangeReason:a}=this.state;e.offsetLeft===i&&e.offsetTop==r||a!==q.REQUESTED||this.scrollTo({left:i,top:r})}componentWillUnmount(){var t,e,s;(t=this.scrollYNode)==null||t.removeEventListener("scroll",this.onScrollVertical),(e=this.scrollXNode)==null||e.removeEventListener("scroll",this.onScrollHorizontal),(s=this.scrollXNode)==null||s.removeEventListener("wheel",this.handleMouseWheel)}scrollTo({top:t,left:e}){t!=null&&this.scrollYNode&&(this.scrollYNode.scrollTop=t),e!=null&&this.scrollXNode&&(this.scrollXNode.scrollLeft=e)}getOffsetForColumn(t,e=this.props.scrollToColumnAlignment,s=this.props.columns.length){var n;return(t<0||t>=s)&&(t=0),this.columnManager.getUpdatedOffsetForIndex({align:e,containerSize:((n=this.scrollXNode)==null?void 0:n.offsetWidth)||0,currentOffset:this.state&&this.state.offsetLeft||0,targetIndex:t})}getOffsetForRow(t,e=this.props.scrollToRowAlignment,s=this.props.rows.length){var n;return(t<0||t>=s)&&(t=0),this.rowManager.getUpdatedOffsetForIndex({align:e,containerSize:((n=this.rootNode)==null?void 0:n.offsetHeight)||0,currentOffset:this.state&&this.state.offsetTop||0,targetIndex:t})}recomputeSizes(t=0,e=0){this.rowStyleCache={},this.columnStyleCache={},this.rowManager.resetItem(t),this.columnManager.resetItem(e)}getSize(t,e){return typeof e=="function"?e(t):typeof e=="number"?e:e[t]}getRowStyle(t){const e=this.props.rows[t],s=this.rowStyleCache[e];if(s)return s;const{size:n,offset:i}=this.rowManager.getSizeAndPositionForIndex(t);return this.rowStyleCache[e]=O(R({},ao),{height:n,transform:`translateY(${i}px)`})}getColumnStyle(t){const e=this.props.columns[t],s=this.columnStyleCache[e];if(s)return s;const{size:n,offset:i}=this.columnManager.getSizeAndPositionForIndex(t);return this.columnStyleCache[e]=O(R({},ao),{width:n,left:i})}getPinnedColumnStyle(t){const e=this.columnStyleCache[t];if(e)return e;const s=this.getSize(t,this.props.columnWidth);return this.columnStyleCache[t]=O(R({},gn),{width:s})}getNodeOffset(){var t,e;return{top:((t=this.scrollYNode)==null?void 0:t.scrollTop)||0,left:((e=this.scrollXNode)==null?void 0:e.scrollLeft)||0}}render(){var t,e;const{style:s,pinnedLeftColumns:n=[],pinnedRightColumns:i=[],overscanRowCount:r=Bo,overscanColumnCount:a=Lo,renderRow:h,renderCell:p}=this.props,l={className:this.props.className,children:this.props.children},{offsetLeft:v,offsetTop:w}=this.state,m=this.rowManager.getVisibleRange({containerSize:((t=this.rootNode)==null?void 0:t.offsetHeight)||0,offset:w,overscanCount:r}),S=this.columnManager.getVisibleRange({containerSize:((e=this.scrollXNode)==null?void 0:e.offsetWidth)||0,offset:v,overscanCount:a}),$=this.columnManager.getTotalSize(),y=this.rowManager.getTotalSize(),z=this.getPinnedLeftWidth(),T=this.getPinnedRightWidth(),u=[],d=[],g=[];if(m.start!=null&&m.stop!=null)for(let C=m.start;C<=m.stop;C++){const _=this.props.rows[C],b=[],x=n.map(I=>p({style:this.getPinnedColumnStyle(I),column:I,row:_})),N=i.map(I=>p({style:this.getPinnedColumnStyle(I),column:I,row:_}));if(S.start!=null&&S.stop!=null)for(let I=S.start;I<=S.stop;I++){const G=this.props.columns[I];b.push(p({style:this.getColumnStyle(I),row:_,column:G}))}const W=this.getRowStyle(C);x.length>0&&d.push(h({style:O(R({},W),{display:"flex"}),row:_,cells:x})),N.length>0&&g.push(h({style:O(R({},W),{display:"flex"}),row:_,cells:N})),u.push(h({style:W,row:_,cells:b}))}return c("div",O(R({ref:this.getRootRef},l),{style:R(R({},un),s)}),c("div",{ref:this.getScrollYRef,style:cn},d.length>0&&c("div",{className:this.props.pinnedLeftClassName,style:O(R({},lo),{width:z,height:y})},d),c("div",{style:O(R({},ro),{overflow:"hidden",height:y})},c("div",{ref:this.getScrollXRef,style:R({},ro)},c("div",{style:O(R({},pn),{width:$})},u))),g.length>0&&c("div",{className:this.props.pinnedRightClassName,style:O(R({},lo),{width:T,height:y})},g)))}}Ho.defaultProps={throttleRate:To,throttleTimeout:Po,overscanRowCount:Bo,overscanColumnCount:Lo};var M={root:"v-grid-root",grid:"v-grid-grid",normalCells:"v-grid-normal-cells",normalCellsViewPort:"v-grid-normal-cells-view-port",normalColumns:"v-grid-normal-columns",pinnedRightCells:"v-grid-pinned-right-cells",pinnedRightColumns:"v-grid-pinned-right-columns",pinnedLeftCells:"v-grid-pinned-left-cells",pinnedLeftColumns:"v-grid-pinned-left-columns",body:"v-grid-body",pinnedTopRows:"v-grid-pinned-top-rows",pinnedBottomRows:"v-grid-pinned-bottom-rows",rowCells:"v-grid-row-cells",cell:"v-grid-cell",noBorder:"v-grid-no-border",horizontalScroll:"v-grid-horizontal-scroll",horizontalRightSpacer:"v-grid-horizontal-right-spacer",horizontalLeftSpacer:"v-grid-horizontal-left-spacer",horizontalScrollView:"v-grid-horizontal-scroll-view",horizontalScrollContainer:"v-grid-horizontal-scroll-container",columnResizer:"v-grid-column-resizer",rowIndicator:"v-grid-row-indicator",rowDragGhost:"v-grid-row-drag-ghost",ghostIcon:"v-grid-ghost-icon",loading:"v-grid-loading",dot:"v-grid-dot",slide:"v-grid-slide"},At=Z(o=>({columns:o.column.columns,overscanColumnCount:o.grid.overscanColumnCount,overscanRowCount:o.grid.overscanRowCount,scrollThrottleRate:o.grid.scrollThrottleRate,pinnedLeftColumns:o.column.pinnedLeftColumns,pinnedRightColumns:o.column.pinnedRightColumns,normalColumns:o.column.normalColumns,defaultRowHeight:o.row.height,rowHeights:o.row.rowHeights}))(U(class extends J{constructor(){super(...arguments),this.renderCell=({row:o,column:t,style:e})=>c(hn,{key:t,row:o,column:t,style:e}),this.renderRow=({row:o,style:t,cells:e})=>c(Xs,{key:o,value:o,style:t},e),this.getActiveCell=(o,t="__isCell")=>{let e,s,n=o.target;for(;n!=this.root;){if(n.__column&&n.__row&&n[t]===!0){e=n.__column,s=n.__row;break}n=n.parentElement}const i=this.props.grid.state("cell").editing||{column:void 0,row:void 0};if(e&&s&&(e!==i.column||s!==i.row))return{column:e,row:s,el:n}},this.handleDbClick=o=>{if(typeof this.props.onCellDbClick!="function")return;const t=this.getActiveCell(o);t&&this.props.onCellDbClick(o,t.el,t.row,t.column)},this.handleMouseDown=o=>{if(typeof this.props.onCellMouseDown!="function")return;if(this.getActiveCell(o,"__dragHandle"))return this.handleDragStart(o,this.getActiveCell(o));if(this.getActiveCell(o,"__resizer"))return this.handleResizeStart(o,this.getActiveCell(o));const t=this.getActiveCell(o,"__filler");if(t)return this.props.onFillerMouseDown(o,t.el,t.row,t.column);const e=this.getActiveCell(o);return e?this.props.onCellMouseDown(o,e.el,e.row,e.column):void 0},this.handleMouseUp=o=>{if(typeof this.props.onCellMouseUp!="function")return;const t=this.getActiveCell(o);t&&this.props.onCellMouseUp(o,t.el,t.row,t.column)},this.handleMouseMove=o=>{if(this.currentDragStartRow)return this.updateDragEndRow(this.getActiveCell(o));if(typeof this.props.onCellMouseMove!="function")return;const t=this.getActiveCell(o);t&&this.props.onCellMouseMove(o,t.el,t.row,t.column)},this.handleResizeStart=(o,t)=>{if(!t)return;const e=this.getRowHeight(t.row);this.props.grid.trigger("beforeRowResizingStart",t.row,e)&&(this.currentResizingRow={row:t.row,height:e,pos:o.clientY},this.rowIndicator.style.display="block",this.rowIndicator.style.height="2px",this.rowIndicator.style.opacity="1",document.addEventListener("mousemove",this.updateRowResizer),document.addEventListener("mouseup",this.handleResizeEnd),this.updateRowResizer(o),this.props.grid.trigger("afterRowResizingStart",t.row,e))},this.updateRowResizer=o=>{const t=this.root.getBoundingClientRect();o.clientY-this.currentResizingRow.pos+this.currentResizingRow.height>=this.props.grid.state("row").minHeight&&(this.rowIndicator.style.top=o.clientY-t.top+"px")},this.handleResizeEnd=o=>{if(document.removeEventListener("mousemove",this.updateRowResizer),document.removeEventListener("mouseup",this.handleResizeEnd),this.currentResizingRow){const{row:t,height:e,pos:s}=this.currentResizingRow,n=this.rowIndicator.getBoundingClientRect().top-s+e,i=this.props.grid.trigger("beforeRowResizingEnd",t,n);i&&this.props.grid.store("row").dispatch("setRowHeight",{row:t,height:n}),this.props.grid.trigger("afterRowResizingEnd",t,i?n:e)}this.rowIndicator.style.opacity="",this.rowIndicator.style.display="none"},this.handleDragStart=(o,t)=>{if(!t||!this.props.grid.trigger("beforeRowDragStart",t.row))return;this.ghost||(this.ghost=document.createElement("div"),this.ghost.className=M.rowDragGhost);const e=this.props.grid.getCellValue(t.row,t.column);this.ghost.innerHTML=`
            <span class="vg-move ${M.ghostIcon}"></span>
            <span>${e}</span>
        `,this.props.grid.appendChild(this.ghost),document.addEventListener("mousemove",this.updateDragGhost),document.addEventListener("mouseup",this.handleDragEnd),this.currentDragStartRow=t.row,this.rowIndicator.style.display="block",this.updateDragEndRow(t),this.updateDragGhost(o),this.props.grid.trigger("afterRowDragStart",t.row)},this.updateDragGhost=o=>{if(!this.ghost)return;const t=this.props.grid.getRootElement().getBoundingClientRect();this.ghost.style.left=o.clientX-t.left+10+"px",this.ghost.style.top=o.clientY-t.top+10+"px"},this.handleDragEnd=()=>{document.removeEventListener("mouseup",this.handleDragEnd),document.removeEventListener("mousemove",this.updateDragGhost),this.props.grid.removeChild(this.ghost),this.rowIndicator.style.display="none";const o=this.currentDragStartRow,t=this.currentDragEndRow;if(this.currentDragStartRow=this.currentDragEndRow=void 0,!this.props.grid.trigger("beforeRowDragEnd",o,t))return;const e=this.props.grid.store("row"),s=e.getRowInternalIndex(o),n=e.getRowInternalIndex(t);s!==void 0&&n!==void 0&&s!=n&&e.sortRows(i=>{return r=i,a=s,h=n,zo(r=[...r],a,h),r;var r,a,h}),this.props.grid.trigger("afterRowDragEnd",o,t)},this.updateDragEndRow=o=>{if(!o)return;const t=this.root.getBoundingClientRect(),e=o.el.parentElement.getBoundingClientRect();this.currentDragEndRow=o.row,this.rowIndicator.style.top=e.top-t.top+"px",this.rowIndicator.style.height=e.height+"px"},this.getRowHeight=o=>this.props.rowHeights[o]?this.props.rowHeights[o]:typeof this.props.defaultRowHeight=="function"?this.props.defaultRowHeight(o):this.props.defaultRowHeight}render(){return c("div",{ref:o=>this.root=o,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseMove:this.handleMouseMove,onDblClick:this.handleDbClick,style:{width:"100%",height:"100%",position:"relative"}},c("div",{ref:o=>this.rowIndicator=o,className:M.rowIndicator}),c(Ho,{rows:this.props.items,rowHeight:this.getRowHeight,columns:this.props.normalColumns,pinnedLeftClassName:M.pinnedLeftCells,pinnedRightClassName:M.pinnedRightCells,pinnedLeftColumns:this.props.pinnedLeftColumns,pinnedRightColumns:this.props.pinnedRightColumns,columnWidth:o=>{const t=this.props.grid.getColumnOptions(o);return Math.max(t==null?void 0:t.width,t==null?void 0:t.minWidth)},throttleRate:this.props.scrollThrottleRate,overscanRowCount:this.props.overscanRowCount,overscanColumnCount:this.props.overscanColumnCount,renderRow:this.renderRow,renderCell:this.renderCell,onWheelHorizontal:this.props.onWheelHorizontal,onScrollHorizontal:this.props.onScrollHorizontal,onScrollVertical:this.props.onScrollVertical,getScrollXNode:this.props.getScrollXNode,getScrollYNode:this.props.getScrollYNode}))}})),fn=Z(o=>({}),o=>({getCoordinate:(t,e)=>o.getCoordinate(t,e),getCoordLocatedRange:t=>o.getCoordLocatedRange(t),hoverRow:t=>o.store("row").dispatch("setHoveredRow",t),selectCells:(t,e)=>o.store("cell").dispatch("selectCells",{start:t,end:e}),setEditing:t=>o.setEditing(t),setFilling:t=>o.store("cell").dispatch("setFilling",t)}))(U(class extends J{constructor(){super(...arguments),this.componentDidMount=()=>{document.addEventListener("mouseup",this.handleMouseUp)},this.componentWillUnmount=()=>{document.removeEventListener("mouseup",this.handleMouseUp)},this.handleCellDbClick=(o,t,e,s)=>{this.props.grid.trigger("beforeCellDbClicked",{row:e,column:s},o,t)!==!1&&(this.props.setEditing({row:e,column:s}),this.props.grid.trigger("afterCellDbClicked",{row:e,column:s},o,t))},this.handleCellMouseDown=(o,t,e,s)=>{if(this.props.grid.trigger("beforeCellMouseDown",{row:e,column:s},o,t)===!1)return;o.stopPropagation(),this.props.grid.stopEditing();const n=this.props.getCoordinate(e,s);if(o.button===et.Right){const i=this.props.grid.getContextMenuItems({row:e,column:s});if(i.length===0||this.props.grid.trigger("beforeContextMenuShow",{row:e,column:s},i)===!1||(this.setState({isMenuVisible:!0,contextMenuItems:i,contextMenuCoord:{x:o.clientX,y:o.clientY}},()=>{this.props.grid.trigger("afterContextMenuShow",{row:e,column:s},i)}),this.props.grid.getCoordLocatedRange(n))||this.props.grid.getSelectedRows().indexOf(e)!==-1)return}else this.hideContextMenu();o.button!==et.Left&&o.button!==et.Right||(this.handleSelectRow(e),this.selectionStart=this.selectionEnd=n,this.isSelecting=!0,this.handleSelectionChanged(),this.props.grid.trigger("afterCellMouseDown",{row:e,column:s},o,t))},this.handleSelectRow=o=>{if(this.currentKey&&this.currentKey.shiftKey){const t=this.props.grid.getSelectedRows(),e=this.props.grid.getRowIndex(t[t.length-1]),s=this.props.grid.getRowIndex(o);return this.props.grid.selectRows(t.concat(this.props.grid.getRowsBetween(e,s)))}if(this.currentKey&&(this.currentKey.ctrlKey||this.currentKey.metaKey))return this.props.grid.appendSelectedRows([o]);this.props.grid.selectRows([o])},this.handleCellMouseMove=(o,t,e,s)=>{var n;if(this.props.grid.trigger("beforeCellMouseMove",{row:e,column:s},o,t)===!1)return;this.props.hoverRow(e);const i=this.props.getCoordinate(e,s);if(this.isSelecting){if(this.selectionEnd&&this.selectionEnd.x==i.x&&this.selectionEnd.y==i.y)return;this.selectionEnd=i,this.handleSelectionChanged()}if(this.isFilling&&!((n=this.props.grid.getColumnOptions(s))!=null&&n.readonly)){if(this.fillingEnd&&this.fillingEnd.x==i.x&&this.fillingEnd.y==i.y)return;this.fillingEnd=i,this.handleFillRangeChanged()}this.props.grid.trigger("afterCellMouseMove",{row:e,column:s},o,t)},this.handleCellFillerMouseDown=(o,t,e,s)=>{if(this.props.grid.trigger("beforeFillerMouseDown",{row:e,column:s},o,t)===!1||o.button!==et.Left)return;const n=this.props.getCoordinate(e,s),i=this.props.getCoordLocatedRange(n);i&&(this.fillingRef=i,this.fillingEnd=n,this.isFilling=!0,this.handleFillRangeChanged(),this.props.grid.trigger("afterFillerMouseDown",{row:e,column:s},o,t))},this.handleMouseUp=()=>{this.isSelecting&&(this.isSelecting=!1),this.isFilling&&(this.isFilling=!1,this.handleFill(new Xe(this.fillingRef,this.fillingEnd,this.props.grid.state("grid").fillable)),this.fillingRef=this.fillingEnd=null,this.handleFillRangeChanged())},this.handleSelectionChanged=()=>{this.props.grid.trigger("beforeSelectionChange",this.selectionStart,this.selectionEnd)!==!1&&(this.props.selectCells(this.selectionStart,this.selectionEnd),this.props.grid.trigger("afterSelectionChange",this.selectionStart,this.selectionEnd))},this.handleFillRangeChanged=()=>{this.props.setFilling(new Xe(this.fillingRef,this.fillingEnd,this.props.grid.state("grid").fillable))},this.handleFill=o=>{if(this.props.grid.trigger("beforeFilling",o)===!1)return;const t=o.getReference();o.chunk(e=>{e.each((s,n)=>{const i=t.getGlobalCoord(n);this.props.grid.setCellValueByCoord(s,this.props.grid.getCellValueByCoord(i))})}),this.props.grid.trigger("afterFilling",o)},this.handleKeyDown=o=>{this.props.grid.trigger("beforeKeyDown",o)!==!1&&(this.currentKey=o,o.key==="c"&&(o.ctrlKey||o.metaKey)?this.props.grid.copySelection():o.key==="v"&&(o.ctrlKey||o.metaKey)&&o.shiftKey?this.props.grid.pasteFromClipboard(!0):o.key==="v"&&(o.ctrlKey||o.metaKey)&&this.props.grid.pasteFromClipboard(),this.props.grid.trigger("afterKeyDown",o))},this.handleKeyPress=o=>{this.props.grid.trigger("beforeKeyPress",o)!==!1&&this.props.grid.trigger("afterKeyPress",o)},this.handleKeyUp=o=>{this.props.grid.trigger("beforeKeyUp",o)!==!1&&(this.currentKey=o,this.props.grid.trigger("afterKeyUp",o))},this.hideContextMenu=()=>{this.state.isMenuVisible&&this.setState({isMenuVisible:!1})}}render(){const o=this.props.grid.state("grid").getContextMenuItems?t=>{t.preventDefault()}:void 0;return c("div",{ref:this.createRef("self"),className:M.body,onMouseLeave:()=>this.props.hoverRow(void 0),onContextMenu:o,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onKeyPress:this.handleKeyPress,onMouseEnter:()=>{var t;return(t=this.refs.self)==null?void 0:t.current.focus()},tabIndex:0},this.state.isMenuVisible&&c(re,{onMenuItemClicked:this.hideContextMenu,onClickOutside:this.hideContextMenu,coord:this.state.contextMenuCoord,items:this.state.contextMenuItems}),c("div",{ref:this.props.pinnedTopRowsRef,className:lt(M.pinnedTopRows,{[M.noBorder]:this.props.pinnedTopRows.length===0})},c(At,{items:this.props.pinnedTopRows,onWheelHorizontal:this.props.onWheelHorizontal,onCellDbClick:this.handleCellDbClick,onCellMouseDown:this.handleCellMouseDown,onCellMouseMove:this.handleCellMouseMove,onFillerMouseDown:this.handleCellFillerMouseDown,getScrollXNode:this.props.getScrollXNode})),c("div",{style:{height:"100%",position:"relative",overflow:"hidden",flexGrow:1}},this.props.normalRows.length>0&&c(At,{items:this.props.normalRows,onWheelHorizontal:this.props.onWheelHorizontal,onCellDbClick:this.handleCellDbClick,onCellMouseDown:this.handleCellMouseDown,onCellMouseMove:this.handleCellMouseMove,onFillerMouseDown:this.handleCellFillerMouseDown,getScrollXNode:this.props.getScrollXNode,getScrollYNode:this.props.getScrollYNode})),c("div",{ref:this.props.pinnedBottomRowsRef,className:lt(M.pinnedBottomRows,{[M.noBorder]:this.props.pinnedBottomRows.length===0})},c(At,{items:this.props.pinnedBottomRows,onWheelHorizontal:this.props.onWheelHorizontal,onCellDbClick:this.handleCellDbClick,onCellMouseDown:this.handleCellMouseDown,onFillerMouseDown:this.handleCellFillerMouseDown,onCellMouseMove:this.handleCellMouseMove,getScrollXNode:this.props.getScrollXNode})))}}));function mn(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var st,Ut,jt,Yt,Rt,Ao,yt,Gt,Kt,qt,$o,Qt,Zt,Fo,Vo,ho=!1;function L(){if(!ho){ho=!0;var o=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(o),e=/(Mac OS X)|(Windows)|(Linux)/.exec(o);if(Qt=/\b(iPhone|iP[ao]d)/.exec(o),Zt=/\b(iP[ao]d)/.exec(o),qt=/Android/i.exec(o),Fo=/FBAN\/\w+;/i.exec(o),Vo=/Mobile/i.exec(o),$o=!!/Win64/.exec(o),t){(st=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN)&&document&&document.documentMode&&(st=document.documentMode);var s=/(?:Trident\/(\d+.\d+))/.exec(o);Ao=s?parseFloat(s[1])+4:st,Ut=t[2]?parseFloat(t[2]):NaN,jt=t[3]?parseFloat(t[3]):NaN,(Yt=t[4]?parseFloat(t[4]):NaN)?(t=/(?:Chrome\/(\d+\.\d+))/.exec(o),Rt=t&&t[1]?parseFloat(t[1]):NaN):Rt=NaN}else st=Ut=jt=Rt=Yt=NaN;if(e){if(e[1]){var n=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(o);yt=!n||parseFloat(n[1].replace("_","."))}else yt=!1;Gt=!!e[2],Kt=!!e[3]}else yt=Gt=Kt=!1}}var Wo,Jt={ie:function(){return L()||st},ieCompatibilityMode:function(){return L()||Ao>st},ie64:function(){return Jt.ie()&&$o},firefox:function(){return L()||Ut},opera:function(){return L()||jt},webkit:function(){return L()||Yt},safari:function(){return Jt.webkit()},chrome:function(){return L()||Rt},windows:function(){return L()||Gt},osx:function(){return L()||yt},linux:function(){return L()||Kt},iphone:function(){return L()||Qt},mobile:function(){return L()||Qt||Zt||qt||Vo},nativeApp:function(){return L()||Fo},android:function(){return L()||qt},ipad:function(){return L()||Zt}},_n=Jt,wt=!(typeof window>"u"||!window.document||!window.document.createElement),Xo={canUseDOM:wt,canUseWorkers:typeof Worker<"u",canUseEventListeners:wt&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:wt&&!!window.screen,isInWorker:!wt};Xo.canUseDOM&&(Wo=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);var wn=_n,vn=function(o,t){if(!Xo.canUseDOM||t&&!("addEventListener"in document))return!1;var e="on"+o,s=e in document;if(!s){var n=document.createElement("div");n.setAttribute(e,"return;"),s=typeof n[e]=="function"}return!s&&Wo&&o==="wheel"&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s};function Uo(o){var t=0,e=0,s=0,n=0;return"detail"in o&&(e=o.detail),"wheelDelta"in o&&(e=-o.wheelDelta/120),"wheelDeltaY"in o&&(e=-o.wheelDeltaY/120),"wheelDeltaX"in o&&(t=-o.wheelDeltaX/120),"axis"in o&&o.axis===o.HORIZONTAL_AXIS&&(t=e,e=0),s=10*t,n=10*e,"deltaY"in o&&(n=o.deltaY),"deltaX"in o&&(s=o.deltaX),(s||n)&&o.deltaMode&&(o.deltaMode==1?(s*=40,n*=40):(s*=800,n*=800)),s&&!t&&(t=s<1?-1:1),n&&!e&&(e=n<1?-1:1),{spinX:t,spinY:e,pixelX:s,pixelY:n}}Uo.getEventType=function(){return wn.firefox()?"DOMMouseScroll":vn("wheel")?"wheel":"mousewheel"};var Cn=Uo,Rn=Z(o=>({loading:o.grid.loading,width:o.grid.width,height:o.grid.height,normalRows:o.row.normalRows,pinnedTopRows:o.row.pinnedTopRows,pinnedBottomRows:o.row.pinnedBottomRows}))(U(class extends ie{constructor(){super(...arguments),this.unsubscribes=[],this.scrollXNodes=[],this.componentDidMount=()=>{this.unsubscribes.push(this.props.grid.getRoot().subscribeAny(()=>{this.resize()})),document.addEventListener("click",this.handleClickOutside)},this.componentDidUpdate=()=>{this.resize()},this.componentWillUnmount=()=>{this.unsubscribes.forEach(o=>o()),document.removeEventListener("click",this.handleClickOutside)},this.handleClickOutside=o=>{var t;(t=this.refs.root)!=null&&t.current.contains(o.target)||(this.props.grid.getSelectedRows().length>0&&this.props.grid.selectRows([]),this.props.grid.state("cell").selections.length>0&&this.props.grid.selectCells(null,null),this.props.grid.state("cell").editing&&this.props.grid.stopEditing())},this.getColumnOptions=o=>this.props.grid.getColumnOptions(o),this.handleColumnResizeStart=(o,t,e)=>{if(this.props.grid.trigger("beforeColumnResizingStart",o,t)===!1)return;document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mousemove",this.handleMouseMove);const s=e.pageX-this.refs.root.current.getBoundingClientRect().left;this.refs.columnResizer.current.style.left=s+"px",this.refs.columnResizer.current.style.width="2px",this.resizingColumn={field:o,width:t,pos:e.clientX},this.props.grid.trigger("afterColumnResizingStart",o,t)},this.handleMouseUp=o=>{if(document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("mousemove",this.handleMouseMove),this.refs.columnResizer.current.style.left="0px",this.refs.columnResizer.current.style.width="0px",this.resizingColumn){const t=o.clientX-this.resizingColumn.pos+this.resizingColumn.width,e=this.getColumnOptions(this.resizingColumn.field).minWidth,s={field:this.resizingColumn.field,width:Math.max(t,e)},n=this.props.grid.trigger("beforeColumnResizingEnd",s.field,t);n&&this.props.grid.store("column").dispatch("updateColumnWidth",s),this.props.grid.trigger("afterColumnResizingEnd",s.field,n?s.width:this.resizingColumn.width)}},this.handleMouseMove=o=>{const t=o.pageX-this.refs.root.current.getBoundingClientRect().left;this.refs.columnResizer.current.style.left=t+"px"},this.getScrollXNode=o=>{this.scrollXNodes.push(o)},this.handleHorizontalWheel=o=>{const t=Cn(o);this.horizontalScrollbar.scrollLeft+=t.pixelX},this.handleHorizontalScroll=o=>{const t=o.target.scrollLeft;this.scrollXNodes.forEach(e=>{e.scrollLeft=t}),this.refs.headerContainer.current.style.transform=`translateX(-${t}px)`}}resize(){var o,t,e,s,n,i,r,a;const h=((o=this.scrollYNode)==null?void 0:o.offsetWidth)-((t=this.scrollYNode)==null?void 0:t.clientWidth)||0;let p=0;this.refs.headerContainer.current.scrollWidth>this.refs.normalColumns.current.clientWidth&&(p=ps()?17:this.refs.horizontalScrollContainer.current.offsetHeight);const l=((s=(e=this.refs.headerContainer)==null?void 0:e.current)==null?void 0:s.scrollWidth)||0;this.refs.header.current.style.paddingRight=h+"px",this.refs.pinnedTopRows.current.style.paddingRight=h+"px",this.refs.pinnedBottomRows.current.style.paddingRight=h+"px",this.refs.horizontalScrollWrapper.current.style.height=p+"px",this.refs.horizontalScrollWrapper.current.style.display=p>0?"":"none",this.refs.horizontalScrollContainer.current.style.height=p+"px",this.refs.horizontalScrollContainer.current.style.width=l+"px",this.refs.horizontalLeftSpacer.current.style.width=(((i=(n=this.refs.pinnedLeftColumns)==null?void 0:n.current)==null?void 0:i.scrollWidth)||0)+"px",this.refs.horizontalRightSpacer.current.style.width=(((a=(r=this.refs.pinnedRightColumns)==null?void 0:r.current)==null?void 0:a.offsetWidth)||0)+h+"px"}render(){const o={width:this.props.width,height:this.props.height};return c("div",{ref:this.createRef("root"),className:M.root,style:o},c("div",{className:M.grid},c(Vs,{headerRef:this.createRef("header"),headerContainerRef:this.createRef("headerContainer"),normalColumnsRef:this.createRef("normalColumns"),pinnedLeftColumnsRef:this.createRef("pinnedLeftColumns"),pinnedRightColumnsRef:this.createRef("pinnedRightColumns"),handleColumnResizeStart:this.handleColumnResizeStart}),c(fn,{pinnedTopRows:this.props.pinnedTopRows,pinnedBottomRows:this.props.pinnedBottomRows,normalRows:this.props.normalRows,onWheelHorizontal:this.handleHorizontalWheel,pinnedTopRowsRef:this.createRef("pinnedTopRows"),pinnedBottomRowsRef:this.createRef("pinnedBottomRows"),getScrollXNode:this.getScrollXNode,getScrollYNode:t=>this.scrollYNode=t}),c("div",{ref:this.createRef("horizontalScrollWrapper"),className:M.horizontalScroll},c("div",{ref:this.createRef("horizontalLeftSpacer"),className:M.horizontalLeftSpacer}),c("div",{ref:t=>this.horizontalScrollbar=t,className:M.horizontalScrollView,onScroll:this.handleHorizontalScroll},c("div",{ref:this.createRef("horizontalScrollContainer"),className:M.horizontalScrollContainer})),c("div",{ref:this.createRef("horizontalRightSpacer"),className:M.horizontalRightSpacer})),c("div",{ref:this.createRef("columnResizer"),className:M.columnResizer}),this.props.loading&&c("div",{className:M.loading},c("div",{className:M.spinner},c("div",{className:M.dot}),c("div",{className:M.dot}),c("div",{className:M.dot}),c("div",{className:M.dot}),c("div",{className:M.dot})))))}}));function yn(o){const[t,e]=bo({destroyed:!1});return xo(()=>o.grid.store("grid").subscribe("destroy",()=>{e({destroyed:!0})}),[]),!t.destroyed&&c(us,{grid:o.grid},c(Rn,null))}function bn(o,t){yo(c(yn,{grid:o}),t)}class ut{constructor(t,e){this._listeners=t,this._actions={},this._anyListeners=[],this._state=e||{}}getState(){return this._state}subscribeAny(t){return this._anyListeners.push(t),()=>{this._anyListeners.splice(this._anyListeners.indexOf(t),1)}}subscribe(t,e){return this._listeners[t].push(e),()=>{this._listeners[t].splice(this._listeners[t].indexOf(e),1)}}handle(t,e){return this._actions[t]=e,this}dispatch(t,e){const s=this._actions[t];if(!s)return;const n=s(this._state,e);if(n!==this._state){const i=this._state;this._state=n,this._listeners[t].forEach(r=>r(e,n,i)),this._anyListeners.forEach(r=>r(e,n,i))}}}class xn extends ut{constructor(t){super(Object.keys(t).reduce((e,s)=>(e[s]=[],e),{}),Object.keys(t).reduce((e,s)=>(e[s]=t[s].getState(),e),{})),this.stores=t,Object.keys(t).forEach(e=>{t[e].subscribeAny(()=>{this.dispatch(e,void 0)}),this.handle(e,s=>(s[e]=t[e].getState(),R({},s)))})}store(t){return this.stores[t]}state(t){return this._state[t]}}var te={exports:{}};(function(o,t){function e(u){return typeof u!="object"||"toString"in u?u:Object.prototype.toString.call(u).slice(8,-1)}Object.defineProperty(t,"__esModule",{value:!0});var s=typeof process=="object"&&!0;function n(u,d){if(!u)throw s?new Error("Invariant failed"):new Error(d())}t.invariant=n;var i=Object.prototype.hasOwnProperty,r=Array.prototype.splice,a=Object.prototype.toString;function h(u){return a.call(u).slice(8,-1)}var p=Object.assign||function(u,d){return l(d).forEach(function(g){i.call(d,g)&&(u[g]=d[g])}),u},l=typeof Object.getOwnPropertySymbols=="function"?function(u){return Object.keys(u).concat(Object.getOwnPropertySymbols(u))}:function(u){return Object.keys(u)};function v(u){return Array.isArray(u)?p(u.constructor(u.length),u):h(u)==="Map"?new Map(u):h(u)==="Set"?new Set(u):u&&typeof u=="object"?p(Object.create(Object.getPrototypeOf(u)),u):u}var w=function(){function u(){this.commands=p({},m),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(d,g){return d===g},this.update.newContext=function(){return new u().update}}return Object.defineProperty(u.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(d){this.update.isEquals=d},enumerable:!0,configurable:!0}),u.prototype.extend=function(d,g){this.commands[d]=g},u.prototype.update=function(d,g){var C=this,_=typeof g=="function"?{$apply:g}:g;Array.isArray(d)&&Array.isArray(_)||n(!Array.isArray(_),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),n(typeof _=="object"&&_!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(C.commands).join(", ")+"."});var b=d;return l(_).forEach(function(x){if(i.call(C.commands,x)){var N=d===b;b=C.commands[x](_[x],b,_,d),N&&C.isEquals(b,d)&&(b=d)}else{var W=h(d)==="Map"?C.update(d.get(x),_[x]):C.update(d[x],_[x]),I=h(b)==="Map"?b.get(x):b[x];C.isEquals(W,I)&&(W!==void 0||i.call(d,x))||(b===d&&(b=v(d)),h(b)==="Map"?b.set(x,W):b[x]=W)}}),b},u}();t.Context=w;var m={$push:function(u,d,g){return $(d,g,"$push"),u.length?d.concat(u):d},$unshift:function(u,d,g){return $(d,g,"$unshift"),u.length?u.concat(d):d},$splice:function(u,d,g,C){return function(_,b){n(Array.isArray(_),function(){return"Expected $splice target to be an array; got "+e(_)}),z(b.$splice)}(d,g),u.forEach(function(_){z(_),d===C&&_.length&&(d=v(C)),r.apply(d,_)}),d},$set:function(u,d,g){return function(C){n(Object.keys(C).length===1,function(){return"Cannot have more than one key in an object with $set"})}(g),u},$toggle:function(u,d){y(u,"$toggle");var g=u.length?v(d):d;return u.forEach(function(C){g[C]=!d[C]}),g},$unset:function(u,d,g,C){return y(u,"$unset"),u.forEach(function(_){Object.hasOwnProperty.call(d,_)&&(d===C&&(d=v(C)),delete d[_])}),d},$add:function(u,d,g,C){return T(d,"$add"),y(u,"$add"),h(d)==="Map"?u.forEach(function(_){var b=_[0],x=_[1];d===C&&d.get(b)!==x&&(d=v(C)),d.set(b,x)}):u.forEach(function(_){d!==C||d.has(_)||(d=v(C)),d.add(_)}),d},$remove:function(u,d,g,C){return T(d,"$remove"),y(u,"$remove"),u.forEach(function(_){d===C&&d.has(_)&&(d=v(C)),d.delete(_)}),d},$merge:function(u,d,g,C){var _,b;return _=d,n((b=u)&&typeof b=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+e(b)}),n(_&&typeof _=="object",function(){return"update(): $merge expects a target of type 'object'; got "+e(_)}),l(u).forEach(function(x){u[x]!==d[x]&&(d===C&&(d=v(C)),d[x]=u[x])}),d},$apply:function(u,d){var g;return n(typeof(g=u)=="function",function(){return"update(): expected spec of $apply to be a function; got "+e(g)+"."}),u(d)}},S=new w;function $(u,d,g){n(Array.isArray(u),function(){return"update(): expected target of "+e(g)+" to be an array; got "+e(u)+"."}),y(d[g],g)}function y(u,d){n(Array.isArray(u),function(){return"update(): expected spec of "+e(d)+" to be an array; got "+e(u)+". Did you forget to wrap your parameter in an array?"})}function z(u){n(Array.isArray(u),function(){return"update(): expected spec of $splice to be an array of arrays; got "+e(u)+". Did you forget to wrap your parameters in an array?"})}function T(u,d){var g=h(u);n(g==="Map"||g==="Set",function(){return"update(): "+e(d)+" expects a target of type Set or Map; got "+e(g)})}t.isEquals=S.update.isEquals,t.extend=S.extend,t.default=S.update,t.default.default=o.exports=p(t.default,t)})(te,te.exports);var E=mn(te.exports);const Sn={width:"100%",height:"100%",overscanRowCount:5,overscanColumnCount:2};class Mn extends ut{constructor(t){super({setLoading:[],destroy:[]},Object.assign({},Sn,t)),this.handle("setLoading",(e,s)=>E(e,{loading:{$set:s}})),this.handle("destroy",e=>E(e,{destroyed:{$set:!0}}))}destroy(){this.dispatch("destroy",void 0)}}const En={rows:[],rowIndexes:{},pinnedTopRows:[],pinnedBottomRows:[],normalRows:[],selectedRows:[],height:28,minHeight:20,rowHeights:{}};class Dn extends ut{constructor(t){super({setCellValue:[],setPinnedBottomRows:[],setPinnedTopRows:[],takePinnedRows:[],setHoveredRow:[],selectRows:[],setRows:[],appendRowsBefore:[],takeRows:[],clear:[],setBaseHeight:[],setRowHeight:[]},Object.assign({},En,t)),this.handle("setCellValue",(e,{row:s,column:n,value:i})=>{const r=this.getRowInternalIndex(s);return r===void 0?e:E(e,{rows:{[r]:{[n]:{$set:i}}}})}),this.handle("setRows",(e,s)=>{const n={};s.forEach((p,l)=>{n[p.id]=l});const i=Object.keys(n),r=Te(i,e.pinnedTopRows),a=Te(i,e.pinnedBottomRows),h=P(i,r,a);return E(e,{rows:{$set:s},rowIndexes:{$set:n},pinnedTopRows:{$set:r},pinnedBottomRows:{$set:a},normalRows:{$set:h},selectedRows:{$set:P(e.selectedRows,i)}})}),this.handle("appendRowsBefore",(e,{index:s,rows:n})=>{const i=this.getRowIdByIndex(s);let r=this.getRowInternalIndex(i)||0;n=n.filter(h=>{const p=e.rowIndexes[h.id];return p===void 0||(e.rows[p]=h,!1)}),r=Math.max(r,0),n=[...e.rows.slice(0,r),...n,...e.rows.slice(r,e.rows.length)];const a={};return n.forEach((h,p)=>{a[h.id]=p}),this.isPinnedTop(i)?E(e,{rows:{$set:n},rowIndexes:{$set:a},pinnedTopRows:{$set:[...e.pinnedTopRows.slice(0,s),...P(n.map(h=>h.id),e.pinnedTopRows),...e.pinnedTopRows.slice(s,e.pinnedTopRows.length)]}}):(s-=this._state.pinnedTopRows.length,this.isPinnedBottom(i)?(s-=this._state.normalRows.length,E(e,{rows:{$set:n},rowIndexes:{$set:a},pinnedBottomRows:{$set:[...e.pinnedBottomRows.slice(0,s),...P(n.map(h=>h.id),e.pinnedBottomRows),...e.pinnedBottomRows.slice(s,e.pinnedBottomRows.length)]}})):(s=Math.max(s,0),E(e,{rows:{$set:n},rowIndexes:{$set:a},normalRows:{$set:[...e.normalRows.slice(0,s),...P(n.map(h=>h.id),e.normalRows),...e.normalRows.slice(s,e.normalRows.length)]}})))}),this.handle("takeRows",(e,s)=>{s=s.filter(r=>e.rowIndexes[r]!==void 0);const n=e.rows.filter(r=>s.indexOf(r.id)===-1),i={};return n.forEach((r,a)=>{i[r.id]=a}),E(e,{pinnedTopRows:{$set:P(e.pinnedTopRows,s)},pinnedBottomRows:{$set:P(e.pinnedBottomRows,s)},normalRows:{$set:P(e.normalRows,s)},rows:{$set:n},rowIndexes:{$set:i}})}),this.handle("setHoveredRow",(e,s)=>s===void 0||this.getRowIndex(s)!==-1?E(e,{hoveredRow:{$set:s}}):e),this.handle("selectRows",(e,s)=>(s=this.getValidRows(s),E(e,{selectedRows:{$set:s}}))),this.handle("setPinnedTopRows",(e,s)=>(s=this.getValidRows(s),E(e,{pinnedTopRows:{$set:s},pinnedBottomRows:{$set:P(e.pinnedBottomRows,s)},normalRows:{$set:P(e.normalRows,s)}}))),this.handle("setPinnedBottomRows",(e,s)=>(s=this.getValidRows(s),E(e,{pinnedTopRows:{$set:P(e.pinnedTopRows,s)},pinnedBottomRows:{$set:s},normalRows:{$set:P(e.normalRows,s)}}))),this.handle("takePinnedRows",(e,s)=>{s=this.getValidRows(s);const n=P(e.pinnedTopRows,s),i=P(e.pinnedBottomRows,s),r=P(e.rows.map(a=>a.id),n,i);return E(e,{pinnedTopRows:{$set:n},pinnedBottomRows:{$set:i},normalRows:{$set:r}})}),this.handle("clear",e=>E(e,{rows:{$set:{}},pinnedTopRows:{$set:[]},pinnedBottomRows:{$set:[]},normalRows:{$set:[]},hoveredRow:{$set:void 0},selectedRows:{$set:[]}})),this.handle("setBaseHeight",(e,s)=>E(e,{height:{$set:s}})),this.handle("setRowHeight",(e,{row:s,height:n})=>E(e,{rowHeights:{[s]:{$set:n}}}))}getValidRows(t){return t.filter((e,s)=>this.getRowIndex(e)!==-1&&t.indexOf(e,0)===s)}getRowInternalIndex(t){return this._state.rowIndexes[t]}appendRowsBefore(t,e){return this.dispatch("appendRowsBefore",{index:t,rows:e})}appendRows(t){return this.dispatch("appendRowsBefore",{index:this._state.pinnedTopRows.length+this._state.normalRows.length,rows:t})}selectRows(t){return this.dispatch("selectRows",t)}appendSelectedRows(t){return t=[...this._state.selectedRows,...t],this.dispatch("selectRows",t)}takeSelectedRow(t){const e=this._state.selectedRows.indexOf(t);if(e!==-1)return this.dispatch("selectRows",E(this._state.selectedRows,{$splice:[[e,1]]}))}setPinnedTopRows(t){return this.dispatch("setPinnedTopRows",t)}appendPinnedTopRows(t){return t=[...this._state.pinnedTopRows,...t],this.dispatch("setPinnedTopRows",t)}setPinnedBottomRows(t){return this.dispatch("setPinnedBottomRows",t)}appendPinnedBottomRows(t){return t=[...this._state.pinnedBottomRows,...t],this.dispatch("setPinnedBottomRows",t)}takePinnedRows(t){return this.dispatch("takePinnedRows",t)}isPinnedTop(t){return this._state.pinnedTopRows.indexOf(t)!==-1}isPinnedBottom(t){return this._state.pinnedBottomRows.indexOf(t)!==-1}isPinnedRow(t){return this.isPinnedTop(t)||this.isPinnedBottom(t)}getPinnedTopRows(){return this._state.pinnedTopRows}getPinnedBottomRows(){return this._state.pinnedBottomRows}getRowIds(){return this._state.normalRows}getRowIdByIndex(t){return t<this._state.pinnedTopRows.length?this._state.pinnedTopRows[t]:(t-=this._state.pinnedTopRows.length)<this._state.normalRows.length?this._state.normalRows[t]:(t-=this._state.normalRows.length,this._state.pinnedBottomRows[t])}getRowIndex(t){let e=this._state.pinnedTopRows.indexOf(t);return e!==-1?e:(e=this._state.normalRows.indexOf(t),e!==-1?e+this._state.pinnedTopRows.length:(e=this._state.pinnedBottomRows.indexOf(t),e!==-1?e+this._state.pinnedTopRows.length+this._state.normalRows.length:e))}getRowDataByIndex(t){return this.getRowData(this.getRowIdByIndex(t))}getRowData(t){return this._state.rows[this.getRowInternalIndex(t)]}getRawCellValue(t,e){const s=this.getRowInternalIndex(t);if(s!==void 0)return e==="#"?s+1:this._state.rows[s][e]}getRowsBetween(t,e){const s=Math.min(t,e),n=Math.max(t,e),i=[];for(let r=s;r<=n;r++){const a=this.getRowIdByIndex(r);a!==void 0&&i.push(a)}return i}sortRows(t){return this.dispatch("setRows",t(this._state.rows))}}const zn={selections:[]};class Nn extends ut{constructor(t){super({selectCells:[],setEditing:[],setFilling:[]},Object.assign({},zn,t)),this.handle("selectCells",(e,s)=>s&&s.start&&s.end?O(R({},e),{selections:[new le(s.start,s.end)]}):O(R({},e),{selections:[]})),this.handle("setEditing",(e,s)=>O(R({},e),{editing:s})),this.handle("setFilling",(e,s)=>O(R({},e),{filling:s}))}setEditing(t){this.dispatch("setEditing",t)}stopEditing(){this.dispatch("setEditing",void 0)}getCoordLocatedRange(t){for(let e=0;e<this._state.selections.length;e++)if(this._state.selections[e].contains(t))return this._state.selections[e]}}function jo(o,t){return(o=It(o)).forEach((e,s)=>{Array.isArray(e.children)?o[s]=O(R({},e),{children:jo(e.children,t)}):o[s]=Object.assign({},t,e)}),o}function It(o){const t=[];return o.forEach(e=>{if(Array.isArray(e.children)){const s=It(e.children);t.push(O(R({},e),{children:s}))}else t.push(R({},e))}),t}function Yo(o,t=1){var e=t;for(let s=0;s<o.length;s++){const n=o[s];if(Array.isArray(n.children)&&n.children.length>0){const i=Yo(n.children,t+1);i>e&&(e=i)}}return e}function ee(o,t,e){return e==null&&(e=Eo()),t==1?o:Array.isArray(o.children)?(o.id===void 0&&(o.id=String(e())),o.children=o.children.map(s=>ee(s,t-1,e)),o):{id:String(e()),isPadding:!0,headerName:"",children:[ee(o,t-1,e)]}}function In(o){const t=Yo(o),e=Eo();return o.map(s=>ee(s,t,e))}function Go(o){let t=[],e={},s=[],n=[];return o.forEach(i=>{const r=i;if(!Array.isArray(r.children))return void s.push(i);if(r.children.length==0)return;t.push(r.id);const a=Go(r.children);var h,p;e=Object.assign(e,{[r.id]:{id:r.id,headerName:r.headerName,columns:a.columns.map(l=>l.field),groups:Do(a.groups.flat()),collapsed:r.collapsed,collapsible:r.collapsible}},a.groupsData),r.collapsed&&a.columns.slice(1).forEach(l=>{l.visible=!1}),s=s.concat(a.columns),n.length==0?n=a.groups:(h=n,p=a.groups,n=h.map((l,v)=>h[v].concat(p[v])))}),t.length==0?{groups:[],columns:s,groupsData:e}:{groups:[t,...n],columns:s,groupsData:e}}const kn={columnsDef:[],pinnedLeftColumns:[],pinnedRightColumns:[],normalColumns:[],columns:{},groups:[],groupsData:{},height:30},On={width:200,minWidth:100,visible:!0};class Tn extends ut{constructor(t){super({updateColumnPinned:[],updateColumnWidth:[],updateColumnVisible:[],updateColumnName:[],updateGroupCollapsed:[],updateGroupName:[],setColumns:[],setHeight:[]},Object.assign({},kn,t)),this.setColumns=(e,s={})=>{let n=[],i=[],r=[],a={};return e.forEach(h=>{h=Object.assign({},s,h),a[h.field]=h,h.visible&&(h.pinned=="left"?n.push(h.field):h.pinned=="right"?i.push(h.field):r.push(h.field))}),{pinnedLeftColumns:n,pinnedRightColumns:i,normalColumns:r,columns:a}},this.handle("updateColumnPinned",(e,{field:s,pinned:n})=>{const i=E(e,{columns:{[s]:{pinned:{$set:n}}}});return R(R({},i),this.setColumns(Object.values(i.columns)))}),this.handle("updateColumnVisible",(e,{field:s,visible:n})=>{const i=E(e,{columns:{[s]:{visible:{$set:n}}}});return R(R({},i),this.setColumns(Object.values(i.columns)))}),this.handle("updateColumnWidth",(e,{field:s,width:n,flex:i})=>E(e,i!==void 0?{columns:{[s]:{flex:{$set:i}}}}:{columns:{[s]:{width:{$set:n}}}})),this.handle("updateColumnName",(e,{field:s,name:n})=>E(e,{columns:{[s]:{headerName:{$set:n}}}})),this.handle("setColumns",(e,{columns:s,defaultOptions:n})=>{const i=Object.assign({},On,n),r=Go(In(It(s))),a=this.setColumns(r.columns,i);return E(e,{columnsDef:{$set:jo(s,i)},pinnedLeftColumns:{$set:a.pinnedLeftColumns},pinnedRightColumns:{$set:a.pinnedRightColumns},normalColumns:{$set:a.normalColumns},columns:{$set:a.columns},groups:{$set:r.groups},groupsData:{$set:r.groupsData}})}),this.handle("updateGroupCollapsed",(e,{group:s,collapsed:n})=>{const i=(h,p)=>{const l={};return h.columns.forEach((v,w)=>{l[v]={visible:{$set:w===0||!p}}}),l};let r=i(e.groupsData[s],n);n===!1&&e.groupsData[s].groups.forEach(h=>{r=Object.assign({},r,i(e.groupsData[h],e.groupsData[h].collapsed))});const a=E(e,{groupsData:{[s]:{collapsed:{$set:n}}},columns:r});return R(R({},a),this.setColumns(Object.values(a.columns)))}),this.handle("updateGroupName",(e,{group:s,name:n})=>E(e,{groupsData:{[s]:{headerName:{$set:n}}}})),this.handle("setHeight",(e,s)=>E(e,{height:{$set:s}}))}getColumnOptions(t){return this._state.columns[t]}getColumnOptionsByIndex(t){return this._state.columns[this.getColumnByIndex(t)]}getColumnIndex(t){const e=this._state.columns[t];if(!e)return-1;let s=-1;return e.pinned==="left"?s=this._state.pinnedLeftColumns.findIndex(n=>n==t):e.pinned==="right"?(s=this._state.pinnedRightColumns.findIndex(n=>n==t),s!==-1&&(s=s+this._state.pinnedLeftColumns.length+this._state.normalColumns.length)):e.pinned===void 0&&(s=this._state.normalColumns.findIndex(n=>n==t),s!==-1&&(s+=this._state.pinnedLeftColumns.length)),s}getColumnByIndex(t){return t<this._state.pinnedLeftColumns.length?this._state.pinnedLeftColumns[t]:(t-=this._state.pinnedLeftColumns.length)<this._state.normalColumns.length?this._state.normalColumns[t]:(t-=this._state.normalColumns.length,this._state.pinnedRightColumns[t])}getGroupWidth(t,e=[]){const s=this._state.groupsData[t];if(!s)return{width:0,flex:void 0};let n,i=0;return s.columns.forEach(r=>{if(e.length>0&&e.indexOf(r)===-1)return;const a=this.getColumnOptions(r);i+=Math.max((a==null?void 0:a.width)||0,(a==null?void 0:a.minWidth)||0)||0,a!=null&&a.flex&&(n=a==null?void 0:a.flex)}),{width:i,flex:n}}toggleGroupCollapsed(t){return this.dispatch("updateGroupCollapsed",{group:t,collapsed:!this._state.groupsData[t].collapsed})}lookForColumn(t,e){for(let s=0;s<t.length;s++){const n=t[s];if(n.children){const i=this.lookForColumn(n.children,e);if(i)return i}if(n.field===e)return{parent:t,index:s}}}moveColumn(t,e){const s=It(this._state.columnsDef),n=this.lookForColumn(s,t),i=this.lookForColumn(s,e);if(n.parent==i.parent)zo(n.parent,n.index,i.index);else{const r=n.parent.splice(n.index,1)[0];i.parent.splice(i.index,0,r)}this.dispatch("setColumns",{columns:s})}}class Pn{constructor(t,e,s){var n;this.grid=t,this.actions=s,this.events=(n=e,JSON.parse(JSON.stringify(n)))}on(t,e){return this.actions[t]!==void 0?this.actions[t](this.grid,e):(this.events[t].push(e),()=>{this.events[t].splice(this.events[t].indexOf(e),1)})}trigger(t,...e){for(let s=0;s<this.events[t].length;s++)if((0,this.events[t][s])(...e)===!1)return!1;return!0}}const Bn={selectedCellsChanged:(o,t)=>o.store("cell").subscribe("selectCells",(e,s)=>{t(new le(e.start,e.end),s.selections)}),editingCellChanged:(o,t)=>o.store("cell").subscribe("setEditing",(e,s,n)=>{t(e,n.editing)}),fillingRangeChanged:(o,t)=>o.store("cell").subscribe("setFilling",(e,s,n)=>{t(e,n.filling)}),cellValueChanged:(o,t)=>o.store("row").subscribe("setCellValue",e=>{t({row:e.row,column:e.column},e.value)}),rowPinnedChanged:(o,t)=>{const e=[];return e.push(o.store("row").subscribe("setPinnedTopRows",s=>{s.forEach(n=>t(n,"top"))})),e.push(o.store("row").subscribe("setPinnedBottomRows",s=>{s.forEach(n=>t(n,"bottom"))})),e.push(o.store("row").subscribe("takePinnedRows",s=>{s.forEach(n=>t(n,void 0))})),()=>{e.forEach(s=>s())}},rowBaseHeightChanged:(o,t)=>o.store("row").subscribe("setBaseHeight",t),selectedRowsChanged:(o,t)=>o.store("row").subscribe("selectRows",t),rowAdded:(o,t)=>o.store("row").subscribe("appendRowsBefore",({rows:e})=>{e.forEach(s=>t(s.id))}),rowRemoved:(o,t)=>o.store("row").subscribe("takeRows",e=>{e.forEach(s=>t(s))}),columnsChanged:(o,t)=>o.store("column").subscribe("setColumns",t),columnHeightChanged:(o,t)=>o.store("column").subscribe("setHeight",t),columnPinnedChanged:(o,t)=>o.store("column").subscribe("updateColumnPinned",({field:e,pinned:s})=>{t(e,s)}),columnVisibleChanged:(o,t)=>o.store("column").subscribe("updateColumnVisible",({field:e,visible:s})=>{t(e,s)}),columnWidthChanged:(o,t)=>o.store("column").subscribe("updateColumnWidth",({field:e,width:s})=>{t(e,s)}),columnNameChanged:(o,t)=>o.store("column").subscribe("updateColumnName",({field:e,name:s})=>{t(e,s)}),groupCollapsedChanged:(o,t)=>o.store("column").subscribe("updateGroupCollapsed",({group:e,collapsed:s})=>{t(e,s)}),groupNameChanged:(o,t)=>o.store("column").subscribe("updateGroupName",({group:e,name:s})=>{t(e,s)})},Ln={beforeCellDbClicked:[],afterCellDbClicked:[],beforeCellMouseDown:[],afterCellMouseDown:[],beforeCellMouseMove:[],afterCellMouseMove:[],beforeFillerMouseDown:[],afterFillerMouseDown:[],beforeFilling:[],afterFilling:[],beforeSelectionChange:[],afterSelectionChange:[],beforeContextMenuShow:[],afterContextMenuShow:[],beforeColumnResizingStart:[],afterColumnResizingStart:[],beforeColumnResizingEnd:[],afterColumnResizingEnd:[],beforeRowResizingStart:[],afterRowResizingStart:[],beforeRowResizingEnd:[],afterRowResizingEnd:[],beforeKeyDown:[],afterKeyDown:[],beforeKeyPress:[],afterKeyPress:[],beforeKeyUp:[],afterKeyUp:[],beforeCopy:[],afterCopy:[],beforePaste:[],afterPaste:[],beforeRowDragStart:[],afterRowDragStart:[],beforeRowDragEnd:[],afterRowDragEnd:[],beforeColumnDragStart:[],afterColumnDragStart:[],beforeColumnDragEnd:[],afterColumnDragEnd:[]},Hn={width:"100%",height:"100%",headerHeight:30,rowHeight:28,minRowHeight:20,overscanRowCount:5,overscanColumnCount:2};class An{constructor(t,e,s=bn){this.container=t,e=Object.assign({grid:this},Hn,e),this.root=new xn({grid:new Mn({width:e.width,height:e.height,overscanRowCount:e.overscanRowCount,overscanColumnCount:e.overscanColumnCount,scrollThrottleRate:e.scrollThrottleRate,rowResizable:e.rowResizable,fillable:e.fillable,getContextMenuItems:e.getContextMenuItems}),row:new Dn({height:e.rowHeight,minHeight:e.minRowHeight,rowStyle:e.rowStyle,getRowStyle:e.getRowStyle,rowClass:e.rowClass,getRowClass:e.getRowClass}),cell:new Nn,column:new Tn({height:e.headerHeight,getColumnMenuItems:e.getColumnMenuItems})}),this.setColumns(e.columns,e.defaultColumnOption),this.appendRows(e.rows),this.observer=new Pn(this,Ln,Bn),s(this,t)}getRoot(){return this.root}appendChild(t){return!t||this.container.firstChild.contains(t)?t:this.container.firstChild.appendChild(t)}removeChild(t){return t&&this.container.firstChild.contains(t)?this.container.firstChild.removeChild(t):t}getRootElement(){return this.container.firstChild}on(t,e){return this.observer.on(t,e)}trigger(t,...e){return this.observer.trigger(t,...e)}getSelectBoundary(t,e){const s=this.getCoordinate(t,e),n=this.getCoordLocatedRange(s);if(n===void 0)return;let i={left:!1,top:!1,bottom:!1,right:!1};return n.isLeft(s)&&(i.left=!0),n.isRight(s)&&(i.right=!0),n.isTop(s)&&(i.top=!0),n.isBottom(s)&&(i.bottom=!0),i}getFillingBoundary(t,e){const s=this.getCoordinate(t,e),n=this.state("cell").filling;if(n===void 0||!n.contains(s))return;let i={left:!1,top:!1,bottom:!1,right:!1};return n.isLeft(s)&&(i.left=!0),n.isRight(s)&&(i.right=!0),n.isTop(s)&&(i.top=!0),n.isBottom(s)&&(i.bottom=!0),i}getContextMenuItems(t){return this.state("grid").getContextMenuItems?this.state("grid").getContextMenuItems(O(R({},t),{grid:this})):[]}getColumnMenuItems(t){return this.state("column").getColumnMenuItems&&this.state("column").getColumnMenuItems({column:t,grid:this})||[]}getState(){return this.root.getState()}store(t){return this.root.store(t)}state(t){return this.root.state(t)}destroy(){return this.store("grid").destroy(),new Promise(t=>{setTimeout(t,0)})}setLoading(t){return this.store("grid").dispatch("setLoading",t)}isLoading(){return this.state("grid").loading}copySelection(){let t="";var e;this.state("cell").selections.forEach(s=>{let n=-1;s.each(i=>{n!==-1&&(t+=i.y!==n?`
`:"	"),t+=this.getCellValueByCoord(i),n=i.y})}),this.trigger("beforeCopy",t)!==!1&&(e=t,ke?ke(e):new Promise(function(s,n){var i=!1;function r(a){a.clipboardData.setData("text/plain",e),a.preventDefault(),i=!0}document.addEventListener("copy",r),document.execCommand("copy"),document.removeEventListener("copy",r),i?s():n()}),this.trigger("afterCopy",t))}pasteFromClipboard(t=!1){const e=this.state("cell").selections[0];if(!e)return;const s=e.start,n=e.getCellCount();(function(){if(Ie)return Ie();throw new Error("Read from clipboard is not supported in your browser.")})().then(i=>{if(i=i.replace(/(\r\n|\r|\n)/g,`
`),this.trigger("beforePaste",i)===!1)return;let r=R({},s);t?this.setCellValueByCoord(s,i):i.split(`
`).forEach((a,h)=>{a.split("	").forEach((p,l)=>{const v={x:l+s.x,y:h+s.y};(e.contains(v)||n===1)&&(r=v,this.setCellValueByCoord(v,p))})}),this.selectCells(s,r),this.trigger("afterPaste",i)})}getCoordinate(t,e){const s={x:this.store("column").getColumnIndex(e),y:this.store("row").getRowIndex(t)};return s.x==-1||s.y==-1?{x:-1,y:-1}:s}getCellPosition(t){return{row:this.getRowIdByIndex(t.y),column:this.getColumnByIndex(t.x)}}getRawCellValue(t,e){return this.store("row").getRawCellValue(t,e)}getRawCellValueByCoord(t){return this.getRawCellValue(this.getRowIdByIndex(t.y),this.getColumnByIndex(t.x))}getCellValue(t,e){const s=this.getColumnOptions(e,t),n=s==null?void 0:s.transformer,i=this.getRawCellValue(t,e);return n?n.format({value:i,column:s,gird:this}):i}getCellValueByCoord(t){return this.getCellValue(this.getRowIdByIndex(t.y),this.getColumnByIndex(t.x))}setCellValue(t,e,s,n=!1){const i=this.getRawCellValue(t,e),r=this.getColumnOptions(e,t);if(i===void 0||r===void 0||r.readonly)return;const a=r.transformer;i===(s=a?a.parse({oldValue:i,value:s,column:r,gird:this}):s)&&n!==!0||this.store("row").dispatch("setCellValue",{row:t,column:e,value:s})}setCellValueByCoord(t,e){return this.setCellValue(this.getRowIdByIndex(t.y),this.getColumnByIndex(t.x),e)}stopEditing(){this.store("cell").stopEditing()}setEditing(t){this.store("cell").setEditing(t)}selectCells(t,e){return this.store("cell").dispatch("selectCells",{start:t,end:e})}deselectAllCells(){return this.store("cell").dispatch("selectCells",void 0)}getCoordLocatedRange(t){return this.store("cell").getCoordLocatedRange(t)}getColumnOptions(t,e){const s=this.store("column").getColumnOptions(t);return e===void 0||(s==null?void 0:s.columnOptionsSelector)===void 0?s:Object.assign({},s,s.columnOptionsSelector({row:e,gird:this}))}getColumnOptionsByIndex(t,e){return e!==void 0?this.getColumnOptions(this.getColumnByIndex(t),this.store("row").getRowIdByIndex(e)):this.store("column").getColumnOptionsByIndex(t)}getColumnByIndex(t){return this.store("column").getColumnByIndex(t)}getPinnedLeftColumns(){return this.state("column").pinnedLeftColumns}getPinnedRightColumns(){return this.state("column").pinnedRightColumns}getNoPinnedColumns(){return this.state("column").normalColumns}setColumns(t,e){return this.store("column").dispatch("setColumns",{columns:t,defaultOptions:e})}setColumnName(t,e){return this.store("column").dispatch("updateColumnName",{field:t,name:e})}setColumnPinned(t,e){return this.store("column").dispatch("updateColumnPinned",{field:t,pinned:e})}setColumnVisible(t,e){return this.store("column").dispatch("updateColumnVisible",{field:t,visible:e})}setColumnWidth(t,e){return this.store("column").dispatch("updateColumnWidth",{field:t,width:e.width,flex:e.flex})}setColumnHeight(t){return this.store("column").dispatch("setHeight",t)}getGroups(){return Object.values(this.state("column").groupsData)}getGroupData(t){return this.state("column").groupsData[t]}setGroupCollapsed(t,e){return this.store("column").dispatch("updateGroupCollapsed",{group:t,collapsed:e})}toggleGroupCollapsed(t){return this.store("column").toggleGroupCollapsed(t)}setGroupName(t,e){return this.store("column").dispatch("updateGroupName",{group:t,name:e})}getRowIdByIndex(t){return this.store("row").getRowIdByIndex(t)}getRowIndex(t){return this.store("row").getRowIndex(t)}getRowInternalIndex(t){return this.store("row").getRowInternalIndex(t)}getRowDataByIndex(t){return this.store("row").getRowDataByIndex(t)}getRowData(t){return this.store("row").getRowData(t)}appendRows(t){return this.store("row").appendRows(t)}appendRowsBefore(t,e){return this.store("row").appendRowsBefore(t,e)}removeRows(t){return this.store("row").dispatch("takeRows",t)}clearRows(){return this.store("row").dispatch("clear",void 0)}getSelectedRows(){return this.state("row").selectedRows}selectRows(t){return this.store("row").selectRows(t)}appendSelectedRows(t){return this.store("row").appendSelectedRows(t)}takeSelectedRow(t){return this.store("row").takeSelectedRow(t)}getRowIds(){return this.store("row").getRowIds()}getRowsBetween(t,e){return this.store("row").getRowsBetween(t,e)}getPinnedTopRows(){return this.store("row").getPinnedTopRows()}setPinnedTopRows(t){return this.store("row").setPinnedTopRows(t)}appendPinnedTopRows(t){return this.store("row").appendPinnedTopRows(t)}getPinnedBottomRows(){return this.store("row").getPinnedBottomRows()}setPinnedBottomRows(t){return this.store("row").setPinnedBottomRows(t)}appendPinnedBottomRows(t){return this.store("row").appendPinnedBottomRows(t)}takePinnedRows(t){return this.store("row").takePinnedRows(t)}isPinnedTop(t){return this.store("row").isPinnedTop(t)}isPinnedBottom(t){return this.store("row").isPinnedBottom(t)}isPinnedRow(t){return this.store("row").isPinnedRow(t)}setRowBaseHeight(t){return this.store("row").dispatch("setBaseHeight",t)}}var $n="v-grid-inline-input";const Fn={type:"text"};class Un extends as{init(t){const e=Object.assign({},Fn,t.props);this.input||(this.input=document.createElement("input"),this.input.type=e.type,this.input.className=$n,this.input.addEventListener("keydown",s=>{s.key==="Enter"&&t.gird.stopEditing(),s.stopPropagation()})),this.input.value=t.value}gui(){return this.input}afterAttached(){this.input.focus(),this.input.select()}getValue(){return this.input?this.input.value:""}}const Vn={class:"outer-container"},Wn={class:"scroll-container"},jn=qo({__name:"VisualGrid",props:{options:{type:Object,default:null}},setup(o,{expose:t}){const e=o,s=de(null),n=de(null);return Qo(()=>{s.value&&(n.value=new An(s.value,e.options))}),Zo(()=>{n.value&&(n.value.destroy(),n.value=null)}),Jo(()=>e.options,i=>{n.value&&(n.value.setColumns(i.columns||[]),n.value.clearRows(),n.value.appendRows(i.data||[]))},{deep:!0}),t({gridInstance:n}),(i,r)=>(ts(),es("div",Vn,[ue("div",Wn,[ue("div",{ref_key:"gridContainer",ref:s,class:"visual-grid-container v-grid-default-theme"},null,512)])]))}});export{jn as _,Un as h};
