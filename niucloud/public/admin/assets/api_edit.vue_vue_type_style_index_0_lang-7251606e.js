import{d as B,r as p,n as E,l as F,q as t,h as b,s as V,w as i,a as M,e as o,i as w,t as k,u as r,R as C,K as R,L as A,M as P,E as j,X as q,Y as I}from"./index-a7efb343.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */import{g as L,a as O}from"./api-e0d8eaf6.js";const $={class:"dialog-footer"},Z=B({__name:"api_edit",emits:["complete"],setup(K,{expose:y,emit:x}){const u=p(!1),s=p(!1),_=p(""),f={api_name:"",api_key:"",api_secret:"",callback_url:""},a=E({...f}),v=p(),D=F(()=>({api_name:[{required:!0,message:t("apiNamePlaceholder"),trigger:"blur"}]})),h=async n=>{if(s.value||!n)return;const e=O;await n.validate(async d=>{d&&(s.value=!0,e(a).then(c=>{s.value=!1,u.value=!1,x("complete")}).catch(c=>{s.value=!1}))})};return y({showDialog:u,setFormData:async()=>{Object.assign(a,f),s.value=!0;const n=await(await L()).data;_.value=t("addApi"),n&&Object.keys(a).forEach(e=>{n[e]!=null&&(a[e]=n[e])}),s.value=!1}}),(n,e)=>{const d=R,m=A,c=P,g=j,N=q,U=I;return b(),V(N,{modelValue:u.value,"onUpdate:modelValue":e[8]||(e[8]=l=>u.value=l),title:_.value,width:"500px",class:"diy-dialog-wrap","destroy-on-close":!0},{footer:i(()=>[M("span",$,[o(g,{onClick:e[6]||(e[6]=l=>u.value=!1)},{default:i(()=>[w(k(r(t)("cancel")),1)]),_:1}),o(g,{type:"primary",loading:s.value,onClick:e[7]||(e[7]=l=>h(v.value))},{default:i(()=>[w(k(r(t)("confirm")),1)]),_:1},8,["loading"])])]),default:i(()=>[C((b(),V(c,{model:a,"label-width":"120px",ref_key:"formRef",ref:v,rules:r(D),class:"page-form"},{default:i(()=>[o(m,{label:r(t)("apiName"),prop:"api_name"},{default:i(()=>[o(d,{modelValue:a.api_name,"onUpdate:modelValue":e[0]||(e[0]=l=>a.api_name=l),modelModifiers:{trim:!0},clearable:"",placeholder:r(t)("apiNamePlaceholder"),class:"input-width",maxlength:"10",onBlur:e[1]||(e[1]=l=>a.api_name=l.target.value)},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(m,{label:r(t)("api_key")},{default:i(()=>[o(d,{modelValue:a.api_key,"onUpdate:modelValue":e[2]||(e[2]=l=>a.api_key=l),modelModifiers:{trim:!0},maxlength:"16",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),o(m,{label:r(t)("api_secret")},{default:i(()=>[o(d,{modelValue:a.api_secret,"onUpdate:modelValue":e[3]||(e[3]=l=>a.api_secret=l),modelModifiers:{trim:!0},maxlength:"32",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),o(m,{label:r(t)("callbackUrl"),prop:"callbackUrl"},{default:i(()=>[o(d,{modelValue:a.callback_url,"onUpdate:modelValue":e[4]||(e[4]=l=>a.callback_url=l),modelModifiers:{trim:!0},clearable:"",placeholder:r(t)("urlPlaceholder"),class:"input-width",onBlur:e[5]||(e[5]=l=>a.callback_url=l.target.value)},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[U,s.value]])]),_:1},8,["modelValue","title"])}}});export{Z as _};
