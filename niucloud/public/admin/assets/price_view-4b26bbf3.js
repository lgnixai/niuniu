import{d as j,r as p,n as A,h as r,s as I,w as E,e as z,a as i,c,F as v,T as f,v as V,t as u,u as F,q as B,V as G,X as M}from"./index-6405d5ac.js";/* empty css                  *//* empty css                   *//* empty css                     */import{_ as N}from"./_plugin-vue_export-helper-c27b6911.js";const O={class:"price-table"},T={class:"group-buttons"},q=["onClick"],H={border:"1",cellspacing:"0",cellpadding:"5"},K=j({__name:"price_view",setup(L,{expose:C}){const g=p(!1),w=p(!0);p(!1);const b={data:[],headers:[],tableData:[]},s=A({...b}),m=p([]),d=p(null),y=p([]),$=()=>{const n=Array.from(new Set(s.data.map(e=>e.receive_province)));s.headers=n;const a=new Map;s.data.forEach(e=>{const t=`${e.first_weight}-${e.continuous_weight}`;a.has(t)||a.set(t,{id:a.size+1,first_weight:e.first_weight,continuous_weight:e.continuous_weight,data:[]}),a.get(t).data.push(e)}),m.value=Array.from(a.values());const o=Array.from(new Set(s.data.map(e=>e.sender_province)));s.tableData=o.map(e=>{const t={sender_province:e};return s.headers.forEach(l=>{var h;const _=s.data.find(k=>k.sender_province===e&&k.receive_province===l);t[l]=_?(h=a.get(`${_.first_weight}-${_.continuous_weight}`))==null?void 0:h.id:null}),t}),D()},x=n=>{d.value=n,D()},D=()=>{y.value=s.tableData.map(n=>{const a={...n};return s.headers.forEach(o=>{const e=n[o];d.value!==null&&e===d.value?a[o]=n[o]||"-":a[o]=null}),a})},S=(n,a)=>{if(d.value===null)return!1;const o=m.value.find(e=>e.id===d.value);return o==null?void 0:o.data.some(e=>e.sender_province===n.sender_province)};return C({showDialog:g,setFormData:async(n=null)=>{w.value=!0,Object.assign(s,b),n&&Object.keys(s).forEach(a=>{n[a]!=null&&(s[a]=n[a])}),$(),w.value=!1}}),(n,a)=>{const o=G,e=M;return r(),I(e,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=t=>g.value=t),title:F(B)("adjustBalance"),width:"95%","destroy-on-close":!0},{default:E(()=>[z(o,null,{default:E(()=>[i("div",O,[i("div",T,[(r(!0),c(v,null,f(m.value,(t,l)=>(r(),c("button",{key:l,onClick:_=>x(t.id),class:V({active:d.value===t.id})}," ("+u(l+1)+") [首重："+u(t.first_weight)+",续重"+u(t.continuous_weight)+"] ",11,q))),128))]),i("table",H,[i("thead",null,[i("tr",null,[i("th",null,u(F(B)("始发省份")),1),(r(!0),c(v,null,f(s.headers,(t,l)=>(r(),c("th",{key:l},u(t),1))),128))])]),i("tbody",null,[(r(!0),c(v,null,f(y.value,(t,l)=>(r(),c("tr",{key:l,class:V({highlighted:S(t.sender_province)})},[i("td",null,u(t.sender_province),1),(r(!0),c(v,null,f(s.headers,(_,h)=>(r(),c("td",{key:h},u(t[_]||""),1))),128))],2))),128))])])])]),_:1})]),_:1},8,["modelValue","title"])}}});const W=N(K,[["__scopeId","data-v-b6d45054"]]);export{W as default};
