import{d as z,x as B,f as A,r as f,n as F,l as D,q as a,h as v,c as I,e as p,w as m,u as l,R as P,s as $,a as c,t as y,i as T,aR as k,a7 as q,K as L,L as M,M as U,E as j,Y as H}from"./index-6405d5ac.js";/* empty css                   *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                *//* empty css                       */import{a as K,e as O,b as Y}from"./delivery-4a99616b.js";const G={class:"main-container"},J={class:"w-[380px] text-[12px] text-[#999] mt-[5px] leading-[20px]"},Q={class:"fixed-footer-wrap"},W={class:"fixed-footer"},le=z({__name:"company_edit",setup(X){const x=B(),h=A();x.meta.title;const _=f(!0),E={company_id:"",company_name:"",express_no:""};f(10),f(10);const r=F({...E});r.company_id=f(x.query.company_id);const b=()=>{K(r.company_id).then(i=>{_.value=!1;let e=i.data;e&&Object.keys(r).forEach(t=>{e[t]!=null&&(r[t]=e[t])})})};r.company_id?b():_.value=!1;const g=f(),N=D(()=>({company_name:[{required:!0,message:a("companyNamePlaceholder"),trigger:"blur"}],exp_type:[{trigger:"blur",validator:(i,e,t)=>{if(!e.length)return t(),!1;let n=[],s=[];for(let o=0;o<e.length;o++){if(e[o].text)e[o].text&&n.push(e[o].text);else{t(new Error(a("expTypeTextTips")));break}if(e[o].value)if(parseFloat(e[o].value)==0){t(new Error(a("expTypeValueNullTips")));break}else e[o].value&&s.push(e[o].value);else{t(new Error(a("expTypeValueTips")));break}}new Set(n).size!==n.length&&t(new Error(a("expTypeTextRepeatTips"))),new Set(s).size!==s.length&&t(new Error(a("expTypeValueRepeatTips"))),t()}}],print_style:[{trigger:"blur",validator:(i,e,t)=>{if(!e.length)return t(),!1;let n=[],s=[];for(let o=0;o<e.length;o++){if(e[o].template_name)e[o].template_name&&n.push(e[o].template_name);else{t(new Error(a("printStyleNameTips")));break}if(e[o].template_size)e[o].template_size&&s.push(e[o].template_size);else{t(new Error(a("printStyleSizeTips")));break}}new Set(n).size!==n.length&&t(new Error(a("printStyleNameRepeatTips"))),new Set(s).size!==s.length&&t(new Error(a("printStyleSizeRepeatTips"))),t()}}]})),u=f(!1),V=async i=>{if(u.value||!i)return;const e=r.company_id?O:Y;await i.validate(async t=>{t&&(u.value=!0,e(r).then(s=>{h.push("/fengchao/order/delivery/company"),u.value=!1}).catch(()=>{u.value=!1}))})},C=()=>{h.push("/fengchao/order/delivery/company")};return(i,e)=>{const t=k,n=q,s=L,o=M,R=U,w=j,S=H;return v(),I("div",G,[p(n,{class:"box-card !border-none",shadow:"never"},{default:m(()=>[p(t,{content:r.company_id?l(a)("updateCompany"):l(a)("addCompany"),icon:i.ArrowLeft,onBack:e[0]||(e[0]=d=>i.$router.back())},null,8,["content","icon"])]),_:1}),p(n,{class:"box-card mt-[15px] !border-none",shadow:"never"},{default:m(()=>[P((v(),$(R,{model:r,"label-width":"130px",ref_key:"formRef",ref:g,rules:l(N),class:"page-form"},{default:m(()=>[p(o,{label:l(a)("companyName"),prop:"company_name"},{default:m(()=>[p(s,{modelValue:r.company_name,"onUpdate:modelValue":e[1]||(e[1]=d=>r.company_name=d),modelModifiers:{trim:!0},maxlength:"20",clearable:"",placeholder:l(a)("companyNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),p(o,{label:l(a)("expressNo")},{default:m(()=>[c("div",null,[p(s,{modelValue:r.express_no,"onUpdate:modelValue":e[2]||(e[2]=d=>r.express_no=d),modelModifiers:{trim:!0},clearable:"",placeholder:l(a)("expressNoPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"]),c("p",J,y(l(a)("expressNoTips")),1)])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[S,_.value]])]),_:1}),c("div",Q,[c("div",W,[p(w,{type:"primary",onClick:e[3]||(e[3]=d=>V(g.value))},{default:m(()=>[T(y(l(a)("save")),1)]),_:1}),p(w,{onClick:e[4]||(e[4]=d=>C())},{default:m(()=>[T(y(l(a)("back")),1)]),_:1})])])])}}});export{le as default};
