import{d as t,r as e,O as i,bQ as a,a9 as c,bR as l,g as r,aG as s,h as d,o as n,c as o,w as p,b as u,A as v,y as f,X as y,z as m,f as x,e as h,V as _,W as k,ai as C,v as g,i as b,ah as w}from"./index-06110d51.js";const I=t({__name:"area-select",props:{areaId:{type:Number,default:0}},emits:["complete"],setup(t,{expose:I,emit:j}){const z=t,A=e(!1),G=i({province:[],city:[],district:[]}),N=e("province"),O=i({province:null,city:null,district:null});a(0).then((({data:t})=>{G.province=t})).catch(),c((()=>z.areaId),((t,e)=>{t&&!e&&l(t).then((({data:t})=>{t.province&&(O.province=t.province),t.city&&(O.city=t.city),t.district&&(O.district=t.district)}))}),{immediate:!0}),c((()=>O.province),(()=>{a(O.province.id).then((({data:t})=>{if(G.city=t,N.value="city",O.city){let e=!1;for(let i=0;i<t.length;i++)if(O.city.id==t[i].id){e=!0;break}e||(O.city=null)}})).catch()}),{deep:!0}),c((()=>O.city),(t=>{t?a(O.city.id).then((({data:t})=>{if(G.district=t,N.value="district",O.district){let e=!1;for(let i=0;i<t.length;i++)if(O.district.id==t[i].id){e=!0;break}e||(O.district=null)}})).catch():(G.district=[],O.district=null)}),{deep:!0}),c((()=>O.district),(t=>{t&&(N.value="district",j("complete",O),A.value=!1)}),{deep:!0});return I({open:()=>{A.value=!0}}),(t,e)=>{const i=b,a=w,c=r(d("u-popup"),s);return n(),o(c,{show:A.value,onClose:e[4]||(e[4]=t=>A.value=!1),mode:"bottom",round:10},{default:p((()=>[u(i,{onTouchmove:e[3]||(e[3]=v((()=>{}),["prevent","stop"])),class:"popup-common"},{default:p((()=>[u(i,{class:"title"},{default:p((()=>[f("请选择地区")])),_:1}),u(i,{class:"flex p-[30rpx] pt-[0] text-sm font-500"},{default:p((()=>[G.province.length?(n(),o(i,{key:0,class:y(["flex-1 pr-[10rpx]",{"text-[var(--primary-color)]":"province"==N.value}]),onClick:e[0]||(e[0]=t=>N.value="province")},{default:p((()=>[O.province?(n(),o(i,{key:0},{default:p((()=>[f(m(O.province.name),1)])),_:1})):(n(),o(i,{key:1},{default:p((()=>[f("请选择")])),_:1}))])),_:1},8,["class"])):x("v-if",!0),G.city.length?(n(),o(i,{key:1,class:y(["flex-1 pr-[10rpx]",{"text-[var(--primary-color)]":"city"==N.value}]),onClick:e[1]||(e[1]=t=>N.value="city")},{default:p((()=>[O.city?(n(),o(i,{key:0},{default:p((()=>[f(m(O.city.name),1)])),_:1})):(n(),o(i,{key:1},{default:p((()=>[f("请选择")])),_:1}))])),_:1},8,["class"])):x("v-if",!0),G.district.length?(n(),o(i,{key:2,class:y(["flex-1 pr-[10rpx]",{"text-[var(--primary-color)]":"district"==N.value}]),onClick:e[2]||(e[2]=t=>N.value="district")},{default:p((()=>[O.district?(n(),o(i,{key:0},{default:p((()=>[f(m(O.district.name),1)])),_:1})):(n(),o(i,{key:1},{default:p((()=>[f("请选择")])),_:1}))])),_:1},8,["class"])):x("v-if",!0)])),_:1}),u(a,{"scroll-y":"true",class:"h-[50vh]"},{default:p((()=>[u(i,{class:"flex p-[30rpx] pt-0 text-sm"},{default:p((()=>[G.province.length?h((n(),o(i,{key:0},{default:p((()=>[(n(!0),_(k,null,C(G.province,(t=>(n(),o(i,{class:y(["h-[80rpx] flex items-center",{"text-[var(--primary-color)]":O.province&&O.province.id==t.id}]),onClick:e=>O.province=t},{default:p((()=>[f(m(t.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1},512)),[[g,"province"==N.value]]):x("v-if",!0),G.city.length?h((n(),o(i,{key:1},{default:p((()=>[(n(!0),_(k,null,C(G.city,(t=>(n(),o(i,{class:y(["h-[80rpx] flex items-center",{"text-[var(--primary-color)]":O.city&&O.city.id==t.id}]),onClick:e=>O.city=t},{default:p((()=>[f(m(t.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1},512)),[[g,"city"==N.value]]):x("v-if",!0),G.district.length?h((n(),o(i,{key:2},{default:p((()=>[(n(!0),_(k,null,C(G.district,(t=>(n(),o(i,{class:y(["h-[80rpx] flex items-center",{"text-[var(--primary-color)]":O.district&&O.district.id==t.id}]),onClick:e=>O.district=t},{default:p((()=>[f(m(t.name),1)])),_:2},1032,["class","onClick"])))),256))])),_:1},512)),[[g,"district"==N.value]]):x("v-if",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}});export{I as _};
