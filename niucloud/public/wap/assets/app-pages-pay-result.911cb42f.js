import{_ as a}from"./top-tabbar.b87f5a2f.js";import{d as t,r as e,p as s,o as l,c as r,w as o,b as n,u,X as c,y as p,z as f,f as i,n as d,a as m,b7 as x,g as v,h as _,D as b,i as y,C as h,F as T,ac as g,b8 as w,a7 as C}from"./index-06110d51.js";import{g as j}from"./pay.79dd7250.js";import{t as k}from"./topTabbar.88fd7aa2.js";import"./manifest.c5d7e573.js";const z=t({__name:"result",setup(t){const z=e(null),P=e(!1);let R="",S=0,B=0;let L=k().setTopTabbarParam({title:"",isBack:!1});s((a=>{R=a.trade_type,S=a.trade_id,V()}));const V=()=>{j(R,S).then((a=>{if(!uni.$u.test.isEmpty(a.data)){if(1==a.data.status&&B<5)return P.value=!0,B++,void setTimeout((()=>{V()}),1e3);z.value=a.data,P.value=!1}}))},D=()=>{var a;const t=decodeURIComponent(uni.getStorageSync("payReturn"));m(t?{url:t,mode:"reLaunch"}:{url:x(),param:{code:null==(a=z.value)?void 0:a.out_trade_no},mode:"reLaunch"})};return(t,e)=>{const s=v(_("top-tabbar"),a),m=b,x=y,j=h,k=v(_("u-loading-icon"),w),R=v(_("u-modal"),C);return l(),r(x,{style:d(t.themeColor())},{default:o((()=>[z.value?(l(),r(x,{key:0,class:"w-screen h-screen flex flex-col items-center"},{default:o((()=>[n(s,{ref:"topTabbarRef",data:u(L)},null,8,["data"]),n(x,{class:"flex-1 flex flex-col items-center w-full pt-[180rpx]"},{default:o((()=>[n(x,{class:c(["flex items-baseline",{"text-[#06c05d]":2==z.value.status,"text-red":2!=z.value.status}])},{default:o((()=>[n(m,{class:c(["nc-iconfont -mb-[4rpx] !text-[32rpx]",{"nc-icon-duihaoV6mm":2==z.value.status,"nc-icon-tanhaoV6mm":2!=z.value.status}])},null,8,["class"]),n(m,{class:"text-[36rpx] ml-[16rpx] font-500"},{default:o((()=>[p(f(2==z.value.status?"支付成功":"支付失败"),1)])),_:1})])),_:1},8,["class"]),n(x,{class:"text-[56rpx] font-500 mt-[60rpx] price-font"},{default:o((()=>[n(m,{class:"text-[36rpx] mr-[6rpx]"},{default:o((()=>[p(f(u(T)("currency")),1)])),_:1}),n(m,null,{default:o((()=>[p(f(u(g)(z.value.money)),1)])),_:1})])),_:1})])),_:1}),n(x,{class:"pb-[260rpx]"},{default:o((()=>[n(j,{class:"w-[380rpx] !border-0 h-[80rpx] text-[28rpx] text-[#333] !bg-[#f2f2f2] flex-center font-500 rounded-[20rpx]",plain:!0,onClick:D},{default:o((()=>[p(f(2==z.value.status?u(T)("complete"):u(T)("close")),1)])),_:1})])),_:1})])),_:1})):i("v-if",!0),n(R,{show:P.value,showCancelButton:!0,confirmText:u(T)("pay.completePay"),cancelText:u(T)("pay.incompletePay"),onCancel:D,confirmColor:"var(--primary-color)"},{default:o((()=>[n(x,{class:"py-[20rpx]"},{default:o((()=>[n(k,{text:u(T)("pay.getting"),textSize:"16",mode:"circle",vertical:!0},null,8,["text"])])),_:1})])),_:1},8,["show","confirmText","cancelText"])])),_:1},8,["style"])}}});export{z as default};
