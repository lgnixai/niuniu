import{d as e,r as a,O as t,p as s,o as l,V as r,b as d,w as o,y as f,z as n,c as u,f as i,W as c,ai as _,e as x,v as m,u as p,b6 as v,i as y,D as k,g as I,h as g,B as h,E as b,bY as w,bZ as j,bc as C,c8 as O,c9 as N,_ as R}from"./index-06110d51.js";import{_ as J}from"./tabbar.4bca783d.js";import{_ as S}from"./pay.e6ecc795.js";import{e as P,c as L,d as z,b as D,f as U}from"./order.22aa3725.js";import{g as q}from"./goto.1ed07f13.js";import"./pay.79dd7250.js";const B=R(e({__name:"orderdetail",setup(e){const R=a(null),B=a(!1),E=t({}),G=a(),T=a(),V=e=>{v({phoneNumber:e})},W=async()=>{await L(E.id),q("/addon/tk_jhkd/pages/orderlist")},Y=async()=>{await z(E.id),q("/addon/tk_jhkd/pages/orderlist")},Z=async()=>{let e={id:E.id,close_reason:"用户主动退款"};await D(e),q("/addon/tk_jhkd/pages/orderlist")},$=()=>{var e;B.value=!0,null==(e=R.value)||e.open(E.payInfo.trade_type,E.payInfo.trade_id,"/tk_jhkd/pages/orderdetail?id="+E.id)},A=async e=>{const a=await P(e);null==a.data.order_status_arr&&(uni.$u.toast("订单不存在或删除"),setTimeout((function(){q("/addon/tk_jhkd/pages/orderlist")}),1e3)),Object.assign(E,a.data),E.orderInfo.delivery_id&&(async e=>{const a=await U(e);G.value=a.data})(E.orderInfo.delivery_id),E.orderInfo.courier_context&&(T.value=JSON.parse(E.orderInfo.courier_context))};return s((e=>{e.id&&A(e.id)})),(e,a)=>{const t=y,s=k,v=I(g("up-collapse-item"),w),P=I(g("up-collapse"),j),L=I(g("u-icon"),C),z=h,D=I(g("u-steps-item"),O),U=I(g("u-steps"),N),q=I(g("tabbar"),J),A=I(g("pay"),S);return l(),r(c,null,[d(t,{class:""},{default:o((()=>[d(t,{class:"tk-card"},{default:o((()=>[d(t,{class:"order-num-card"},{default:o((()=>[d(t,{class:"text-xs font-weight text-slate-600"},{default:o((()=>[f("订单号:"+n(E.order_id),1)])),_:1}),d(t,{class:"fb mt-1"},{default:o((()=>[d(t,{class:"text-xs font-weight text-slate-500"},{default:o((()=>[f(n(E.create_time),1)])),_:1}),E.order_status_arr?(l(),u(t,{key:0,class:"mr-4 tk-tag"},{default:o((()=>[f(n(E.order_status_arr.name),1)])),_:1})):i("v-if",!0)])),_:1})])),_:1}),d(t,{class:"ml-2"},{default:o((()=>[d(t,{class:"flex mt-1 items-center"},{default:o((()=>[d(t,{class:"mr-4"},{default:o((()=>[d(s,{class:"qu-tag text-xs"},{default:o((()=>[f("取")])),_:1})])),_:1}),E.orderInfo?(l(),u(t,{key:0,class:""},{default:o((()=>[d(t,{class:"tk-sltext text-xs text-[#4b4b4b] font-bold"},{default:o((()=>[f(n(JSON.parse(E.orderInfo.start_address).address),1)])),_:1}),d(t,{class:"text-xs flex"},{default:o((()=>[d(t,{class:"tk-sltext"},{default:o((()=>[f(n(JSON.parse(E.orderInfo.start_address).full_address),1)])),_:1})])),_:1}),d(t,{class:"text-xs flex"},{default:o((()=>[d(t,{class:"tk-sltext"},{default:o((()=>[f(n(JSON.parse(E.orderInfo.start_address).mobile),1)])),_:1})])),_:1})])),_:1})):i("v-if",!0)])),_:1}),d(t,{class:"flex mt-2 items-center"},{default:o((()=>[d(t,{class:"mr-4"},{default:o((()=>[d(s,{class:"song-tag text-[32rpx]"},{default:o((()=>[f("收")])),_:1})])),_:1}),E.orderInfo?(l(),u(t,{key:0,class:""},{default:o((()=>[d(t,{class:"flex"},{default:o((()=>[d(t,{class:"tk-sltext text-xs font-bold text-[32rpx]"},{default:o((()=>[f(n(JSON.parse(E.orderInfo.end_address).address),1)])),_:1})])),_:1}),d(t,{class:"text-xs flex mt-1"},{default:o((()=>[d(t,{class:"tk-sltext w-3/4"},{default:o((()=>[f(n(JSON.parse(E.orderInfo.end_address).full_address),1)])),_:1})])),_:1}),d(t,{class:"text-xs flex"},{default:o((()=>[d(t,{class:"tk-sltext w-3/4"},{default:o((()=>[f(n(JSON.parse(E.orderInfo.end_address).mobile),1)])),_:1})])),_:1})])),_:1})):i("v-if",!0)])),_:1})])),_:1}),E.orderInfo?(l(),u(t,{key:0,class:"detail-tag !text-[24rpx] font-weight p-4 !p-2 rounded-[8rpx] mt-2"},{default:o((()=>[f(" 物品:"+n(E.orderInfo.goods)+"下单重量:"+n(E.orderInfo.weight)+"kg "+n(E.orderInfo.goods)+" "+n(E.orderInfo.long)+"x"+n(E.orderInfo.width)+"x"+n(E.orderInfo.height)+"cm ",1)])),_:1})):i("v-if",!0),d(t,{class:"detail-tag font-weight p-4 text-[#313131] !text-[24rpx] mt-1 rounded-[8rpx]"},{default:o((()=>[f(" 备注:"+n(E.remark),1)])),_:1}),d(t,{class:"flex justify-end mt-2"},{default:o((()=>[E.order_status_arr?(l(!0),r(c,{key:0},_(E.order_status_arr.member_action,((e,a)=>(l(),u(t,{class:"tk-tag mr-4",onClick:a=>{return"gopay"==(t=e.class)&&$(),"del"==t&&Y(),"refund"==t&&Z(),void("close"==t&&W());var t}},{default:o((()=>[f(n(e.name),1)])),_:2},1032,["onClick"])))),256)):i("v-if",!0)])),_:1})])),_:1}),d(t,null,{default:o((()=>[d(P,{onChange:e.change001,onClose:e.close001,onOpen:e.open001},{default:o((()=>[d(v,{title:"计费信息",name:"Docs guide"},{default:o((()=>[d(t,{class:"p-2 !bg-[#f7f7f7] font-bold"},{default:o((()=>[E.orderInfo?(l(),u(t,{key:0,class:"flex"},{default:o((()=>[d(t,{class:""},{default:o((()=>[f("首重:"+n(E.orderInfo.price_rule.first)+"元/"+n(E.orderInfo.price_rule.start)+"kg ",1)])),_:1}),d(t,{class:"ml-6"},{default:o((()=>[f("续重:"+n(E.orderInfo.price_rule.add)+"元/kg",1)])),_:1})])),_:1})):i("v-if",!0),E.deliveryRealInfo?(l(),u(t,{key:1,class:""},{default:o((()=>[d(t,{class:"flex"},{default:o((()=>[E.deliveryRealInfo.fee_weight>0?(l(),u(t,{key:0},{default:o((()=>[f(" 计费重量:"+n(E.deliveryRealInfo.fee_weight)+"kg ",1)])),_:1})):i("v-if",!0),E.deliveryRealInfo.volume>0?(l(),u(t,{key:1,class:"ml-8"},{default:o((()=>[f("体积:"+n(E.deliveryRealInfo.volume)+"cm³ ",1)])),_:1})):i("v-if",!0)])),_:1}),E.deliveryRealInfo&&E.deliveryRealInfo.fee_blockList.length>0?(l(!0),r(c,{key:0},_(E.deliveryRealInfo.fee_blockList,((e,a)=>(l(),u(t,{class:"flex"},{default:o((()=>[d(t,null,{default:o((()=>[f(n(e.name),1)])),_:2},1024),d(t,null,{default:o((()=>[f(n(e.fee)+"元",1)])),_:2},1024)])),_:2},1024)))),256)):i("v-if",!0)])),_:1})):i("v-if",!0)])),_:1})])),_:1})])),_:1},8,["onChange","onClose","onOpen"])])),_:1}),d(t,{class:"tk-card"},{default:o((()=>[E.orderInfo&&T.value&&1==E.orderInfo.order_status?(l(),u(t,{key:0,class:"mb-2 font-weight text-xs text-slate-600"},{default:o((()=>[d(t,{class:"fl items-center"},{default:o((()=>[T.value.courierName?(l(),u(t,{key:0,class:""},{default:o((()=>[f("揽件员："+n(T.value.courierName),1)])),_:1})):i("v-if",!0),T.value.courierPhone?(l(),u(t,{key:1,class:"ml-4 mr-1",onClick:a[0]||(a[0]=e=>V(T.value.courierPhone))},{default:o((()=>[f(" 联系电话："+n(T.value.courierPhone),1)])),_:1})):i("v-if",!0),T.value.courierPhone?(l(),u(L,{key:2,name:"phone",color:"#676767",size:"18",onClick:a[1]||(a[1]=e=>V(T.value.courierPhone))})):i("v-if",!0)])),_:1}),T.value&&T.value.pickUpCode?(l(),u(t,{key:0,class:"mt-2"},{default:o((()=>[d(t,{class:"font-bold text-[32rpx]"},{default:o((()=>[f("取件码："+n(T.value.pickUpCode),1)])),_:1})])),_:1})):i("v-if",!0)])),_:1})):i("v-if",!0),x(d(t,{class:"mt-2 flex items-center"},{default:o((()=>[d(z,{src:p(b)(E.orderInfo&&E.orderInfo.delivery_arry?E.orderInfo.delivery_arry.logo:""),mode:"",style:{width:"34px",height:"34px","border-radius":"100%"}},null,8,["src"]),d(t,{class:""},{default:o((()=>[d(t,{class:"ml-2 text-sm"},{default:o((()=>[f(n(E.orderInfo&&E.orderInfo.delivery_arry?E.orderInfo.delivery_arry.name:""),1)])),_:1}),d(t,{class:"ml-2 font-weight text-xs text-slate-600"},{default:o((()=>[f(n(E.orderInfo&&E.orderInfo.delivery_id?E.orderInfo.delivery_id:"暂无单号"),1)])),_:1})])),_:1})])),_:1},512),[[m,E.orderInfo&&E.orderInfo.delivery_arry]])])),_:1}),d(t,{class:"tk-card"},{default:o((()=>[G.value&&G.value.length>0?(l(),u(t,{key:0,class:"p-2"},{default:o((()=>[d(U,{dot:"true",direction:"column"},{default:o((()=>[(l(!0),r(c,null,_(G.value,((e,a)=>(l(),u(D,{key:"index",title:e.desc,desc:e.time},null,8,["title","desc"])))),128))])),_:1})])),_:1})):(l(),u(t,{key:1,class:"text-xs text-slate-400"},{default:o((()=>[f("暂无运单动态")])),_:1}))])),_:1})])),_:1}),d(q,{addon:"tk_jhkd"}),d(A,{ref_key:"payRef",ref:R,onClose:a[2]||(a[2]=e=>B.value=!1)},null,512)],64)}}}),[["__scopeId","data-v-88394474"]]);export{B as default};
